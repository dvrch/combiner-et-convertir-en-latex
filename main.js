/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var gt=Object.defineProperty;var Jt=Object.getOwnPropertyDescriptor;var Xt=Object.getOwnPropertyNames;var Kt=Object.prototype.hasOwnProperty;var Yt=(e,t)=>{for(var n in t)gt(e,n,{get:t[n],enumerable:!0})},Qt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Xt(t))!Kt.call(e,o)&&o!==n&&gt(e,o,{get:()=>t[o],enumerable:!(r=Jt(t,o))||r.enumerable});return e};var Zt=e=>Qt(gt({},"__esModule",{value:!0}),e);var De={};Yt(De,{default:()=>ht});module.exports=Zt(De);var H=require("obsidian");function U(){}function xt(e){return e()}function ot(){return Object.create(null)}function P(e){e.forEach(xt)}function rt(e){return typeof e=="function"}function it(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Mt(e){return Object.keys(e).length===0}var bt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var st=class e{_listeners="WeakMap"in bt?new WeakMap:void 0;_observer=void 0;options;constructor(t){this.options=t}observe(t,n){return this._listeners.set(t,n),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(t=>{for(let n of t)e.entries.set(n.target,n),this._listeners.get(n.target)?.(n)}))}};st.entries="WeakMap"in bt?new WeakMap:void 0;var Dt=!1;function At(){Dt=!0}function Tt(){Dt=!1}function B(e,t){e.appendChild(t)}function Nt(e,t,n){let r=Ot(e);if(!r.getElementById(t)){let o=W("style");o.id=t,o.textContent=n,ne(r,o)}}function Ot(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ne(e,t){return B(e.head||e,t),t.sheet}function et(e,t,n){e.insertBefore(t,n||null)}function V(e){e.parentNode&&e.parentNode.removeChild(e)}function W(e){return document.createElement(e)}function oe(e){return document.createTextNode(e)}function ct(){return oe(" ")}function lt(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function K(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Pt(e){return Array.from(e.childNodes)}function $t(e,t){e.value=t??""}function It(e){let t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}var Y;function q(e){Y=e}var J=[];var at=[],Z=[],Rt=[],ae=Promise.resolve(),wt=!1;function Bt(){wt||(wt=!0,ae.then(ut))}function nt(e){Z.push(e)}var yt=new Set,Q=0;function ut(){if(Q!==0)return;let e=Y;do{try{for(;Q<J.length;){let t=J[Q];Q++,q(t),ue(t.$$)}}catch(t){throw J.length=0,Q=0,t}for(q(null),J.length=0,Q=0;at.length;)at.pop()();for(let t=0;t<Z.length;t+=1){let n=Z[t];yt.has(n)||(yt.add(n),n())}Z.length=0}while(J.length);for(;Rt.length;)Rt.pop()();wt=!1,yt.clear(),q(e)}function ue(e){if(e.fragment!==null){e.update(),P(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(nt)}}function qt(e){let t=[],n=[];Z.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Z=t}var ft=new Set,fe;function tt(e,t){e&&e.i&&(ft.delete(e),e.i(t))}function pt(e,t,n,r){if(e&&e.o){if(ft.has(e))return;ft.add(e),fe.c.push(()=>{ft.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}var pe=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],de=new Set([...pe]);function Ht(e){e&&e.c()}function kt(e,t,n){let{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),nt(()=>{let f=e.$$.on_mount.map(xt).filter(rt);e.$$.on_destroy?e.$$.on_destroy.push(...f):P(f),e.$$.on_mount=[]}),o.forEach(nt)}function Ft(e,t){let n=e.$$;n.fragment!==null&&(qt(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _e(e,t){e.$$.dirty[0]===-1&&(J.push(e),Bt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function dt(e,t,n,r,o,f,y=null,M=[-1]){let _=Y;q(e);let d=e.$$={fragment:null,ctx:[],props:f,update:U,not_equal:o,bound:ot(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:ot(),dirty:M,skip_bound:!1,root:t.target||_.$$.root};y&&y(d.root);let g=!1;if(d.ctx=n?n(e,t.props||{},(w,N,...F)=>{let O=F.length?F[0]:N;return d.ctx&&o(d.ctx[w],d.ctx[w]=O)&&(!d.skip_bound&&d.bound[w]&&d.bound[w](O),g&&_e(e,w)),N}):[],d.update(),g=!0,P(d.before_update),d.fragment=r?r(d.ctx):!1,t.target){if(t.hydrate){At();let w=Pt(t.target);d.fragment&&d.fragment.l(w),w.forEach(V)}else d.fragment&&d.fragment.c();t.intro&&tt(e.$$.fragment),kt(e,t.target,t.anchor),Tt(),ut()}q(_)}var ge;typeof HTMLElement=="function"&&(ge=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let r=this.$$c.$on(e,t);this.$$l_u.set(t,r)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){let r=this.$$l_u.get(t);r&&(r(),this.$$l_u.delete(t))}if(this.$$l[e]){let r=this.$$l[e].indexOf(t);r>=0&&this.$$l[e].splice(r,1)}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(o){return()=>{let f;return{c:function(){f=W("slot"),o!=="default"&&K(f,"name",o)},m:function(_,d){et(_,f,d)},d:function(_){_&&V(f)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let t={},n=It(this);for(let o of this.$$s)o in n&&(t[o]=[e(o)]);for(let o of this.attributes){let f=this.$$g_p(o.name);f in this.$$d||(this.$$d[f]=vt(f,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let r=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let f=vt(o,this.$$d[o],this.$$p_d,"toAttribute");f==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,f)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(let o in this.$$l)for(let f of this.$$l[o]){let y=this.$$c.$on(o,f);this.$$l_u.set(f,y)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=vt(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function vt(e,t,n,r){let o=n[e]?.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!r||!n[e])return t;if(r==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}var X=class{$$=void 0;$$set=void 0;$destroy(){Ft(this,1),this.$destroy=U}$on(t,n){if(!rt(n))return U;let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Mt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gt);var To=require("obsidian");var So=require("obsidian");function Ce(e,t,n){let{app:r}=t,{basePath:o}=t,{settings:f}=t,{config:y=null}=t,{combinedFileName:M=""}=t,_=new Set,d="",g=new Set,w={},N=new Set;function F(s,p){let i=[],c=[],m=p.split(`
`);for(let u of m){let b=u.match(/^(#+)\s*(.*)$/);if(b){let $=b[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();i.push($)}let l=u.match(/\^([\w-]+)$/);l&&c.push(l[1])}w[s.toLowerCase()]={file:s,sections:i,blocks:c}}async function O(s){let p=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,i=s,c;for(;(c=p.exec(s))!==null;){let m=c[0],u=c[1].trim(),b=c[2],l=c[3],$=c[4],A=c[5];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(u)){let S=`%% EMBED IMAGE: ${u} %%
`;i=i.replace(m,S+m);continue}if(!_.has(u)){_.add(u),g.add(u.toLowerCase());try{let S=r.metadataCache.getFirstLinkpathDest(u,"");if(S){let v=await r.vault.read(S);(!v||v.trim()==="")&&(v=`<!-- Contenu vide ou non trouv\xE9 pour '${u}' -->`);let h=v;F(u,h),h=await D(h,S.parent?.path||"");let G=`^${u.replace(/_/g,"-")}`,R=`%% EMBED START: [${u}] %% ${G}
`,k=`
%% EMBED END: ${u} %%`;i=i.replace(m,R+h+k)}else i=i.replace(m,`![[${u}]]`)}catch{i=i.replace(m,`![[${u}]]`)}finally{_.delete(u)}}}return i}async function j(s){let p=/\[\[([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,i=s.split(`
`),c=!1,m=-1,u=[];for(let l=0;l<i.length;l++)/^(```|~~~)/.test(i[l].trim())&&(c?(c=!1,u.push({start:m,end:l})):(c=!0,m=l));let b=[];for(let l=0;l<i.length;l++){let $=i[l],A,S=!1;for(let v of u)if(l>=v.start&&l<=v.end){S=!0;break}if(S){b.push($);continue}for(;(A=p.exec($))!==null;){let v=A[0],h=A[1].trim(),G=A[2],R=A[3],k=A[4],L=A[5],z=A[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(h))continue;let mt=w[h.toLowerCase()];if(mt){if(!G&&!k){let T=`^${h.replace(/_/g,"-")}`,I=z||h;$=$.replace(v,`[[#${T}|${I}]]`);continue}if(G&&R){let T=R.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(mt.sections.includes(T)){let I=z||R;$=$.replace(v,`[[#${T}|${I}]]`);continue}}if(k&&L){let T="^"+L.replace(/_/g,"-");if(mt.blocks.includes(L.replace(/_/g,"-"))){let I=z||L;$=$.replace(v,`[[#${T}|${I}]]`);continue}}}if(f.useHiddenEmbeds&&!g.has(h.toLowerCase())&&!N.has(h.toLowerCase()))try{let T=r.metadataCache.getFirstLinkpathDest(h,"");if(T){let I=await r.vault.read(T);(!I||I.trim()==="")&&(I=`<!-- Contenu vide ou non trouv\xE9 pour '${h}' -->`);let Vt=`%%
%% EMBED HIDDEN START: [[${h}]] %%
${I}
%% EMBED HIDDEN END %%
%%`;b.push(Vt),N.add(h.toLowerCase())}}catch{}let _t=r.metadataCache.getFirstLinkpathDest(h,"");if(_t&&!_t.path.startsWith("http")&&!_t.path.startsWith("/")){let T=z||h;$=$.replace(v,`[[${h}|${T}]]`)}else{let T=z||h;$=$.replace(v,`[[${h}|${T}]]`)}}p.lastIndex=0,b.push($)}return b.join(`
`)}async function E(s){let p=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,i=s,c;for(;(c=p.exec(s))!==null;){let m=c[0],u=c[1].trim(),b=c[2],l=c[3],$=c[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(u)&&(u=u.replace(/\.md$/i,""));try{let S=r.metadataCache.getFirstLinkpathDest(u,"");if(S){let h=`![[${S.path.replace(/\\/g,"/")}`;b&&l&&(h+=`#${l}`),$&&(h+=`|${$}`),h+="]]",i=i.replace(m,h)}else i=i.replace(m,`![[${u}]]`)}catch{i=i.replace(m,`![[${u}]]`)}}return i}async function D(s,p){let i=s;return i=await O(i),i=await j(i),i=await E(i),i=i,i}function a(s){return s.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(p,i,c,m)=>g.has(i.toLowerCase())?m?`[[#^${c}|${m}]]`:`[[#^${c}]]`:p)}async function x(s){d="Traitement des liens...",_.clear(),g.clear(),N.clear(),w={};try{let p=await D(s,o);return p=a(p),d="Traitement termin\xE9",p}catch(p){throw d="Erreur lors du traitement",p}}function C(){_.clear(),d="",g.clear(),N.clear(),w={}}return e.$$set=s=>{"app"in s&&n(0,r=s.app),"basePath"in s&&n(1,o=s.basePath),"settings"in s&&n(2,f=s.settings),"config"in s&&n(3,y=s.config),"combinedFileName"in s&&n(4,M=s.combinedFileName)},[r,o,f,y,M,x,C]}var Et=class extends X{constructor(t){super(),dt(this,t,Ce,null,it,{app:0,basePath:1,settings:2,config:3,combinedFileName:4,processMarkdown:5,resetState:6})}get processMarkdown(){return this.$$.ctx[5]}get resetState(){return this.$$.ctx[6]}},Wt=Et;function Se(e){Nt(e,"svelte-v99t9y",".combiner-app.svelte-v99t9y{padding:1rem}textarea.svelte-v99t9y{width:100%;height:400px;margin-top:1rem}")}function Le(e){let t,n,r,o,f,y,M,_,d,g,w,N={app:e[0],settings:e[1],basePath:"",config:null,combinedFileName:""};return o=new Wt({props:N}),e[5](o),{c(){t=W("div"),n=W("h1"),n.textContent="Markdown Combiner",r=ct(),Ht(o.$$.fragment),f=ct(),y=W("button"),y.textContent="Combine Active Note",M=ct(),_=W("textarea"),_.readOnly=!0,K(_,"class","svelte-v99t9y"),K(t,"class","combiner-app svelte-v99t9y")},m(F,O){et(F,t,O),B(t,n),B(t,r),kt(o,t,null),B(t,f),B(t,y),B(t,M),B(t,_),$t(_,e[3]),d=!0,g||(w=[lt(y,"click",e[4]),lt(_,"input",e[6])],g=!0)},p(F,[O]){let j={};O&1&&(j.app=F[0]),O&2&&(j.settings=F[1]),o.$set(j),O&8&&$t(_,F[3])},i(F){d||(tt(o.$$.fragment,F),d=!0)},o(F){pt(o.$$.fragment,F),d=!1},d(F){F&&V(t),e[5](null),Ft(o),g=!1,P(w)}}}function Me(e,t,n){let{app:r}=t,{settings:o}=t,f,y="";async function M(){if(f){let g=r.workspace.getActiveFile();if(g){let w=await r.vault.read(g);n(3,y=await f.processMarkdown(w))}}}function _(g){at[g?"unshift":"push"](()=>{f=g,n(2,f)})}function d(){y=this.value,n(3,y)}return e.$$set=g=>{"app"in g&&n(0,r=g.app),"settings"in g&&n(1,o=g.settings)},[r,o,f,y,M,_,d]}var Ct=class extends X{constructor(t){super(),dt(this,t,Me,Le,it,{app:0,settings:1},Se)}},zt=Ct;var St={useHiddenEmbeds:!0};var Bo=require("obsidian");async function Ut(e,t,n){let r=new Set,o=new Set,f=new Set,y={};function M(E,D){let a=[],x=[],C=D.split(`
`);for(let s of C){let p=s.match(/^(#+)\s*(.*)$/);if(p){let c=p[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();a.push(c)}let i=s.match(/\^([\w-]+)$/);i&&x.push(i[1])}y[E.toLowerCase()]={file:E,sections:a,blocks:x}}async function _(E){let D=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,a=E,x;for(;(x=D.exec(E))!==null;){let C=x[0],s=x[1].trim();if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(s)){let p=`%% EMBED IMAGE: ${s} %%
`;a=a.replace(C,p+C);continue}if(!r.has(s)){r.add(s),o.add(s.toLowerCase());try{let p=e.metadataCache.getFirstLinkpathDest(s,"");if(p){let i=await e.vault.read(p);(!i||i.trim()==="")&&(i=`<!-- Contenu vide ou non trouv\xE9 pour '${s}' -->`),M(s,i);let c=await N(i,p.parent?.path||""),m=`^${s.replace(/_/g,"-")}`,u=`%% EMBED START: [${s}] %% ${m}
`,b=`
%% EMBED END: ${s} %%`;a=a.replace(C,u+c+b)}else a=a.replace(C,`![[${s}]]`)}catch{a=a.replace(C,`![[${s}]]`)}finally{r.delete(s)}}}return a}async function d(E){let D=/\[\[([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,a=E.split(`
`),x=!1,C=-1,s=[];for(let i=0;i<a.length;i++)/^(```|~~~)/.test(a[i].trim())&&(x?(x=!1,s.push({start:C,end:i})):(x=!0,C=i));let p=[];for(let i=0;i<a.length;i++){let c=a[i],m,u=!1;for(let b of s)if(i>=b.start&&i<=b.end){u=!0;break}if(u){p.push(c);continue}for(;(m=D.exec(c))!==null;){let b=m[0],l=m[1].trim(),$=m[2],A=m[3],S=m[4],v=m[5],h=m[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(l))continue;let G=y[l.toLowerCase()];if(G){if(!$&&!S){let k=`^${l.replace(/_/g,"-")}`,L=h||l;c=c.replace(b,`[[#${k}|${L}]]`);continue}if($&&A){let k=A.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(G.sections.includes(k)){let L=h||A;c=c.replace(b,`[[#${k}|${L}]]`);continue}}if(S&&v){let k="^"+v.replace(/_/g,"-");if(G.blocks.includes(v.replace(/_/g,"-"))){let L=h||v;c=c.replace(b,`[[#${k}|${L}]]`);continue}}}if(n.useHiddenEmbeds&&!o.has(l.toLowerCase())&&!f.has(l.toLowerCase()))try{let k=e.metadataCache.getFirstLinkpathDest(l,"");if(k){let L=await e.vault.read(k);(!L||L.trim()==="")&&(L=`<!-- Contenu vide ou non trouv\xE9 pour '${l}' -->`);let z=`%%
%% EMBED HIDDEN START: [[${l}]] %%
${L}
%% EMBED HIDDEN END %%
%%`;p.push(z),f.add(l.toLowerCase())}}catch{}let R=e.metadataCache.getFirstLinkpathDest(l,"");if(R&&!R.path.startsWith("http")&&!R.path.startsWith("/")){let k=h||l;c=c.replace(b,`[[${l}|${k}]]`)}else{let k=h||l;c=c.replace(b,`[[${l}|${k}]]`)}}D.lastIndex=0,p.push(c)}return p.join(`
`)}async function g(E){let D=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,a=E,x;for(;(x=D.exec(E))!==null;){let C=x[0],s=x[1].trim(),p=x[2],i=x[3],c=x[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(s)&&(s=s.replace(/\.md$/i,""));try{let u=e.metadataCache.getFirstLinkpathDest(s,"");if(u){let l=`![[${u.path.replace(/\\/g,"/")}`;p&&i&&(l+=`#${i}`),c&&(l+=`|${c}`),l+="]]",a=a.replace(C,l)}else a=a.replace(C,`![[${s}]]`)}catch{}}return a}function w(E){return E}async function N(E,D){let a=E;return a=await _(a),a=await d(a),a=await g(a),a=a,a}function F(E){return E.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(D,a,x,C)=>o.has(a.toLowerCase())?C?`[[#^${x}|${C}]]`:`[[#^${x}]]`:D)}let O=await e.vault.read(t),j=await N(O,t.parent?.path||"");return j=F(j),j}var ht=class extends H.Plugin{settings=St;view;async onload(){await this.loadSettings(),this.addSettingTab(new Lt(this.app,this)),this.addRibbonIcon("dice","Combine Notes",()=>{this.activateView()}),this.addCommand({id:"open-combiner-view",name:"Open Combiner",callback:()=>{this.activateView()}}),this.addCommand({id:"combine-active-note-to-file",name:"Combiner la note active (fichier)",callback:async()=>{let t=this.app.workspace.getActiveFile();if(!t){new H.Notice("Aucun fichier actif.");return}let n=await Ut(this.app,t,this.settings),r=t.parent,o=t.basename+"-combined.md";await this.app.vault.create(r?r.path+"/"+o:o,n),new H.Notice("Fichier combin\xE9 cr\xE9\xE9 : "+o)}})}async onunload(){this.view}activateView(){let t=this.app.workspace.getRightLeaf(!1);t&&t.view.containerEl.children[1]&&(this.view=new zt({target:t.view.containerEl.children[1],props:{app:this.app,settings:this.settings}}),this.app.workspace.revealLeaf(t))}async loadSettings(){this.settings=Object.assign({},St,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},Lt=class extends H.PluginSettingTab{plugin;constructor(t,n){super(t,n),this.plugin=n}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Settings for Combiner Plugin."}),new H.Setting(t).setName("Use Hidden Embeds").setDesc("If enabled, internal links to notes not already embedded will be added as hidden comment blocks.").addToggle(n=>n.setValue(this.plugin.settings.useHiddenEmbeds).onChange(async r=>{this.plugin.settings.useHiddenEmbeds=r,await this.plugin.saveSettings()}))}};

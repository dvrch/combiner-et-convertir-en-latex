/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var we=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var rt=Object.getOwnPropertyNames;var lt=Object.prototype.hasOwnProperty;var ct=(t,e)=>{for(var n in e)we(t,n,{get:e[n],enumerable:!0})},at=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rt(e))!lt.call(t,s)&&s!==n&&we(t,s,{get:()=>e[s],enumerable:!(i=ot(e,s))||i.enumerable});return t};var ut=t=>at(we({},"__esModule",{value:!0}),t);var Bt={};ct(Bt,{default:()=>be});module.exports=ut(Bt);var it=require("obsidian");function H(){}function Ee(t){return t()}function Ne(){return Object.create(null)}function G(t){t.forEach(Ee)}function me(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function je(t){return Object.keys(t).length===0}var Pe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Fe=class t{constructor(e){this.options=e,this._listeners="WeakMap"in Pe?new WeakMap:void 0}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(n=>{var i;for(let s of n)t.entries.set(s.target,s),(i=this._listeners.get(s.target))===null||i===void 0||i(s)})}};Fe.entries="WeakMap"in Pe?new WeakMap:void 0;var Ie=!1;function ft(){Ie=!0}function dt(){Ie=!1}function l(t,e){t.appendChild(e)}function le(t,e,n){let i=ht(t);if(!i.getElementById(e)){let s=w("style");s.id=e,s.textContent=n,mt(i,s)}}function ht(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function mt(t,e){return l(t.head||t,e),e.sheet}function R(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function _e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function D(){return q(" ")}function O(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Be(t){return function(e){return e.preventDefault(),t.call(this,e)}}function T(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function pt(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.data!==e&&(t.data=e)}function fe(t,e){t.value=e??""}function U(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}var Se;function ue(t){Se=t}function Re(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}var oe=[];var pe=[],re=[],Oe=[],_t=Promise.resolve(),xe=!1;function gt(){xe||(xe=!0,_t.then(qe))}function Ce(t){re.push(t)}var ke=new Set,se=0;function qe(){if(se!==0)return;let t=Se;do{try{for(;se<oe.length;){let e=oe[se];se++,ue(e),bt(e.$$)}}catch(e){throw oe.length=0,se=0,e}for(ue(null),oe.length=0,se=0;pe.length;)pe.pop()();for(let e=0;e<re.length;e+=1){let n=re[e];ke.has(n)||(ke.add(n),n())}re.length=0}while(oe.length);for(;Oe.length;)Oe.pop()();xe=!1,ke.clear(),ue(t)}function bt(t){if(t.fragment!==null){t.update(),G(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ce)}}function vt(t){let e=[],n=[];re.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),re=e}var he=new Set,ie;function We(){ie={r:0,c:[],p:ie}}function ze(){ie.r||G(ie.c),ie=ie.p}function ee(t,e){t&&t.i&&(he.delete(t),t.i(e))}function ce(t,e,n,i){if(t&&t.o){if(he.has(t))return;he.add(t),ie.c.push(()=>{he.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}var yt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],qt=new Set([...yt]);function ge(t){t&&t.c()}function de(t,e,n,i){let{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),i||Ce(()=>{let o=t.$$.on_mount.map(Ee).filter(me);t.$$.on_destroy?t.$$.on_destroy.push(...o):G(o),t.$$.on_mount=[]}),r.forEach(Ce)}function ae(t,e){let n=t.$$;n.fragment!==null&&(vt(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wt(t,e){t.$$.dirty[0]===-1&&(oe.push(t),gt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function te(t,e,n,i,s,r,o,p=[-1]){let _=Se;ue(t);let a=t.$$={fragment:null,ctx:[],props:r,update:H,not_equal:s,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(_?_.$$.context:[])),callbacks:Ne(),dirty:p,skip_bound:!1,root:e.target||_.$$.root};o&&o(a.root);let F=!1;if(a.ctx=n?n(t,e.props||{},(b,M,...v)=>{let E=v.length?v[0]:M;return a.ctx&&s(a.ctx[b],a.ctx[b]=E)&&(!a.skip_bound&&a.bound[b]&&a.bound[b](E),F&&wt(t,b)),M}):[],a.update(),F=!0,G(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){ft();let b=pt(e.target);a.fragment&&a.fragment.l(b),b.forEach(P)}else a.fragment&&a.fragment.c();e.intro&&ee(t.$$.fragment),de(t,e.target,e.anchor,e.customElement),dt(),qe()}ue(_)}var kt;typeof HTMLElement=="function"&&(kt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Ee).filter(me);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){G(this.$$.on_disconnect)}$destroy(){ae(this,1),this.$destroy=H}$on(t,e){if(!me(e))return H;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var J=class{$destroy(){ae(this,1),this.$destroy=H}$on(e,n){if(!me(n))return H;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{let s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!je(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function Ft(t){let e=[],n=0;return{text:t.replace(/\$\$([\s\S]*?)\$\$/g,(s,r)=>{let o=`__MATH_BLOCK_${n}__`;return e[n]=s,n++,o}),mathBlocks:e}}function xt(t,e){let n=t;return e.forEach((i,s)=>{n=n.replace(`__MATH_BLOCK_${s}__`,i)}),n}function Ct(t,e,n){let{app:i}=e,{basePath:s=""}=e,{settings:r={}}=e,{config:o=null}=e,{combinedFileName:p=""}=e,_=new Set,a="",F=new Set,b={},M=new Set;function v(C,m){let k=[],u=[],f=m.split(`
`);for(let d of f){let $=d.match(/^(#+)\s*(.*)$/);if($){let S=$[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();k.push(S)}let c=d.match(/\^([\w-]+)$/);c&&u.push(c[1])}b[C.toLowerCase()]={file:C,sections:k,blocks:u}}async function E(C){let m=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=C,u;for(;(u=m.exec(C))!==null;){let f=u[0],d=u[1].trim(),$=u[2],c=u[3],S=u[4],g=u[5];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(d)){let N=`%% EMBED IMAGE: ${d} %%
`;k=k.replace(f,N+f);continue}if(!_.has(d)){_.add(d),F.add(d.toLowerCase());try{let N=i.metadataCache.getFirstLinkpathDest(d,"");if(N){let h=await i.vault.read(N);(!h||h.trim()==="")&&(h=`<!-- Contenu vide ou non trouv\xE9 pour '${d}' -->`);let x=h;v(d,x),x=await L(x,N.parent?.path||"");let W=`^${d.replace(/_/g,"-")}`,X=`%% EMBED START: [${d}] %% ${W}
`,K=`
%% EMBED END: ${d} %%`;k=k.replace(f,`
${X}${x}${K}`)}else k=k.replace(f,`![[${d}]]`)}catch{k=k.replace(f,`![[${d}]]`)}finally{_.delete(d)}}}return k}async function I(C){let m=/\[\[(?!\#)([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=C.split(`
`),u=!1,f=-1,d=[];for(let c=0;c<k.length;c++)/^(```|~~~)/.test(k[c].trim())&&(u?(u=!1,d.push({start:f,end:c})):(u=!0,f=c));let $=[];for(let c=0;c<k.length;c++){let S=k[c],g,N=!1;for(let h of d)if(c>=h.start&&c<=h.end){N=!0;break}if(N){$.push(S);continue}for(;(g=m.exec(S))!==null;){let h=g[0],x=g[1].trim(),W=g[2],X=g[3],K=g[4],Y=g[5],ne=g[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(x))continue;let ve=b[x.toLowerCase()];if(ve){if(!W&&!K){let B=`^${x.replace(/_/g,"-")}`,V=ne||x;S=S.replace(h,`[[#${B}|${V}]]`);continue}if(W&&X){let B=X.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(ve.sections.includes(B)){let V=ne||X;S=S.replace(h,`[[#${B}|${V}]]`);continue}}if(K&&Y){let B="^"+Y.replace(/_/g,"-");if(ve.blocks.includes(Y.replace(/_/g,"-"))){let V=ne||Y;S=S.replace(h,`[[#${B}|${V}]]`);continue}}}if(r.useHiddenEmbeds&&!F.has(x.toLowerCase())&&!M.has(x.toLowerCase()))try{let B=i.metadataCache.getFirstLinkpathDest(x,"");if(B){let V=await i.vault.read(B);(!V||V.trim()==="")&&(V=`<!-- Contenu vide ou non trouv\xE9 pour '${x}' -->`);let st=`%%EMBED HIDDEN START: [[${x}]] 
${V}
EMBED HIDDEN END %%`;$.push(st),M.add(x.toLowerCase())}}catch{}let ye=i.metadataCache.getFirstLinkpathDest(x,"");if(ye&&!ye.path.startsWith("http")&&!ye.path.startsWith("/")){let B=ne||x;S=S.replace(h,`[[${x}|${B}]]`)}else{let B=ne||x;S=S.replace(h,`[[${x}|${B}]]`)}}m.lastIndex=0,$.push(S)}return $.join(`
`)}async function A(C){let m=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=C,u;for(;(u=m.exec(C))!==null;){let f=u[0],d=u[1].trim(),$=u[2],c=u[3],S=u[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(d)&&(d=d.replace(/\.md$/i,""));try{let N=i.metadataCache.getFirstLinkpathDest(d,"");if(N){let x=`![[${N.path.replace(/\\/g,"/")}`;$&&c&&(x+=`#${c}`),S&&(x+=`|${S}`),x+="]]",k=k.replace(f,x)}else k=k.replace(f,`![[${d}]]`)}catch{k=k.replace(f,`![[${d}]]`)}}return k}async function L(C,m){let{text:k,mathBlocks:u}=Ft(C),f=k;return f=await E(f),f=await I(f),f=await A(f),f=f,xt(f,u)}function y(C){return C.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(m,k,u,f)=>F.has(k.toLowerCase())?f?`[[#^${u}|${f}]]`:`[[#^${u}]]`:m)}async function j(C){a="Traitement des liens...",_.clear(),F.clear(),M.clear(),b={};try{let m=await L(C,s);return m=y(m),a="Traitement termin\xE9",m}catch(m){throw a="Erreur lors du traitement",m}}function z(){_.clear(),a="",F.clear(),M.clear(),b={}}return t.$$set=C=>{"app"in C&&n(0,i=C.app),"basePath"in C&&n(1,s=C.basePath),"settings"in C&&n(2,r=C.settings),"config"in C&&n(3,o=C.config),"combinedFileName"in C&&n(4,p=C.combinedFileName)},[i,s,r,o,p,j,z]}var $e=class extends J{constructor(e){super(),te(this,e,Ct,null,Z,{app:0,basePath:1,settings:2,config:3,combinedFileName:4,processMarkdown:5,resetState:6})}get processMarkdown(){return this.$$.ctx[5]}get resetState(){return this.$$.ctx[6]}},He=$e;function Et(t){le(t,"svelte-1mnh07d",".split-view.svelte-1mnh07d{display:flex;width:100%;height:100%}.pane.svelte-1mnh07d{flex:1;padding:1rem;overflow:auto;border-right:1px solid #ddd}.pane.svelte-1mnh07d:last-child{border-right:none}.pane-title.svelte-1mnh07d{font-weight:bold;margin-bottom:0.5rem}")}function St(t){let e,n,i,s,r,o,p,_,a,F,b,M;return{c(){e=w("div"),n=w("div"),i=w("div"),i.textContent="Original",s=D(),r=w("pre"),o=q(t[0]),p=D(),_=w("div"),a=w("div"),a.textContent="Combin\xE9",F=D(),b=w("pre"),M=q(t[1]),T(i,"class","pane-title svelte-1mnh07d"),T(n,"class","pane svelte-1mnh07d"),T(a,"class","pane-title svelte-1mnh07d"),T(_,"class","pane svelte-1mnh07d"),T(e,"class","split-view svelte-1mnh07d")},m(v,E){R(v,e,E),l(e,n),l(n,i),l(n,s),l(n,r),l(r,o),l(e,p),l(e,_),l(_,a),l(_,F),l(_,b),l(b,M)},p(v,[E]){E&1&&Q(o,v[0]),E&2&&Q(M,v[1])},i:H,o:H,d(v){v&&P(e)}}}function $t(t,e,n){let{original:i=""}=e,{combined:s=""}=e;return t.$$set=r=>{"original"in r&&n(0,i=r.original),"combined"in r&&n(1,s=r.combined)},[i,s]}var Me=class extends J{constructor(e){super(),te(this,e,$t,St,Z,{original:0,combined:1},Et)}},Ge=Me;function Mt(t){le(t,"svelte-19bpims",".manual-ui.svelte-19bpims.svelte-19bpims{border:1px solid #ccc;border-radius:8px;padding:1rem;margin-bottom:1rem;background:var(--background-secondary);max-width:600px;width:100%}.file-list.svelte-19bpims.svelte-19bpims{display:flex;flex-direction:column;gap:0.5rem;margin-bottom:1rem}.file-item.svelte-19bpims.svelte-19bpims{display:flex;align-items:center;background:var(--background-primary);border:1px solid #ddd;border-radius:4px;padding:0.5rem;cursor:grab;user-select:none}.file-item.dragging.svelte-19bpims.svelte-19bpims{opacity:0.5}.file-item.svelte-19bpims .remove.svelte-19bpims{margin-left:auto;color:#c00;cursor:pointer}.drag-area.svelte-19bpims.svelte-19bpims{border:2px dashed #888;border-radius:6px;padding:1rem;text-align:center;margin-bottom:1rem;background:#f8f8f8}.name-field.svelte-19bpims.svelte-19bpims{margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}.preview-modal.svelte-19bpims.svelte-19bpims{position:fixed;top:10%;left:50%;transform:translateX(-50%);background:#222;color:#fff;border-radius:8px;padding:2rem;z-index:10000;max-width:80vw;max-height:80vh;overflow:auto;box-shadow:0 4px 24px rgba(0,0,0,0.3)}@media(max-width: 700px){.manual-ui.svelte-19bpims.svelte-19bpims{max-width:98vw;padding:0.5rem}.preview-modal.svelte-19bpims.svelte-19bpims{max-width:98vw;padding:1rem}}.search-field.svelte-19bpims.svelte-19bpims{margin-bottom:1rem}.search-results.svelte-19bpims.svelte-19bpims{background:#fff;border:1px solid #ccc;border-radius:4px;max-height:120px;overflow-y:auto}.search-results.svelte-19bpims div.svelte-19bpims{padding:0.3rem 0.7rem;cursor:pointer}.search-results.svelte-19bpims div.svelte-19bpims:hover{background:#eee}")}function Ue(t,e,n){let i=t.slice();return i[29]=e[n],i[31]=n,i}function Xe(t,e,n){let i=t.slice();return i[32]=e[n],i[31]=n,i}function Ke(t,e,n){let i=t.slice();return i[34]=e[n],i}function Ye(t){let e,n=t[4],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ve(Ke(t,n,s));return{c(){e=w("div");for(let s=0;s<i.length;s+=1)i[s].c();T(e,"class","search-results svelte-19bpims")},m(s,r){R(s,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,r){if(r[0]&131088){n=s[4];let o;for(o=0;o<n.length;o+=1){let p=Ke(s,n,o);i[o]?i[o].p(p,r):(i[o]=Ve(p),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(s){s&&P(e),_e(i,s)}}}function Ve(t){let e,n=t[34].name+"",i,s,r;function o(){return t[21](t[34])}return{c(){e=w("div"),i=q(n),T(e,"class","svelte-19bpims")},m(p,_){R(p,e,_),l(e,i),s||(r=O(e,"click",o),s=!0)},p(p,_){t=p,_[0]&16&&n!==(n=t[34].name+"")&&Q(i,n)},d(p){p&&P(e),s=!1,r()}}}function Dt(t){let e,n,i;function s(){return t[23](t[31])}return{c(){e=w("button"),e.textContent="\u2191"},m(r,o){R(r,e,o),n||(i=O(e,"click",s),n=!0)},p(r,o){t=r},d(r){r&&P(e),n=!1,i()}}}function At(t){let e,n,i;function s(){return t[24](t[31])}return{c(){e=w("button"),e.textContent="\u2193"},m(r,o){R(r,e,o),n||(i=O(e,"click",s),n=!0)},p(r,o){t=r},d(r){r&&P(e),n=!1,i()}}}function Je(t){let e,n,i=t[32].name+"",s,r,o,p,_,a,F,b;function M(){return t[22](t[31])}let v=t[31]>0&&Dt(t),E=t[31]<t[6].length-1&&At(t);function I(){return t[25](t[31])}function A(){return t[26](t[31])}return{c(){e=w("div"),n=w("span"),s=q(i),r=D(),o=w("span"),o.textContent="\u2716",p=D(),v&&v.c(),_=D(),E&&E.c(),T(o,"class","remove svelte-19bpims"),T(e,"class",a="file-item "+(t[5]===t[31]?"dragging":"")+" svelte-19bpims"),T(e,"draggable","true")},m(L,y){R(L,e,y),l(e,n),l(n,s),l(e,r),l(e,o),l(e,p),v&&v.m(e,null),l(e,_),E&&E.m(e,null),F||(b=[O(o,"click",M),O(e,"dragstart",I),O(e,"dragend",t[12]),O(e,"drop",A),O(e,"dragover",Be(t[19]))],F=!0)},p(L,y){t=L,t[31]>0&&v.p(t,y),t[31]<t[6].length-1&&E.p(t,y),y[0]&32&&a!==(a="file-item "+(t[5]===t[31]?"dragging":"")+" svelte-19bpims")&&T(e,"class",a)},d(L){L&&P(e),v&&v.d(),E&&E.d(),F=!1,G(b)}}}function Qe(t){let e,n,i=t[29]+"",s,r,o,p,_,a,F;function b(){return t[27](t[31])}return{c(){e=w("div"),n=w("span"),s=q(i),r=q(" (externe)"),o=D(),p=w("span"),p.textContent="\u2716",_=D(),T(p,"class","remove svelte-19bpims"),T(e,"class","file-item svelte-19bpims")},m(M,v){R(M,e,v),l(e,n),l(n,s),l(n,r),l(e,o),l(e,p),l(e,_),a||(F=O(p,"click",b),a=!0)},p(M,v){t=M},d(M){M&&P(e),a=!1,F()}}}function Ze(t){let e,n,i,s,r,o,p;return{c(){e=w("div"),n=w("button"),n.textContent="\u2716",i=D(),s=w("pre"),r=q(t[1]),U(n,"position","absolute"),U(n,"top","1rem"),U(n,"right","1rem"),T(e,"class","preview-modal svelte-19bpims")},m(_,a){R(_,e,a),l(e,n),l(e,i),l(e,s),l(s,r),o||(p=O(n,"click",t[15]),o=!0)},p(_,a){a[0]&2&&Q(r,_[1])},d(_){_&&P(e),o=!1,p()}}}function Tt(t){let e,n,i,s,r,o,p,_,a,F,b,M,v,E,I,A,L,y,j,z,C,m=t[4].length>0&&Ye(t),k=t[6],u=[];for(let c=0;c<k.length;c+=1)u[c]=Je(Xe(t,k,c));let f=t[7],d=[];for(let c=0;c<f.length;c+=1)d[c]=Qe(Ue(t,f,c));let $=t[2]&&Ze(t);return{c(){e=w("div"),n=w("h2"),n.textContent="Combinaison manuelle",i=D(),s=w("div"),s.textContent="Glisser-d\xE9poser des fichiers markdown ici (depuis Obsidian ou l'ext\xE9rieur)",r=D(),o=w("div"),p=w("input"),_=D(),m&&m.c(),a=D(),F=w("div");for(let c=0;c<u.length;c+=1)u[c].c();b=D();for(let c=0;c<d.length;c+=1)d[c].c();M=D(),v=w("div"),E=w("label"),E.textContent="Nom du fichier combin\xE9 :",I=D(),A=w("input"),L=D(),y=w("button"),y.textContent="Aper\xE7u",j=D(),$&&$.c(),T(s,"class","drag-area svelte-19bpims"),T(p,"type","text"),T(p,"placeholder","Rechercher un fichier dans le vault..."),T(o,"class","search-field svelte-19bpims"),T(F,"class","file-list svelte-19bpims"),T(A,"type","text"),U(A,"flex","1"),T(v,"class","name-field svelte-19bpims"),T(e,"class","manual-ui svelte-19bpims")},m(c,S){R(c,e,S),l(e,n),l(e,i),l(e,s),l(e,r),l(e,o),l(o,p),fe(p,t[3]),l(o,_),m&&m.m(o,null),l(e,a),l(e,F);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(F,null);l(F,b);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(F,null);l(e,M),l(e,v),l(v,E),l(v,I),l(v,A),fe(A,t[0]),l(e,L),l(e,y),l(e,j),$&&$.m(e,null),z||(C=[O(s,"drop",t[8]),O(s,"dragover",Lt),O(p,"input",t[20]),O(p,"input",t[16]),O(A,"input",t[28]),O(y,"click",t[14])],z=!0)},p(c,S){if(S[0]&8&&p.value!==c[3]&&fe(p,c[3]),c[4].length>0?m?m.p(c,S):(m=Ye(c),m.c(),m.m(o,null)):m&&(m.d(1),m=null),S[0]&15968){k=c[6];let g;for(g=0;g<k.length;g+=1){let N=Xe(c,k,g);u[g]?u[g].p(N,S):(u[g]=Je(N),u[g].c(),u[g].m(F,b))}for(;g<u.length;g+=1)u[g].d(1);u.length=k.length}if(S[0]&128){f=c[7];let g;for(g=0;g<f.length;g+=1){let N=Ue(c,f,g);d[g]?d[g].p(N,S):(d[g]=Qe(N),d[g].c(),d[g].m(F,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=f.length}S[0]&1&&A.value!==c[0]&&fe(A,c[0]),c[2]?$?$.p(c,S):($=Ze(c),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i:H,o:H,d(c){c&&P(e),m&&m.d(),_e(u,c),_e(d,c),$&&$.d(),z=!1,G(C)}}}function Lt(t){t.preventDefault()}function Nt(t,e,n){let{app:i}=e,s=[],r=[],o="notes-combinees.md",p="",_=!1,a="",F=[],b=null;function M(h){h.preventDefault();let x=h.dataTransfer?.items;if(x)for(let W=0;W<x.length;W++){let X=x[W];if(X.kind==="file"){let K=X.getAsFile();K&&K.name.endsWith(".md")&&r.push(K.name)}else X.kind==="string"&&X.getAsString(async K=>{let Y=i.vault.getAbstractFileByPath(K);Y&&"extension"in Y&&Y.extension==="md"&&(s.find(ne=>ne.path===Y.path)||s.push(Y))})}}function v(h,x){if(h===x)return;let W=s.splice(h,1)[0];s.splice(x,0,W)}function E(h){s.splice(h,1)}function I(h){n(5,b=h)}function A(){n(5,b=null)}function L(h){b!==null&&b!==h&&(v(b,h),n(5,b=null))}async function y(){n(1,p="");for(let h of s){let x=await i.vault.read(h);n(1,p+=`
---
# ${h.name}
`+x)}n(2,_=!0)}function j(){n(2,_=!1)}function z(){if(!a.trim()){n(4,F=[]);return}let h=i.vault.getMarkdownFiles();n(4,F=h.filter(x=>x.name.toLowerCase().includes(a.trim().toLowerCase())&&!s.find(W=>W.path===x.path)))}function C(h){s.push(h),n(3,a=""),n(4,F=[])}function m(h){Re.call(this,t,h)}function k(){a=this.value,n(3,a)}let u=h=>C(h),f=h=>E(h),d=h=>v(h,h-1),$=h=>v(h,h+1),c=h=>I(h),S=h=>L(h),g=h=>r.splice(h,1);function N(){o=this.value,n(0,o)}return t.$$set=h=>{"app"in h&&n(18,i=h.app)},[o,p,_,a,F,b,s,r,M,v,E,I,A,L,y,j,z,C,i,m,k,u,f,d,$,c,S,g,N]}var De=class extends J{constructor(e){super(),te(this,e,Nt,Tt,Z,{app:18},Mt,[-1,-1])}},et=De;function Ot(t){le(t,"svelte-v99t9y",".combiner-app.svelte-v99t9y{padding:1rem}")}function tt(t){let e,n;return e=new et({props:{app:t[2]}}),{c(){ge(e.$$.fragment)},m(i,s){de(e,i,s),n=!0},p(i,s){let r={};s&4&&(r.app=i[2]),e.$set(r)},i(i){n||(ee(e.$$.fragment,i),n=!0)},o(i){ce(e.$$.fragment,i),n=!1},d(i){ae(e,i)}}}function nt(t){let e,n;return{c(){e=w("span"),n=q(t[5])},m(i,s){R(i,e,s),l(e,n)},p(i,s){s&32&&Q(n,i[5])},d(i){i&&P(e)}}}function jt(t){let e,n,i,s,r=t[6]?"Fermer la combinaison manuelle":"Combinaison manuelle avanc\xE9e",o,p,_,a,F,b,M,v,E,I,A,L,y,j,z,C,m=t[6]&&tt(t),k={app:t[2],settings:t[3],basePath:"",config:null,combinedFileName:""};a=new He({props:k}),t[14](a),E=new Ge({props:{original:t[0],combined:t[1]}});let u=t[5]&&nt(t);return{c(){e=w("div"),n=w("h1"),n.textContent="Markdown Combiner",i=D(),s=w("button"),o=q(r),p=D(),m&&m.c(),_=D(),ge(a.$$.fragment),F=D(),b=w("button"),b.textContent="Combine Active Note",M=D(),v=w("div"),ge(E.$$.fragment),I=D(),A=w("div"),L=w("button"),L.textContent="\u{1F4BE} Sauvegarder le combin\xE9",y=D(),u&&u.c(),U(s,"margin-bottom","1rem"),U(A,"margin-top","1rem"),U(A,"display","flex"),U(A,"align-items","center"),U(A,"gap","1rem"),T(e,"class","combiner-app svelte-v99t9y")},m(f,d){R(f,e,d),l(e,n),l(e,i),l(e,s),l(s,o),l(e,p),m&&m.m(e,null),l(e,_),de(a,e,null),l(e,F),l(e,b),l(e,M),l(e,v),de(E,v,null),l(v,I),l(v,A),l(A,L),l(A,y),u&&u.m(A,null),j=!0,z||(C=[O(s,"click",t[13]),O(b,"click",t[7]),O(L,"click",t[8])],z=!0)},p(f,[d]){(!j||d&64)&&r!==(r=f[6]?"Fermer la combinaison manuelle":"Combinaison manuelle avanc\xE9e")&&Q(o,r),f[6]?m?(m.p(f,d),d&64&&ee(m,1)):(m=tt(f),m.c(),ee(m,1),m.m(e,_)):m&&(We(),ce(m,1,1,()=>{m=null}),ze());let $={};d&4&&($.app=f[2]),d&8&&($.settings=f[3]),a.$set($);let c={};d&1&&(c.original=f[0]),d&2&&(c.combined=f[1]),E.$set(c),f[5]?u?u.p(f,d):(u=nt(f),u.c(),u.m(A,null)):u&&(u.d(1),u=null)},i(f){j||(ee(m),ee(a.$$.fragment,f),ee(E.$$.fragment,f),j=!0)},o(f){ce(m),ce(a.$$.fragment,f),ce(E.$$.fragment,f),j=!1},d(f){f&&P(e),m&&m.d(),t[14](null),ae(a),ae(E),u&&u.d(),z=!1,G(C)}}}async function Pt(t,e){let n=t,i=1;for(;await e(n);){let s=t.replace(/\.[^/.]+$/,""),r=t.match(/\.[^/.]+$/)?.[0]||"";n=`${s}_${i}${r}`,i++}return n}function It(t,e,n){let{app:i}=e,{plugin:s}=e,{isDebug:r=!1}=e,{settings:o={}}=e,{originalContent:p=""}=e,{combinedContent:_=""}=e,{defaultFileName:a="note-combinee.md"}=e,{checkFileExists:F=async()=>!1}=e,b,M="",v=!1;async function E(){if(b){let y=i.workspace.getActiveFile();if(y){let j=await i.vault.read(y);n(1,_=await b.processMarkdown(j)),n(0,p=j)}}}async function I(){let y=await Pt(a,F);n(5,M=`Fichier sauvegard\xE9 sous : ${y}`)}let A=()=>n(6,v=!v);function L(y){pe[y?"unshift":"push"](()=>{b=y,n(4,b)})}return t.$$set=y=>{"app"in y&&n(2,i=y.app),"plugin"in y&&n(9,s=y.plugin),"isDebug"in y&&n(10,r=y.isDebug),"settings"in y&&n(3,o=y.settings),"originalContent"in y&&n(0,p=y.originalContent),"combinedContent"in y&&n(1,_=y.combinedContent),"defaultFileName"in y&&n(11,a=y.defaultFileName),"checkFileExists"in y&&n(12,F=y.checkFileExists)},[p,_,i,o,b,M,v,E,I,s,r,a,F,A,L]}var Ae=class extends J{constructor(e){super(),te(this,e,It,jt,Z,{app:2,plugin:9,isDebug:10,settings:3,originalContent:0,combinedContent:1,defaultFileName:11,checkFileExists:12},Ot)}},Te=Ae;var be=class extends it.Plugin{async onload(){console.log("Loading Combiner Plugin"),this.addCommand({id:"combiner-notes",name:"Combiner les notes",callback:()=>{this.openCombinerModal()}}),this.addCommand({id:"combiner-debug",name:"Debug Combiner",callback:()=>{this.debugCombiner()}}),this.addRibbonIcon("link","Combiner les notes",e=>{this.openCombinerModal()})}onunload(){console.log("Unloading Combiner Plugin")}openCombinerModal(){new Le(this.app,this).open()}debugCombiner(){let e=document.createElement("div");e.id="combiner-debug-container",e.style.cssText=`
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 10000;
			background: white;
			border: 2px solid #ccc;
			border-radius: 8px;
			padding: 20px;
			max-width: 80vw;
			max-height: 80vh;
			overflow: auto;
		`,document.body.appendChild(e),new Te({target:e,props:{app:this.app,plugin:this,isDebug:!0}})}},Le=class{constructor(e,n){this.app=e,this.plugin=n,this.modal=null,this.component=null}open(){this.modal=new this.app.constructor.Modal(this.app),this.modal.containerEl.addClass("combiner-modal"),this.component=new Te({target:this.modal.contentEl,props:{app:this.app,plugin:this.plugin,isDebug:!1}}),this.modal.open()}};

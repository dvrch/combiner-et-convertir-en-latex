/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var K=Object.defineProperty;var Nt=Object.getOwnPropertyDescriptor;var Tt=Object.getOwnPropertyNames;var jt=Object.prototype.hasOwnProperty;var Lt=(t,e)=>{for(var o in e)K(t,o,{get:e[o],enumerable:!0})},Pt=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Tt(e))!jt.call(t,n)&&n!==o&&K(t,n,{get:()=>e[n],enumerable:!(r=Nt(e,n))||r.enumerable});return t};var Rt=t=>Pt(K({},"__esModule",{value:!0}),t);var ve={};Lt(ve,{default:()=>X});module.exports=Rt(ve);var Ot=require("obsidian");function w(){}function It(t,e){for(let o in e)t[o]=e[o];return t}function Y(t){return t()}function P(){return Object.create(null)}function m(t){t.forEach(Y)}function R(t){return typeof t=="function"}function I(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function lt(t){return Object.keys(t).length===0}function q(t,e,o,r){if(t){let n=ut(t,e,o,r);return t[0](n)}}function ut(t,e,o,r){return t[1]&&r?It(o.ctx.slice(),t[1](r(e))):o.ctx}function B(t,e,o,r){if(t[2]&&r){let n=t[2](r(o));if(e.dirty===void 0)return n;if(typeof n=="object"){let i=[],s=Math.max(e.dirty.length,n.length);for(let l=0;l<s;l+=1)i[l]=e.dirty[l]|n[l];return i}return e.dirty|n}return e.dirty}function z(t,e,o,r,n,i){if(n){let s=ut(e,o,r,i);t.p(s,n)}}function G(t){if(t.ctx.length>32){let e=[],o=t.ctx.length/32;for(let r=0;r<o;r++)e[r]=-1;return e}return-1}var Q=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var U=class t{_listeners="WeakMap"in Q?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,o){return this._listeners.set(e,o),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(let o of e)t.entries.set(o.target,o),this._listeners.get(o.target)?.(o)}))}};U.entries="WeakMap"in Q?new WeakMap:void 0;var at=!1;function ft(){at=!0}function pt(){at=!1}function dt(t,e){t.appendChild(e)}function W(t,e,o){let r=_t(t);if(!r.getElementById(e)){let n=v("style");n.id=e,n.textContent=o,zt(r,n)}}function _t(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function zt(t,e){return dt(t.head||t,e),e.sheet}function g(t,e,o){t.insertBefore(e,o||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function Gt(t){return document.createTextNode(t)}function ht(){return Gt("")}function F(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function mt(t){return Array.from(t.childNodes)}function xt(t){let e={};return t.childNodes.forEach(o=>{e[o.slot||"default"]=!0}),e}var O;function $(t){O=t}var k=[];var gt=[],A=[],yt=[],Xt=Promise.resolve(),tt=!1;function bt(){tt||(tt=!0,Xt.then(H))}function T(t){A.push(t)}var Z=new Set,M=0;function H(){if(M!==0)return;let t=O;do{try{for(;M<k.length;){let e=k[M];M++,$(e),Kt(e.$$)}}catch(e){throw k.length=0,M=0,e}for($(null),k.length=0,M=0;gt.length;)gt.pop()();for(let e=0;e<A.length;e+=1){let o=A[e];Z.has(o)||(Z.add(o),o())}A.length=0}while(k.length);for(;yt.length;)yt.pop()();tt=!1,Z.clear(),$(t)}function Kt(t){if(t.fragment!==null){t.update(),m(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}function wt(t){let e=[],o=[];A.forEach(r=>t.indexOf(r)===-1?e.push(r):o.push(r)),o.forEach(r=>r()),A=e}var V=new Set,E;function et(){E={r:0,c:[],p:E}}function nt(){E.r||m(E.c),E=E.p}function h(t,e){t&&t.i&&(V.delete(t),t.i(e))}function y(t,e,o,r){if(t&&t.o){if(V.has(t))return;V.add(t),E.c.push(()=>{V.delete(t),r&&(o&&t.d(1),r())}),t.o(e)}else r&&r()}var Yt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Qt=new Set([...Yt]);function ee(t,e,o){let{fragment:r,after_update:n}=t.$$;r&&r.m(e,o),T(()=>{let i=t.$$.on_mount.map(Y).filter(R);t.$$.on_destroy?t.$$.on_destroy.push(...i):m(i),t.$$.on_mount=[]}),n.forEach(T)}function ne(t,e){let o=t.$$;o.fragment!==null&&(wt(o.after_update),m(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function oe(t,e){t.$$.dirty[0]===-1&&(k.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,o,r,n,i,s=null,l=[-1]){let a=O;$(t);let c=t.$$={fragment:null,ctx:[],props:i,update:w,not_equal:n,bound:P(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:P(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let f=!1;if(c.ctx=o?o(t,e.props||{},(p,u,...C)=>{let d=C.length?C[0]:u;return c.ctx&&n(c.ctx[p],c.ctx[p]=d)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](d),f&&oe(t,p)),u}):[],c.update(),f=!0,m(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){ft();let p=mt(e.target);c.fragment&&c.fragment.l(p),p.forEach(x)}else c.fragment&&c.fragment.c();e.intro&&h(t.$$.fragment),ee(t,e.target,e.anchor),pt(),H()}$(a)}var re;typeof HTMLElement=="function"&&(re=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(t,e,o){super(),this.$$ctor=t,this.$$s=e,o&&this.attachShadow({mode:"open"})}addEventListener(t,e,o){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){let r=this.$$c.$on(t,e);this.$$l_u.set(e,r)}super.addEventListener(t,e,o)}removeEventListener(t,e,o){if(super.removeEventListener(t,e,o),this.$$c){let r=this.$$l_u.get(e);r&&(r(),this.$$l_u.delete(e))}if(this.$$l[t]){let r=this.$$l[t].indexOf(e);r>=0&&this.$$l[t].splice(r,1)}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(n){return()=>{let i;return{c:function(){i=v("slot"),n!=="default"&&F(i,"name",n)},m:function(a,c){g(a,i,c)},d:function(a){a&&x(i)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let e={},o=xt(this);for(let n of this.$$s)n in o&&(e[n]=[t(n)]);for(let n of this.attributes){let i=this.$$g_p(n.name);i in this.$$d||(this.$$d[i]=ot(i,n.value,this.$$p_d,"toProp"))}for(let n in this.$$p_d)!(n in this.$$d)&&this[n]!==void 0&&(this.$$d[n]=this[n],delete this[n]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});let r=()=>{this.$$r=!0;for(let n in this.$$p_d)if(this.$$d[n]=this.$$c.$$.ctx[this.$$c.$$.props[n]],this.$$p_d[n].reflect){let i=ot(n,this.$$d[n],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[n].attribute||n):this.setAttribute(this.$$p_d[n].attribute||n,i)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(let n in this.$$l)for(let i of this.$$l[n]){let s=this.$$c.$on(n,i);this.$$l_u.set(i,s)}this.$$l={}}}attributeChangedCallback(t,e,o){this.$$r||(t=this.$$g_p(t),this.$$d[t]=ot(t,o,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t)||t}});function ot(t,e,o,r){let n=o[t]?.type;if(e=n==="Boolean"&&typeof e!="boolean"?e!=null:e,!r||!o[t])return e;if(r==="toAttribute")switch(n){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(n){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var S=class{$$=void 0;$$set=void 0;$destroy(){ne(this,1),this.$destroy=w}$on(e,o){if(!R(o))return w;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(o),()=>{let n=r.indexOf(o);n!==-1&&r.splice(n,1)}}$set(e){this.$$set&&!lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vt);var D=require("obsidian");var Et=require("obsidian");function _e(t){W(t,"svelte-9ekks4",".markdown-processor.svelte-9ekks4{width:100%}")}var he=t=>({processedContent:t&1}),Ft=t=>({processedContent:t[0]});function kt(t){let e,o,r=t[6].default,n=q(r,t,t[5],Ft);return{c(){e=v("div"),n&&n.c(),F(e,"class","markdown-processor svelte-9ekks4")},m(i,s){g(i,e,s),n&&n.m(e,null),o=!0},p(i,s){n&&n.p&&(!o||s&33)&&z(n,r,i,i[5],o?B(r,i[5],s,he):G(i[5]),Ft)},i(i){o||(h(n,i),o=!0)},o(i){y(n,i),o=!1},d(i){i&&x(e),n&&n.d(i)}}}function me(t){let e,o,r=t[0]&&kt(t);return{c(){r&&r.c(),e=ht()},m(n,i){r&&r.m(n,i),g(n,e,i),o=!0},p(n,[i]){n[0]?r?(r.p(n,i),i&1&&h(r,1)):(r=kt(n),r.c(),h(r,1),r.m(e.parentNode,e)):r&&(et(),y(r,1,1,()=>{r=null}),nt())},i(n){o||(h(r),o=!0)},o(n){y(r),o=!1},d(n){n&&x(e),r&&r.d(n)}}}function xe(t,e){let o=t.split(`
`),r=new RegExp(`^#+\\s*${e}$`),n=!1,i=[],s=0;for(let l of o){let a=l.match(/^(#+)\s*(.*)$/);if(a){let c=a[1].length;r.test(l)?(n=!0,s=c,i.push(l)):n&&c<=s&&(n=!1)}n&&i.push(l)}return i.join(`
`)}function $e(t,e){let o=t.split(`
`),r=new RegExp(`\\s\\^${e}$`);for(let n=0;n<o.length;n++)if(r.test(o[n]))return o[n].replace(r,"").trim();return""}function ge(t,e,o){let{$$slots:r={},$$scope:n}=e,{app:i}=e,{content:s=""}=e,{processedContent:l=""}=e,a=new Set;async function c(u){let C=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,d=u,_;for(;(_=C.exec(u))!==null;){let j=_[0],b=_[1].trim(),Mt=_[2],st=_[3],At=_[4],ct=_[5];if(a.has(b)){console.warn(`Circular reference detected, skipping: ${b}`);continue}a.add(b);try{let L=i.metadataCache.getFirstLinkpathDest(b,"");if(L instanceof Et.TFile){let N=await i.vault.read(L);Mt&&st?N=xe(N,st):At&&ct&&(N=$e(N,ct));let Dt=await c(N);d=d.replace(j,Dt)}else d=d.replace(j,`<!-- Linked file not found: ${b} -->`)}catch(L){console.error(`Error processing link ${j}:`,L),d=d.replace(j,`<!-- Error: Could not process ${b} -->`)}finally{a.delete(b)}}return d}async function f(u){return a.clear(),await c(u)}async function p(u,C){let d=1,_=`${u}-combined.md`;for(;await i.vault.adapter.exists(`${C}/${_}`);)_=`${u}-combined-${d}.md`,d++;return _}return t.$$set=u=>{"app"in u&&o(1,i=u.app),"content"in u&&o(2,s=u.content),"processedContent"in u&&o(0,l=u.processedContent),"$$scope"in u&&o(5,n=u.$$scope)},[l,i,s,f,p,n,r]}var rt=class extends S{constructor(e){super(),J(this,e,ge,me,I,{app:1,content:2,processedContent:0,processMarkdown:3,getUniqueFileName:4},_e)}get processMarkdown(){return this.$$.ctx[3]}get getUniqueFileName(){return this.$$.ctx[4]}},St=rt;function ye(t){W(t,"svelte-x3lg6p",".plugin-main.svelte-x3lg6p{width:100%}")}function be(t){let e,o,r=t[4].default,n=q(r,t,t[3],null);return{c(){e=v("div"),n&&n.c(),F(e,"class","plugin-main svelte-x3lg6p")},m(i,s){g(i,e,s),n&&n.m(e,null),o=!0},p(i,[s]){n&&n.p&&(!o||s&8)&&z(n,r,i,i[3],o?B(r,i[3],s,null):G(i[3]),null)},i(i){o||(h(n,i),o=!0)},o(i){y(n,i),o=!1},d(i){i&&x(e),n&&n.d(i)}}}function we(t,e,o){let{$$slots:r={},$$scope:n}=e,{plugin:i}=e,s=null;async function l(){let f=i.app.workspace.getActiveFile();if(!f||!(f instanceof D.TFile)){new D.Notice("Aucun fichier Markdown actif \xE0 combiner.");return}if(f.extension!=="md"){new D.Notice("Le fichier actif n'est pas un fichier Markdown.");return}new D.Notice(`Combinaison de ${f.name}...`);let p=await i.app.vault.read(f);s?s.$set({content:p}):s=new St({target:document.body,props:{app:i.app,content:p}})}function a(){i.addCommand({id:"combine-markdown-files",name:"Combiner les fichiers Markdown avec les embeds",callback:l})}function c(){s&&(s.$destroy(),s=null)}return t.$$set=f=>{"plugin"in f&&o(0,i=f.plugin),"$$scope"in f&&o(3,n=f.$$scope)},[i,a,c,n,r]}var it=class extends S{constructor(e){super(),J(this,e,we,be,I,{plugin:0,initialize:1,cleanup:2},ye)}get initialize(){return this.$$.ctx[1]}get cleanup(){return this.$$.ctx[2]}},Ct=it;var X=class extends Ot.Plugin{main=null;async onload(){this.main=new Ct({target:document.body,props:{plugin:this}}),this.main.initialize()}onunload(){this.main&&(this.main.cleanup(),this.main.$destroy(),this.main=null)}};

/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Ve=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var Kt=Object.getOwnPropertyNames;var zt=Object.prototype.hasOwnProperty;var Vt=(e,n)=>()=>(e&&(n=e(e=0)),n);var Tn=(e,n)=>{for(var t in n)Ve(e,t,{get:n[t],enumerable:!0})},Qt=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of Kt(n))!zt.call(e,i)&&i!==t&&Ve(e,i,{get:()=>n[i],enumerable:!(r=Gt(n,i))||r.enumerable});return e};var Xt=e=>Qt(Ve({},"__esModule",{value:!0}),e);var Ut={};Tn(Ut,{combineMarkdownNote:()=>wn,getUniqueFileName:()=>An});async function wn(e,n,t){let r=new Set,i=new Set,l=new Set,o={};function c(p,A){let d=[],L=[],E=A.split(`
`);for(let h of E){let y=h.match(/^(#+)\s*(.*)$/);if(y){let b=y[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();d.push(b)}let _=h.match(/\^([\w-]+)$/);_&&L.push(_[1])}o[p.toLowerCase()]={file:p,sections:d,blocks:L}}async function s(p){let A=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,d=p,L;for(;(L=A.exec(p))!==null;){let E=L[0],h=L[1].trim();if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(h)){let y=`%% EMBED IMAGE: ${h} %%
`;d=d.replace(E,y+E);continue}if(!r.has(h)){r.add(h),i.add(h.toLowerCase());try{let y=e.metadataCache.getFirstLinkpathDest(h,"");if(y){let _=await e.vault.read(y);(!_||_.trim()==="")&&(_=`<!-- Contenu vide ou non trouv\xE9 pour '${h}' -->`),c(h,_);let b=await m(_,y.parent?.path||""),S=`^${h.replace(/_/g,"-")}`,C=`%% EMBED START: [${h}] %% ${S}
`,O=`
%% EMBED END: ${h} %%`;d=d.replace(E,C+b+O)}else d=d.replace(E,`![[${h}]]`)}catch{d=d.replace(E,`![[${h}]]`)}finally{r.delete(h)}}}return d}async function u(p){let A=/\[\[([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,d=p.split(`
`),L=!1,E=-1,h=[];for(let _=0;_<d.length;_++)/^(```|~~~)/.test(d[_].trim())&&(L?(L=!1,h.push({start:E,end:_})):(L=!0,E=_));let y=[];for(let _=0;_<d.length;_++){let b=d[_],S,C=!1;for(let O of h)if(_>=O.start&&_<=O.end){C=!0;break}if(C){y.push(b);continue}for(;(S=A.exec(b))!==null;){let O=S[0],F=S[1].trim(),I=S[2],U=S[3],j=S[4],M=S[5],k=S[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(F))continue;let ee=o[F.toLowerCase()];if(ee){if(!I&&!j){let D=`^${F.replace(/_/g,"-")}`,H=k||F;b=b.replace(O,`[[#${D}|${H}]]`);continue}if(I&&U){let D=U.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(ee.sections.includes(D)){let H=k||U;b=b.replace(O,`[[#${D}|${H}]]`);continue}}if(j&&M){let D="^"+M.replace(/_/g,"-");if(ee.blocks.includes(M.replace(/_/g,"-"))){let H=k||M;b=b.replace(O,`[[#${D}|${H}]]`);continue}}}if(t.useHiddenEmbeds&&!i.has(F.toLowerCase())&&!l.has(F.toLowerCase()))try{let D=e.metadataCache.getFirstLinkpathDest(F,"");if(D){let H=await e.vault.read(D);(!H||H.trim()==="")&&(H=`<!-- Contenu vide ou non trouv\xE9 pour '${F}' -->`);let ue=`%%EMBED HIDDEN START: [[${F}]] 
${H}
EMBED HIDDEN END %%`;y.push(ue),l.add(F.toLowerCase())}}catch{}let Q=e.metadataCache.getFirstLinkpathDest(F,"");if(Q&&!Q.path.startsWith("http")&&!Q.path.startsWith("/")){let D=k||F;b=b.replace(O,`[[${F}|${D}]]`)}else{let D=k||F;b=b.replace(O,`[[${F}|${D}]]`)}}A.lastIndex=0,y.push(b)}return y.join(`
`)}async function f(p){let A=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,d=p,L;for(;(L=A.exec(p))!==null;){let E=L[0],h=L[1].trim(),y=L[2],_=L[3],b=L[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(h)&&(h=h.replace(/\.md$/i,""));try{let C=e.metadataCache.getFirstLinkpathDest(h,"");if(C){let F=`![[${C.path.replace(/\\/g,"/")}`;y&&_&&(F+=`#${_}`),b&&(F+=`|${b}`),F+="]]",d=d.replace(E,F)}else d=d.replace(E,`![[${h}]]`)}catch{}}return d}function a(p){return p}async function m(p,A){let d=p;return d=await s(d),d=await u(d),d=await f(d),d=d,d}function g(p){return p.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(A,d,L,E)=>i.has(d.toLowerCase())?E?`[[#^${L}|${E}]]`:`[[#^${L}]]`:A)}let v=await e.vault.read(n),w=await m(v,n.parent?.path||"");return w=g(w),w}async function An(e,n){let t=e.lastIndexOf("."),r=t!==-1?e.slice(0,t):e,i=t!==-1?e.slice(t):"",l=e,o=1;for(;await n(l);)l=`${r} (${o})${i}`,o++;return l}var gl,We=Vt(()=>{"use strict";gl=require("obsidian")});var jo={};Tn(jo,{default:()=>Ge});module.exports=Xt(jo);var J=require("obsidian");function G(){}function en(e){return e()}function Ln(){return Object.create(null)}function te(e){e.forEach(en)}function Fe(e){return typeof e=="function"}function ie(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function In(e){return Object.keys(e).length===0}function Nn(e,...n){if(e==null)return G;let t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function me(e){let n;return Nn(e,t=>n=t)(),n}var Mn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Xe=class e{constructor(n){this.options=n,this._listeners="WeakMap"in Mn?new WeakMap:void 0}observe(n,t){return this._listeners.set(n,t),this._getObserver().observe(n,this.options),()=>{this._listeners.delete(n),this._observer.unobserve(n)}}_getObserver(){var n;return(n=this._observer)!==null&&n!==void 0?n:this._observer=new ResizeObserver(t=>{var r;for(let i of t)e.entries.set(i.target,i),(r=this._listeners.get(i.target))===null||r===void 0||r(i)})}};Xe.entries="WeakMap"in Mn?new WeakMap:void 0;var Dn=!1;function Zt(){Dn=!0}function Jt(){Dn=!1}function T(e,n){e.appendChild(n)}function De(e,n,t){let r=ei(e);if(!r.getElementById(n)){let i=R("style");i.id=n,i.textContent=t,ni(r,i)}}function ei(e){if(!e)return document;let n=e.getRootNode?e.getRootNode():e.ownerDocument;return n&&n.host?n:e.ownerDocument}function ni(e,n){return T(e.head||e,n),n.sheet}function Ce(e,n,t){e.insertBefore(n,t||null)}function ge(e){e.parentNode&&e.parentNode.removeChild(e)}function R(e){return document.createElement(e)}function X(e){return document.createTextNode(e)}function z(){return X(" ")}function nn(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function re(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function ti(e){return Array.from(e.childNodes)}function oe(e,n){n=""+n,e.data!==n&&(e.data=n)}function Ee(e,n,t,r){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,r?"important":"")}var tn;function Ae(e){tn=e}var pe=[];var Me=[],he=[],On=[],ii=Promise.resolve(),Ze=!1;function ri(){Ze||(Ze=!0,ii.then($n))}function Je(e){he.push(e)}var Qe=new Set,de=0;function $n(){if(de!==0)return;let e=tn;do{try{for(;de<pe.length;){let n=pe[de];de++,Ae(n),oi(n.$$)}}catch(n){throw pe.length=0,de=0,n}for(Ae(null),pe.length=0,de=0;Me.length;)Me.pop()();for(let n=0;n<he.length;n+=1){let t=he[n];Qe.has(t)||(Qe.add(t),t())}he.length=0}while(pe.length);for(;On.length;)On.pop()();Ze=!1,Qe.clear(),Ae(e)}function oi(e){if(e.fragment!==null){e.update(),te(e.before_update);let n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(Je)}}function li(e){let n=[],t=[];he.forEach(r=>e.indexOf(r)===-1?n.push(r):t.push(r)),t.forEach(r=>r()),he=n}var Ne=new Set,ci;function $e(e,n){e&&e.i&&(Ne.delete(e),e.i(n))}function rn(e,n,t,r){if(e&&e.o){if(Ne.has(e))return;Ne.add(e),ci.c.push(()=>{Ne.delete(e),r&&(t&&e.d(1),r())}),e.o(n)}else r&&r()}var si=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Ho=new Set([...si]);function on(e){e&&e.c()}function Re(e,n,t,r){let{fragment:i,after_update:l}=e.$$;i&&i.m(n,t),r||Je(()=>{let o=e.$$.on_mount.map(en).filter(Fe);e.$$.on_destroy?e.$$.on_destroy.push(...o):te(o),e.$$.on_mount=[]}),l.forEach(Je)}function ke(e,n){let t=e.$$;t.fragment!==null&&(li(t.after_update),te(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function ui(e,n){e.$$.dirty[0]===-1&&(pe.push(e),ri(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function _e(e,n,t,r,i,l,o,c=[-1]){let s=tn;Ae(e);let u=e.$$={fragment:null,ctx:[],props:l,update:G,not_equal:i,bound:Ln(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(s?s.$$.context:[])),callbacks:Ln(),dirty:c,skip_bound:!1,root:n.target||s.$$.root};o&&o(u.root);let f=!1;if(u.ctx=t?t(e,n.props||{},(a,m,...g)=>{let v=g.length?g[0]:m;return u.ctx&&i(u.ctx[a],u.ctx[a]=v)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](v),f&&ui(e,a)),m}):[],u.update(),f=!0,te(u.before_update),u.fragment=r?r(u.ctx):!1,n.target){if(n.hydrate){Zt();let a=ti(n.target);u.fragment&&u.fragment.l(a),a.forEach(ge)}else u.fragment&&u.fragment.c();n.intro&&$e(e.$$.fragment),Re(e,n.target,n.anchor,n.customElement),Jt(),$n()}Ae(s)}var ai;typeof HTMLElement=="function"&&(ai=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(en).filter(Fe);for(let n in this.$$.slotted)this.appendChild(this.$$.slotted[n])}attributeChangedCallback(e,n,t){this[e]=t}disconnectedCallback(){te(this.$$.on_disconnect)}$destroy(){ke(this,1),this.$destroy=G}$on(e,n){if(!Fe(n))return G;let t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{let r=t.indexOf(n);r!==-1&&t.splice(r,1)}}$set(e){this.$$set&&!In(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var ne=class{$destroy(){ke(this,1),this.$destroy=G}$on(n,t){if(!Fe(t))return G;let r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(t),()=>{let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(n){this.$$set&&!In(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}};var Al=require("obsidian");var tl=require("obsidian");function fi(e,n,t){let{app:r}=n,{basePath:i}=n,{settings:l}=n,{config:o=null}=n,{combinedFileName:c=""}=n,s=new Set,u="",f=new Set,a={},m=new Set;function g(h,y){let _=[],b=[],S=y.split(`
`);for(let C of S){let O=C.match(/^(#+)\s*(.*)$/);if(O){let I=O[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();_.push(I)}let F=C.match(/\^([\w-]+)$/);F&&b.push(F[1])}a[h.toLowerCase()]={file:h,sections:_,blocks:b}}async function v(h){let y=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=h,b;for(;(b=y.exec(h))!==null;){let S=b[0],C=b[1].trim(),O=b[2],F=b[3],I=b[4],U=b[5];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(C)){let j=`%% EMBED IMAGE: ${C} %%
`;_=_.replace(S,j+S);continue}if(!s.has(C)){s.add(C),f.add(C.toLowerCase());try{let j=r.metadataCache.getFirstLinkpathDest(C,"");if(j){let M=await r.vault.read(j);(!M||M.trim()==="")&&(M=`<!-- Contenu vide ou non trouv\xE9 pour '${C}' -->`);let k=M;g(C,k),k=await A(k,j.parent?.path||"");let ee=`^${C.replace(/_/g,"-")}`,Q=`%% EMBED START: [${C}] %% ${ee}
`,D=`
%% EMBED END: ${C} %%`;_=_.replace(S,Q+k+D)}else _=_.replace(S,`![[${C}]]`)}catch{_=_.replace(S,`![[${C}]]`)}finally{s.delete(C)}}}return _}async function w(h){let y=/\[\[([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=h.split(`
`),b=!1,S=-1,C=[];for(let F=0;F<_.length;F++)/^(```|~~~)/.test(_[F].trim())&&(b?(b=!1,C.push({start:S,end:F})):(b=!0,S=F));let O=[];for(let F=0;F<_.length;F++){let I=_[F],U,j=!1;for(let M of C)if(F>=M.start&&F<=M.end){j=!0;break}if(j){O.push(I);continue}for(;(U=y.exec(I))!==null;){let M=U[0],k=U[1].trim(),ee=U[2],Q=U[3],D=U[4],H=U[5],ue=U[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(k))continue;let Ke=a[k.toLowerCase()];if(Ke){if(!ee&&!D){let q=`^${k.replace(/_/g,"-")}`,K=ue||k;I=I.replace(M,`[[#${q}|${K}]]`);continue}if(ee&&Q){let q=Q.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(Ke.sections.includes(q)){let K=ue||Q;I=I.replace(M,`[[#${q}|${K}]]`);continue}}if(D&&H){let q="^"+H.replace(/_/g,"-");if(Ke.blocks.includes(H.replace(/_/g,"-"))){let K=ue||H;I=I.replace(M,`[[#${q}|${K}]]`);continue}}}if(l.useHiddenEmbeds&&!f.has(k.toLowerCase())&&!m.has(k.toLowerCase()))try{let q=r.metadataCache.getFirstLinkpathDest(k,"");if(q){let K=await r.vault.read(q);(!K||K.trim()==="")&&(K=`<!-- Contenu vide ou non trouv\xE9 pour '${k}' -->`);let Wt=`%%EMBED HIDDEN START: [[${k}]] 
${K}
EMBED HIDDEN END %%`;O.push(Wt),m.add(k.toLowerCase())}}catch{}let ze=r.metadataCache.getFirstLinkpathDest(k,"");if(ze&&!ze.path.startsWith("http")&&!ze.path.startsWith("/")){let q=ue||k;I=I.replace(M,`[[${k}|${q}]]`)}else{let q=ue||k;I=I.replace(M,`[[${k}|${q}]]`)}}y.lastIndex=0,O.push(I)}return O.join(`
`)}async function p(h){let y=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=h,b;for(;(b=y.exec(h))!==null;){let S=b[0],C=b[1].trim(),O=b[2],F=b[3],I=b[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(C)&&(C=C.replace(/\.md$/i,""));try{let j=r.metadataCache.getFirstLinkpathDest(C,"");if(j){let k=`![[${j.path.replace(/\\/g,"/")}`;O&&F&&(k+=`#${F}`),I&&(k+=`|${I}`),k+="]]",_=_.replace(S,k)}else _=_.replace(S,`![[${C}]]`)}catch{_=_.replace(S,`![[${C}]]`)}}return _}async function A(h,y){let _=h;return _=await v(_),_=await w(_),_=await p(_),_=_,_}function d(h){return h.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(y,_,b,S)=>f.has(_.toLowerCase())?S?`[[#^${b}|${S}]]`:`[[#^${b}]]`:y)}async function L(h){u="Traitement des liens...",s.clear(),f.clear(),m.clear(),a={};try{let y=await A(h,i);return y=d(y),u="Traitement termin\xE9",y}catch(y){throw u="Erreur lors du traitement",y}}function E(){s.clear(),u="",f.clear(),m.clear(),a={}}return e.$$set=h=>{"app"in h&&t(0,r=h.app),"basePath"in h&&t(1,i=h.basePath),"settings"in h&&t(2,l=h.settings),"config"in h&&t(3,o=h.config),"combinedFileName"in h&&t(4,c=h.combinedFileName)},[r,i,l,o,c,L,E]}var ln=class extends ne{constructor(n){super(),_e(this,n,fi,null,ie,{app:0,basePath:1,settings:2,config:3,combinedFileName:4,processMarkdown:5,resetState:6})}get processMarkdown(){return this.$$.ctx[5]}get resetState(){return this.$$.ctx[6]}},Rn=ln;var xe=[];function Pe(e,n=G){let t,r=new Set;function i(c){if(ie(e,c)&&(e=c,t)){let s=!xe.length;for(let u of r)u[1](),xe.push(u,e);if(s){for(let u=0;u<xe.length;u+=2)xe[u][0](xe[u+1]);xe.length=0}}}function l(c){i(c(e))}function o(c,s=G){let u=[c,s];return r.add(u),r.size===1&&(t=n(i)||G),c(e),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:o}}function Jn(e){return typeof e>"u"||e===null}function di(e){return typeof e=="object"&&e!==null}function pi(e){return Array.isArray(e)?e:Jn(e)?[]:[e]}function hi(e,n){var t,r,i,l;if(n)for(l=Object.keys(n),t=0,r=l.length;t<r;t+=1)i=l[t],e[i]=n[i];return e}function mi(e,n){var t="",r;for(r=0;r<n;r+=1)t+=e;return t}function gi(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var _i=Jn,xi=di,bi=pi,vi=mi,yi=gi,wi=hi,$={isNothing:_i,isObject:xi,toArray:bi,repeat:vi,isNegativeZero:yi,extend:wi};function et(e,n){var t="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(t+=`

`+e.mark.snippet),r+" "+t):r}function Te(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=et(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Te.prototype=Object.create(Error.prototype);Te.prototype.constructor=Te;Te.prototype.toString=function(n){return this.name+": "+et(this,n)};var Y=Te;function cn(e,n,t,r,i){var l="",o="",c=Math.floor(i/2)-1;return r-n>c&&(l=" ... ",n=r-c+l.length),t-r>c&&(o=" ...",t=r+c-o.length),{str:l+e.slice(n,t).replace(/\t/g,"\u2192")+o,pos:r-n+l.length}}function sn(e,n){return $.repeat(" ",n-e.length)+e}function Ai(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var t=/\r?\n|\r|\0/g,r=[0],i=[],l,o=-1;l=t.exec(e.buffer);)i.push(l.index),r.push(l.index+l[0].length),e.position<=l.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var c="",s,u,f=Math.min(e.line+n.linesAfter,i.length).toString().length,a=n.maxLength-(n.indent+f+3);for(s=1;s<=n.linesBefore&&!(o-s<0);s++)u=cn(e.buffer,r[o-s],i[o-s],e.position-(r[o]-r[o-s]),a),c=$.repeat(" ",n.indent)+sn((e.line-s+1).toString(),f)+" | "+u.str+`
`+c;for(u=cn(e.buffer,r[o],i[o],e.position,a),c+=$.repeat(" ",n.indent)+sn((e.line+1).toString(),f)+" | "+u.str+`
`,c+=$.repeat("-",n.indent+f+3+u.pos)+`^
`,s=1;s<=n.linesAfter&&!(o+s>=i.length);s++)u=cn(e.buffer,r[o+s],i[o+s],e.position-(r[o]-r[o+s]),a),c+=$.repeat(" ",n.indent)+sn((e.line+s+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}var Fi=Ai,Ci=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ei=["scalar","sequence","mapping"];function ki(e){var n={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(r){n[String(r)]=t})}),n}function Si(e,n){if(n=n||{},Object.keys(n).forEach(function(t){if(Ci.indexOf(t)===-1)throw new Y('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(t){return t},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=ki(n.styleAliases||null),Ei.indexOf(this.kind)===-1)throw new Y('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var P=Si;function Pn(e,n){var t=[];return e[n].forEach(function(r){var i=t.length;t.forEach(function(l,o){l.tag===r.tag&&l.kind===r.kind&&l.multi===r.multi&&(i=o)}),t[i]=r}),t}function Ti(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,t;function r(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(n=0,t=arguments.length;n<t;n+=1)arguments[n].forEach(r);return e}function an(e){return this.extend(e)}an.prototype.extend=function(n){var t=[],r=[];if(n instanceof P)r.push(n);else if(Array.isArray(n))r=r.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(t=t.concat(n.implicit)),n.explicit&&(r=r.concat(n.explicit));else throw new Y("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(l){if(!(l instanceof P))throw new Y("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new Y("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new Y("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(l){if(!(l instanceof P))throw new Y("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(an.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Pn(i,"implicit"),i.compiledExplicit=Pn(i,"explicit"),i.compiledTypeMap=Ti(i.compiledImplicit,i.compiledExplicit),i};var nt=an,tt=new P("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),it=new P("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),rt=new P("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),ot=new nt({explicit:[tt,it,rt]});function Li(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function Oi(){return null}function Ii(e){return e===null}var lt=new P("tag:yaml.org,2002:null",{kind:"scalar",resolve:Li,construct:Oi,predicate:Ii,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Ni(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function Mi(e){return e==="true"||e==="True"||e==="TRUE"}function Di(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var ct=new P("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Ni,construct:Mi,predicate:Di,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function $i(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ri(e){return 48<=e&&e<=55}function Pi(e){return 48<=e&&e<=57}function ji(e){if(e===null)return!1;var n=e.length,t=0,r=!1,i;if(!n)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===n)return!0;if(i=e[++t],i==="b"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(!$i(e.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(t++;t<n;t++)if(i=e[t],i!=="_"){if(!Ri(e.charCodeAt(t)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;t<n;t++)if(i=e[t],i!=="_"){if(!Pi(e.charCodeAt(t)))return!1;r=!0}return!(!r||i==="_")}function Bi(e){var n=e,t=1,r;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),r=n[0],(r==="-"||r==="+")&&(r==="-"&&(t=-1),n=n.slice(1),r=n[0]),n==="0")return 0;if(r==="0"){if(n[1]==="b")return t*parseInt(n.slice(2),2);if(n[1]==="x")return t*parseInt(n.slice(2),16);if(n[1]==="o")return t*parseInt(n.slice(2),8)}return t*parseInt(n,10)}function Hi(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!$.isNegativeZero(e)}var st=new P("tag:yaml.org,2002:int",{kind:"scalar",resolve:ji,construct:Bi,predicate:Hi,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Yi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ui(e){return!(e===null||!Yi.test(e)||e[e.length-1]==="_")}function qi(e){var n,t;return n=e.replace(/_/g,"").toLowerCase(),t=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:t*parseFloat(n,10)}var Wi=/^[-+]?[0-9]+e/;function Gi(e,n){var t;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if($.isNegativeZero(e))return"-0.0";return t=e.toString(10),Wi.test(t)?t.replace("e",".e"):t}function Ki(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||$.isNegativeZero(e))}var ut=new P("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ui,construct:qi,predicate:Ki,represent:Gi,defaultStyle:"lowercase"}),at=ot.extend({implicit:[lt,ct,st,ut]}),ft=at,dt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function zi(e){return e===null?!1:dt.exec(e)!==null||pt.exec(e)!==null}function Vi(e){var n,t,r,i,l,o,c,s=0,u=null,f,a,m;if(n=dt.exec(e),n===null&&(n=pt.exec(e)),n===null)throw new Error("Date resolve error");if(t=+n[1],r=+n[2]-1,i=+n[3],!n[4])return new Date(Date.UTC(t,r,i));if(l=+n[4],o=+n[5],c=+n[6],n[7]){for(s=n[7].slice(0,3);s.length<3;)s+="0";s=+s}return n[9]&&(f=+n[10],a=+(n[11]||0),u=(f*60+a)*6e4,n[9]==="-"&&(u=-u)),m=new Date(Date.UTC(t,r,i,l,o,c,s)),u&&m.setTime(m.getTime()-u),m}function Qi(e){return e.toISOString()}var ht=new P("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:zi,construct:Vi,instanceOf:Date,represent:Qi});function Xi(e){return e==="<<"||e===null}var mt=new P("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Xi}),mn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Zi(e){if(e===null)return!1;var n,t,r=0,i=e.length,l=mn;for(t=0;t<i;t++)if(n=l.indexOf(e.charAt(t)),!(n>64)){if(n<0)return!1;r+=6}return r%8===0}function Ji(e){var n,t,r=e.replace(/[\r\n=]/g,""),i=r.length,l=mn,o=0,c=[];for(n=0;n<i;n++)n%4===0&&n&&(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)),o=o<<6|l.indexOf(r.charAt(n));return t=i%4*6,t===0?(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)):t===18?(c.push(o>>10&255),c.push(o>>2&255)):t===12&&c.push(o>>4&255),new Uint8Array(c)}function er(e){var n="",t=0,r,i,l=e.length,o=mn;for(r=0;r<l;r++)r%3===0&&r&&(n+=o[t>>18&63],n+=o[t>>12&63],n+=o[t>>6&63],n+=o[t&63]),t=(t<<8)+e[r];return i=l%3,i===0?(n+=o[t>>18&63],n+=o[t>>12&63],n+=o[t>>6&63],n+=o[t&63]):i===2?(n+=o[t>>10&63],n+=o[t>>4&63],n+=o[t<<2&63],n+=o[64]):i===1&&(n+=o[t>>2&63],n+=o[t<<4&63],n+=o[64],n+=o[64]),n}function nr(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var gt=new P("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Zi,construct:Ji,predicate:nr,represent:er}),tr=Object.prototype.hasOwnProperty,ir=Object.prototype.toString;function rr(e){if(e===null)return!0;var n=[],t,r,i,l,o,c=e;for(t=0,r=c.length;t<r;t+=1){if(i=c[t],o=!1,ir.call(i)!=="[object Object]")return!1;for(l in i)if(tr.call(i,l))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(l)===-1)n.push(l);else return!1}return!0}function or(e){return e!==null?e:[]}var _t=new P("tag:yaml.org,2002:omap",{kind:"sequence",resolve:rr,construct:or}),lr=Object.prototype.toString;function cr(e){if(e===null)return!0;var n,t,r,i,l,o=e;for(l=new Array(o.length),n=0,t=o.length;n<t;n+=1){if(r=o[n],lr.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;l[n]=[i[0],r[i[0]]]}return!0}function sr(e){if(e===null)return[];var n,t,r,i,l,o=e;for(l=new Array(o.length),n=0,t=o.length;n<t;n+=1)r=o[n],i=Object.keys(r),l[n]=[i[0],r[i[0]]];return l}var xt=new P("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:cr,construct:sr}),ur=Object.prototype.hasOwnProperty;function ar(e){if(e===null)return!0;var n,t=e;for(n in t)if(ur.call(t,n)&&t[n]!==null)return!1;return!0}function fr(e){return e!==null?e:{}}var bt=new P("tag:yaml.org,2002:set",{kind:"mapping",resolve:ar,construct:fr}),gn=ft.extend({implicit:[ht,mt],explicit:[gt,_t,xt,bt]}),ce=Object.prototype.hasOwnProperty,je=1,vt=2,yt=3,Be=4,un=1,dr=2,jn=3,pr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,hr=/[\x85\u2028\u2029]/,mr=/[,\[\]\{\}]/,wt=/^(?:!|!!|![a-z\-]+!)$/i,At=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Bn(e){return Object.prototype.toString.call(e)}function V(e){return e===10||e===13}function fe(e){return e===9||e===32}function W(e){return e===9||e===32||e===10||e===13}function ve(e){return e===44||e===91||e===93||e===123||e===125}function gr(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function _r(e){return e===120?2:e===117?4:e===85?8:0}function xr(e){return 48<=e&&e<=57?e-48:-1}function Hn(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function br(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ft=new Array(256),Ct=new Array(256);for(ae=0;ae<256;ae++)Ft[ae]=Hn(ae)?1:0,Ct[ae]=Hn(ae);var ae;function vr(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||gn,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Et(e,n){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=Fi(t),new Y(n,t)}function x(e,n){throw Et(e,n)}function He(e,n){e.onWarning&&e.onWarning.call(null,Et(e,n))}var Yn={YAML:function(n,t,r){var i,l,o;n.version!==null&&x(n,"duplication of %YAML directive"),r.length!==1&&x(n,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&x(n,"ill-formed argument of the YAML directive"),l=parseInt(i[1],10),o=parseInt(i[2],10),l!==1&&x(n,"unacceptable YAML version of the document"),n.version=r[0],n.checkLineBreaks=o<2,o!==1&&o!==2&&He(n,"unsupported YAML version of the document")},TAG:function(n,t,r){var i,l;r.length!==2&&x(n,"TAG directive accepts exactly two arguments"),i=r[0],l=r[1],wt.test(i)||x(n,"ill-formed tag handle (first argument) of the TAG directive"),ce.call(n.tagMap,i)&&x(n,'there is a previously declared suffix for "'+i+'" tag handle'),At.test(l)||x(n,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{x(n,"tag prefix is malformed: "+l)}n.tagMap[i]=l}};function le(e,n,t,r){var i,l,o,c;if(n<t){if(c=e.input.slice(n,t),r)for(i=0,l=c.length;i<l;i+=1)o=c.charCodeAt(i),o===9||32<=o&&o<=1114111||x(e,"expected valid JSON character");else pr.test(c)&&x(e,"the stream contains non-printable characters");e.result+=c}}function Un(e,n,t,r){var i,l,o,c;for($.isObject(t)||x(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),o=0,c=i.length;o<c;o+=1)l=i[o],ce.call(n,l)||(n[l]=t[l],r[l]=!0)}function ye(e,n,t,r,i,l,o,c,s){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&x(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Bn(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Bn(i)==="[object Object]"&&(i="[object Object]"),i=String(i),n===null&&(n={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(u=0,f=l.length;u<f;u+=1)Un(e,n,l[u],t);else Un(e,n,l,t);else!e.json&&!ce.call(t,i)&&ce.call(n,i)&&(e.line=o||e.line,e.lineStart=c||e.lineStart,e.position=s||e.position,x(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(n,i,{configurable:!0,enumerable:!0,writable:!0,value:l}):n[i]=l,delete t[i];return n}function _n(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):x(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function N(e,n,t){for(var r=0,i=e.input.charCodeAt(e.position);i!==0;){for(;fe(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(n&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(V(i))for(_n(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&r!==0&&e.lineIndent<t&&He(e,"deficient indentation"),r}function qe(e){var n=e.position,t;return t=e.input.charCodeAt(n),!!((t===45||t===46)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),t===0||W(t)))}function xn(e,n){n===1?e.result+=" ":n>1&&(e.result+=$.repeat(`
`,n-1))}function yr(e,n,t){var r,i,l,o,c,s,u,f,a=e.kind,m=e.result,g;if(g=e.input.charCodeAt(e.position),W(g)||ve(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=e.input.charCodeAt(e.position+1),W(i)||t&&ve(i)))return!1;for(e.kind="scalar",e.result="",l=o=e.position,c=!1;g!==0;){if(g===58){if(i=e.input.charCodeAt(e.position+1),W(i)||t&&ve(i))break}else if(g===35){if(r=e.input.charCodeAt(e.position-1),W(r))break}else{if(e.position===e.lineStart&&qe(e)||t&&ve(g))break;if(V(g))if(s=e.line,u=e.lineStart,f=e.lineIndent,N(e,!1,-1),e.lineIndent>=n){c=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=s,e.lineStart=u,e.lineIndent=f;break}}c&&(le(e,l,o,!1),xn(e,e.line-s),l=o=e.position,c=!1),fe(g)||(o=e.position+1),g=e.input.charCodeAt(++e.position)}return le(e,l,o,!1),e.result?!0:(e.kind=a,e.result=m,!1)}function wr(e,n){var t,r,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(le(e,r,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)r=e.position,e.position++,i=e.position;else return!0;else V(t)?(le(e,r,i,!0),xn(e,N(e,!1,n)),r=i=e.position):e.position===e.lineStart&&qe(e)?x(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);x(e,"unexpected end of the stream within a single quoted scalar")}function Ar(e,n){var t,r,i,l,o,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=r=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return le(e,t,e.position,!0),e.position++,!0;if(c===92){if(le(e,t,e.position,!0),c=e.input.charCodeAt(++e.position),V(c))N(e,!1,n);else if(c<256&&Ft[c])e.result+=Ct[c],e.position++;else if((o=_r(c))>0){for(i=o,l=0;i>0;i--)c=e.input.charCodeAt(++e.position),(o=gr(c))>=0?l=(l<<4)+o:x(e,"expected hexadecimal character");e.result+=br(l),e.position++}else x(e,"unknown escape sequence");t=r=e.position}else V(c)?(le(e,t,r,!0),xn(e,N(e,!1,n)),t=r=e.position):e.position===e.lineStart&&qe(e)?x(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}x(e,"unexpected end of the stream within a double quoted scalar")}function Fr(e,n){var t=!0,r,i,l,o=e.tag,c,s=e.anchor,u,f,a,m,g,v=Object.create(null),w,p,A,d;if(d=e.input.charCodeAt(e.position),d===91)f=93,g=!1,c=[];else if(d===123)f=125,g=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),d=e.input.charCodeAt(++e.position);d!==0;){if(N(e,!0,n),d=e.input.charCodeAt(e.position),d===f)return e.position++,e.tag=o,e.anchor=s,e.kind=g?"mapping":"sequence",e.result=c,!0;t?d===44&&x(e,"expected the node content, but found ','"):x(e,"missed comma between flow collection entries"),p=w=A=null,a=m=!1,d===63&&(u=e.input.charCodeAt(e.position+1),W(u)&&(a=m=!0,e.position++,N(e,!0,n))),r=e.line,i=e.lineStart,l=e.position,we(e,n,je,!1,!0),p=e.tag,w=e.result,N(e,!0,n),d=e.input.charCodeAt(e.position),(m||e.line===r)&&d===58&&(a=!0,d=e.input.charCodeAt(++e.position),N(e,!0,n),we(e,n,je,!1,!0),A=e.result),g?ye(e,c,v,p,w,A,r,i,l):a?c.push(ye(e,null,v,p,w,A,r,i,l)):c.push(w),N(e,!0,n),d=e.input.charCodeAt(e.position),d===44?(t=!0,d=e.input.charCodeAt(++e.position)):t=!1}x(e,"unexpected end of the stream within a flow collection")}function Cr(e,n){var t,r,i=un,l=!1,o=!1,c=n,s=0,u=!1,f,a;if(a=e.input.charCodeAt(e.position),a===124)r=!1;else if(a===62)r=!0;else return!1;for(e.kind="scalar",e.result="";a!==0;)if(a=e.input.charCodeAt(++e.position),a===43||a===45)un===i?i=a===43?jn:dr:x(e,"repeat of a chomping mode identifier");else if((f=xr(a))>=0)f===0?x(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?x(e,"repeat of an indentation width identifier"):(c=n+f-1,o=!0);else break;if(fe(a)){do a=e.input.charCodeAt(++e.position);while(fe(a));if(a===35)do a=e.input.charCodeAt(++e.position);while(!V(a)&&a!==0)}for(;a!==0;){for(_n(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!o||e.lineIndent<c)&&a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>c&&(c=e.lineIndent),V(a)){s++;continue}if(e.lineIndent<c){i===jn?e.result+=$.repeat(`
`,l?1+s:s):i===un&&l&&(e.result+=`
`);break}for(r?fe(a)?(u=!0,e.result+=$.repeat(`
`,l?1+s:s)):u?(u=!1,e.result+=$.repeat(`
`,s+1)):s===0?l&&(e.result+=" "):e.result+=$.repeat(`
`,s):e.result+=$.repeat(`
`,l?1+s:s),l=!0,o=!0,s=0,t=e.position;!V(a)&&a!==0;)a=e.input.charCodeAt(++e.position);le(e,t,e.position,!1)}return!0}function qn(e,n){var t,r=e.tag,i=e.anchor,l=[],o,c=!1,s;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),s=e.input.charCodeAt(e.position);s!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),!(s!==45||(o=e.input.charCodeAt(e.position+1),!W(o))));){if(c=!0,e.position++,N(e,!0,-1)&&e.lineIndent<=n){l.push(null),s=e.input.charCodeAt(e.position);continue}if(t=e.line,we(e,n,yt,!1,!0),l.push(e.result),N(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>n)&&s!==0)x(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return c?(e.tag=r,e.anchor=i,e.kind="sequence",e.result=l,!0):!1}function Er(e,n,t){var r,i,l,o,c,s,u=e.tag,f=e.anchor,a={},m=Object.create(null),g=null,v=null,w=null,p=!1,A=!1,d;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),d=e.input.charCodeAt(e.position);d!==0;){if(!p&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,x(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),l=e.line,(d===63||d===58)&&W(r))d===63?(p&&(ye(e,a,m,g,v,null,o,c,s),g=v=w=null),A=!0,p=!0,i=!0):p?(p=!1,i=!0):x(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,d=r;else{if(o=e.line,c=e.lineStart,s=e.position,!we(e,t,vt,!1,!0))break;if(e.line===l){for(d=e.input.charCodeAt(e.position);fe(d);)d=e.input.charCodeAt(++e.position);if(d===58)d=e.input.charCodeAt(++e.position),W(d)||x(e,"a whitespace character is expected after the key-value separator within a block mapping"),p&&(ye(e,a,m,g,v,null,o,c,s),g=v=w=null),A=!0,p=!1,i=!1,g=e.tag,v=e.result;else if(A)x(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=f,!0}else if(A)x(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=f,!0}if((e.line===l||e.lineIndent>n)&&(p&&(o=e.line,c=e.lineStart,s=e.position),we(e,n,Be,!0,i)&&(p?v=e.result:w=e.result),p||(ye(e,a,m,g,v,w,o,c,s),g=v=w=null),N(e,!0,-1),d=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>n)&&d!==0)x(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return p&&ye(e,a,m,g,v,null,o,c,s),A&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=a),A}function kr(e){var n,t=!1,r=!1,i,l,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&x(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(t=!0,o=e.input.charCodeAt(++e.position)):o===33?(r=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",n=e.position,t){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(l=e.input.slice(n,e.position),o=e.input.charCodeAt(++e.position)):x(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!W(o);)o===33&&(r?x(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(n-1,e.position+1),wt.test(i)||x(e,"named tag handle cannot contain such characters"),r=!0,n=e.position+1)),o=e.input.charCodeAt(++e.position);l=e.input.slice(n,e.position),mr.test(l)&&x(e,"tag suffix cannot contain flow indicator characters")}l&&!At.test(l)&&x(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{x(e,"tag name is malformed: "+l)}return t?e.tag=l:ce.call(e.tagMap,i)?e.tag=e.tagMap[i]+l:i==="!"?e.tag="!"+l:i==="!!"?e.tag="tag:yaml.org,2002:"+l:x(e,'undeclared tag handle "'+i+'"'),!0}function Sr(e){var n,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&x(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!W(t)&&!ve(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&x(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function Tr(e){var n,t,r;if(r=e.input.charCodeAt(e.position),r!==42)return!1;for(r=e.input.charCodeAt(++e.position),n=e.position;r!==0&&!W(r)&&!ve(r);)r=e.input.charCodeAt(++e.position);return e.position===n&&x(e,"name of an alias node must contain at least one character"),t=e.input.slice(n,e.position),ce.call(e.anchorMap,t)||x(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],N(e,!0,-1),!0}function we(e,n,t,r,i){var l,o,c,s=1,u=!1,f=!1,a,m,g,v,w,p;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=o=c=Be===t||yt===t,r&&N(e,!0,-1)&&(u=!0,e.lineIndent>n?s=1:e.lineIndent===n?s=0:e.lineIndent<n&&(s=-1)),s===1)for(;kr(e)||Sr(e);)N(e,!0,-1)?(u=!0,c=l,e.lineIndent>n?s=1:e.lineIndent===n?s=0:e.lineIndent<n&&(s=-1)):c=!1;if(c&&(c=u||i),(s===1||Be===t)&&(je===t||vt===t?w=n:w=n+1,p=e.position-e.lineStart,s===1?c&&(qn(e,p)||Er(e,p,w))||Fr(e,w)?f=!0:(o&&Cr(e,w)||wr(e,w)||Ar(e,w)?f=!0:Tr(e)?(f=!0,(e.tag!==null||e.anchor!==null)&&x(e,"alias node should not have any properties")):yr(e,w,je===t)&&(f=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):s===0&&(f=c&&qn(e,p))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&x(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),a=0,m=e.implicitTypes.length;a<m;a+=1)if(v=e.implicitTypes[a],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ce.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,g=e.typeMap.multi[e.kind||"fallback"],a=0,m=g.length;a<m;a+=1)if(e.tag.slice(0,g[a].tag.length)===g[a].tag){v=g[a];break}v||x(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&x(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):x(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||f}function Lr(e){var n=e.position,t,r,i,l=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(N(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(l=!0,o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!W(o);)o=e.input.charCodeAt(++e.position);for(r=e.input.slice(t,e.position),i=[],r.length<1&&x(e,"directive name must not be less than one character in length");o!==0;){for(;fe(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!V(o));break}if(V(o))break;for(t=e.position;o!==0&&!W(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}o!==0&&_n(e),ce.call(Yn,r)?Yn[r](e,r,i):He(e,'unknown document directive "'+r+'"')}if(N(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,N(e,!0,-1)):l&&x(e,"directives end mark is expected"),we(e,e.lineIndent-1,Be,!1,!0),N(e,!0,-1),e.checkLineBreaks&&hr.test(e.input.slice(n,e.position))&&He(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&qe(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,N(e,!0,-1));return}if(e.position<e.length-1)x(e,"end of the stream or a document separator is expected");else return}function kt(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new vr(e,n),r=e.indexOf("\0");for(r!==-1&&(t.position=r,x(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Lr(t);return t.documents}function Or(e,n,t){n!==null&&typeof n=="object"&&typeof t>"u"&&(t=n,n=null);var r=kt(e,t);if(typeof n!="function")return r;for(var i=0,l=r.length;i<l;i+=1)n(r[i])}function Ir(e,n){var t=kt(e,n);if(t.length!==0){if(t.length===1)return t[0];throw new Y("expected a single document in the stream, but found more")}}var Nr=Or,Mr=Ir,St={loadAll:Nr,load:Mr},Tt=Object.prototype.toString,Lt=Object.prototype.hasOwnProperty,bn=65279,Dr=9,Le=10,$r=13,Rr=32,Pr=33,jr=34,fn=35,Br=37,Hr=38,Yr=39,Ur=42,Ot=44,qr=45,Ye=58,Wr=61,Gr=62,Kr=63,zr=64,It=91,Nt=93,Vr=96,Mt=123,Qr=124,Dt=125,B={};B[0]="\\0";B[7]="\\a";B[8]="\\b";B[9]="\\t";B[10]="\\n";B[11]="\\v";B[12]="\\f";B[13]="\\r";B[27]="\\e";B[34]='\\"';B[92]="\\\\";B[133]="\\N";B[160]="\\_";B[8232]="\\L";B[8233]="\\P";var Xr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Zr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Jr(e,n){var t,r,i,l,o,c,s;if(n===null)return{};for(t={},r=Object.keys(n),i=0,l=r.length;i<l;i+=1)o=r[i],c=String(n[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),s=e.compiledTypeMap.fallback[o],s&&Lt.call(s.styleAliases,c)&&(c=s.styleAliases[c]),t[o]=c;return t}function eo(e){var n,t,r;if(n=e.toString(16).toUpperCase(),e<=255)t="x",r=2;else if(e<=65535)t="u",r=4;else if(e<=4294967295)t="U",r=8;else throw new Y("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+$.repeat("0",r-n.length)+n}var no=1,Oe=2;function to(e){this.schema=e.schema||gn,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=$.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Jr(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Oe:no,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Wn(e,n){for(var t=$.repeat(" ",n),r=0,i=-1,l="",o,c=e.length;r<c;)i=e.indexOf(`
`,r),i===-1?(o=e.slice(r),r=c):(o=e.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(l+=t),l+=o;return l}function dn(e,n){return`
`+$.repeat(" ",e.indent*n)}function io(e,n){var t,r,i;for(t=0,r=e.implicitTypes.length;t<r;t+=1)if(i=e.implicitTypes[t],i.resolve(n))return!0;return!1}function Ue(e){return e===Rr||e===Dr}function Ie(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==bn||65536<=e&&e<=1114111}function Gn(e){return Ie(e)&&e!==bn&&e!==$r&&e!==Le}function Kn(e,n,t){var r=Gn(e),i=r&&!Ue(e);return(t?r:r&&e!==Ot&&e!==It&&e!==Nt&&e!==Mt&&e!==Dt)&&e!==fn&&!(n===Ye&&!i)||Gn(n)&&!Ue(n)&&e===fn||n===Ye&&i}function ro(e){return Ie(e)&&e!==bn&&!Ue(e)&&e!==qr&&e!==Kr&&e!==Ye&&e!==Ot&&e!==It&&e!==Nt&&e!==Mt&&e!==Dt&&e!==fn&&e!==Hr&&e!==Ur&&e!==Pr&&e!==Qr&&e!==Wr&&e!==Gr&&e!==Yr&&e!==jr&&e!==Br&&e!==zr&&e!==Vr}function oo(e){return!Ue(e)&&e!==Ye}function Se(e,n){var t=e.charCodeAt(n),r;return t>=55296&&t<=56319&&n+1<e.length&&(r=e.charCodeAt(n+1),r>=56320&&r<=57343)?(t-55296)*1024+r-56320+65536:t}function $t(e){var n=/^\n* /;return n.test(e)}var Rt=1,pn=2,Pt=3,jt=4,be=5;function lo(e,n,t,r,i,l,o,c){var s,u=0,f=null,a=!1,m=!1,g=r!==-1,v=-1,w=ro(Se(e,0))&&oo(Se(e,e.length-1));if(n||o)for(s=0;s<e.length;u>=65536?s+=2:s++){if(u=Se(e,s),!Ie(u))return be;w=w&&Kn(u,f,c),f=u}else{for(s=0;s<e.length;u>=65536?s+=2:s++){if(u=Se(e,s),u===Le)a=!0,g&&(m=m||s-v-1>r&&e[v+1]!==" ",v=s);else if(!Ie(u))return be;w=w&&Kn(u,f,c),f=u}m=m||g&&s-v-1>r&&e[v+1]!==" "}return!a&&!m?w&&!o&&!i(e)?Rt:l===Oe?be:pn:t>9&&$t(e)?be:o?l===Oe?be:pn:m?jt:Pt}function co(e,n,t,r,i){e.dump=function(){if(n.length===0)return e.quotingType===Oe?'""':"''";if(!e.noCompatMode&&(Xr.indexOf(n)!==-1||Zr.test(n)))return e.quotingType===Oe?'"'+n+'"':"'"+n+"'";var l=e.indent*Math.max(1,t),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),c=r||e.flowLevel>-1&&t>=e.flowLevel;function s(u){return io(e,u)}switch(lo(n,c,e.indent,o,s,e.quotingType,e.forceQuotes&&!r,i)){case Rt:return n;case pn:return"'"+n.replace(/'/g,"''")+"'";case Pt:return"|"+zn(n,e.indent)+Vn(Wn(n,l));case jt:return">"+zn(n,e.indent)+Vn(Wn(so(n,o),l));case be:return'"'+uo(n)+'"';default:throw new Y("impossible error: invalid scalar style")}}()}function zn(e,n){var t=$t(e)?String(n):"",r=e[e.length-1]===`
`,i=r&&(e[e.length-2]===`
`||e===`
`),l=i?"+":r?"":"-";return t+l+`
`}function Vn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function so(e,n){for(var t=/(\n+)([^\n]*)/g,r=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,t.lastIndex=u,Qn(e.slice(0,u),n)}(),i=e[0]===`
`||e[0]===" ",l,o;o=t.exec(e);){var c=o[1],s=o[2];l=s[0]===" ",r+=c+(!i&&!l&&s!==""?`
`:"")+Qn(s,n),i=l}return r}function Qn(e,n){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,r,i=0,l,o=0,c=0,s="";r=t.exec(e);)c=r.index,c-i>n&&(l=o>i?o:c,s+=`
`+e.slice(i,l),i=l+1),o=c;return s+=`
`,e.length-i>n&&o>i?s+=e.slice(i,o)+`
`+e.slice(o+1):s+=e.slice(i),s.slice(1)}function uo(e){for(var n="",t=0,r,i=0;i<e.length;t>=65536?i+=2:i++)t=Se(e,i),r=B[t],!r&&Ie(t)?(n+=e[i],t>=65536&&(n+=e[i+1])):n+=r||eo(t);return n}function ao(e,n,t){var r="",i=e.tag,l,o,c;for(l=0,o=t.length;l<o;l+=1)c=t[l],e.replacer&&(c=e.replacer.call(t,String(l),c)),(Z(e,n,c,!1,!1)||typeof c>"u"&&Z(e,n,null,!1,!1))&&(r!==""&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=i,e.dump="["+r+"]"}function Xn(e,n,t,r){var i="",l=e.tag,o,c,s;for(o=0,c=t.length;o<c;o+=1)s=t[o],e.replacer&&(s=e.replacer.call(t,String(o),s)),(Z(e,n+1,s,!0,!0,!1,!0)||typeof s>"u"&&Z(e,n+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=dn(e,n)),e.dump&&Le===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=l,e.dump=i||"[]"}function fo(e,n,t){var r="",i=e.tag,l=Object.keys(t),o,c,s,u,f;for(o=0,c=l.length;o<c;o+=1)f="",r!==""&&(f+=", "),e.condenseFlow&&(f+='"'),s=l[o],u=t[s],e.replacer&&(u=e.replacer.call(t,s,u)),Z(e,n,s,!1,!1)&&(e.dump.length>1024&&(f+="? "),f+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Z(e,n,u,!1,!1)&&(f+=e.dump,r+=f));e.tag=i,e.dump="{"+r+"}"}function po(e,n,t,r){var i="",l=e.tag,o=Object.keys(t),c,s,u,f,a,m;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Y("sortKeys must be a boolean or a function");for(c=0,s=o.length;c<s;c+=1)m="",(!r||i!=="")&&(m+=dn(e,n)),u=o[c],f=t[u],e.replacer&&(f=e.replacer.call(t,u,f)),Z(e,n+1,u,!0,!0,!0)&&(a=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,a&&(e.dump&&Le===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,a&&(m+=dn(e,n)),Z(e,n+1,f,!0,a)&&(e.dump&&Le===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,i+=m));e.tag=l,e.dump=i||"{}"}function Zn(e,n,t){var r,i,l,o,c,s;for(i=t?e.explicitTypes:e.implicitTypes,l=0,o=i.length;l<o;l+=1)if(c=i[l],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof n=="object"&&n instanceof c.instanceOf)&&(!c.predicate||c.predicate(n))){if(t?c.multi&&c.representName?e.tag=c.representName(n):e.tag=c.tag:e.tag="?",c.represent){if(s=e.styleMap[c.tag]||c.defaultStyle,Tt.call(c.represent)==="[object Function]")r=c.represent(n,s);else if(Lt.call(c.represent,s))r=c.represent[s](n,s);else throw new Y("!<"+c.tag+'> tag resolver accepts not "'+s+'" style');e.dump=r}return!0}return!1}function Z(e,n,t,r,i,l,o){e.tag=null,e.dump=t,Zn(e,t,!1)||Zn(e,t,!0);var c=Tt.call(e.dump),s=r,u;r&&(r=e.flowLevel<0||e.flowLevel>n);var f=c==="[object Object]"||c==="[object Array]",a,m;if(f&&(a=e.duplicates.indexOf(t),m=a!==-1),(e.tag!==null&&e.tag!=="?"||m||e.indent!==2&&n>0)&&(i=!1),m&&e.usedDuplicates[a])e.dump="*ref_"+a;else{if(f&&m&&!e.usedDuplicates[a]&&(e.usedDuplicates[a]=!0),c==="[object Object]")r&&Object.keys(e.dump).length!==0?(po(e,n,e.dump,i),m&&(e.dump="&ref_"+a+e.dump)):(fo(e,n,e.dump),m&&(e.dump="&ref_"+a+" "+e.dump));else if(c==="[object Array]")r&&e.dump.length!==0?(e.noArrayIndent&&!o&&n>0?Xn(e,n-1,e.dump,i):Xn(e,n,e.dump,i),m&&(e.dump="&ref_"+a+e.dump)):(ao(e,n,e.dump),m&&(e.dump="&ref_"+a+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&co(e,e.dump,n,l,s);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Y("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function ho(e,n){var t=[],r=[],i,l;for(hn(e,t,r),i=0,l=r.length;i<l;i+=1)n.duplicates.push(t[r[i]]);n.usedDuplicates=new Array(l)}function hn(e,n,t){var r,i,l;if(e!==null&&typeof e=="object")if(i=n.indexOf(e),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(n.push(e),Array.isArray(e))for(i=0,l=e.length;i<l;i+=1)hn(e[i],n,t);else for(r=Object.keys(e),i=0,l=r.length;i<l;i+=1)hn(e[r[i]],n,t)}function mo(e,n){n=n||{};var t=new to(n);t.noRefs||ho(e,t);var r=e;return t.replacer&&(r=t.replacer.call({"":r},"",r)),Z(t,0,r,!0,!0)?t.dump+`
`:""}var go=mo,_o={dump:go};function vn(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var xo=P,bo=nt,vo=ot,yo=at,wo=ft,Ao=gn,Fo=St.load,Co=St.loadAll,Eo=_o.dump,ko=Y,So={binary:gt,float:ut,map:rt,null:lt,pairs:xt,set:bt,timestamp:ht,bool:ct,int:st,merge:mt,omap:_t,seq:it,str:tt},To=vn("safeLoad","load"),Lo=vn("safeLoadAll","loadAll"),Oo=vn("safeDump","dump"),Io={Type:xo,Schema:bo,FAILSAFE_SCHEMA:vo,JSON_SCHEMA:yo,CORE_SCHEMA:wo,DEFAULT_SCHEMA:Ao,load:Fo,loadAll:Co,dump:Eo,YAMLException:ko,types:So,safeLoad:To,safeLoadAll:Lo,safeDump:Oo},Bt=Io;var se=Pe({});async function Ht(e="locales/fr.yaml"){try{let t=await(await fetch(e)).text(),r=Bt.load(t);se.set(r)}catch{se.set({error:"Erreur de chargement des textes UI."})}}function No(e){De(e,"svelte-1mnh07d",".split-view.svelte-1mnh07d{display:flex;width:100%;height:100%}.pane.svelte-1mnh07d{flex:1;padding:1rem;overflow:auto;border-right:1px solid #ddd}.pane.svelte-1mnh07d:last-child{border-right:none}.pane-title.svelte-1mnh07d{font-weight:bold;margin-bottom:0.5rem}")}function Mo(e){let n,t,r,i=(e[2].splitview?.original||"Original")+"",l,o,c,s,u,f,a,m=(e[2].splitview?.combined||"Combin\xE9")+"",g,v,w,p;return{c(){n=R("div"),t=R("div"),r=R("div"),l=X(i),o=z(),c=R("pre"),s=X(e[0]),u=z(),f=R("div"),a=R("div"),g=X(m),v=z(),w=R("pre"),p=X(e[1]),re(r,"class","pane-title svelte-1mnh07d"),re(t,"class","pane svelte-1mnh07d"),re(a,"class","pane-title svelte-1mnh07d"),re(f,"class","pane svelte-1mnh07d"),re(n,"class","split-view svelte-1mnh07d")},m(A,d){Ce(A,n,d),T(n,t),T(t,r),T(r,l),T(t,o),T(t,c),T(c,s),T(n,u),T(n,f),T(f,a),T(a,g),T(f,v),T(f,w),T(w,p)},p(A,[d]){d&4&&i!==(i=(A[2].splitview?.original||"Original")+"")&&oe(l,i),d&1&&oe(s,A[0]),d&4&&m!==(m=(A[2].splitview?.combined||"Combin\xE9")+"")&&oe(g,m),d&2&&oe(p,A[1])},i:G,o:G,d(A){A&&ge(n)}}}function Do(e,n,t){let{original:r=""}=n,{combined:i=""}=n,l=me(se);return e.$$set=o=>{"original"in o&&t(0,r=o.original),"combined"in o&&t(1,i=o.combined)},se.subscribe(o=>t(2,l=o)),[r,i,l]}var yn=class extends ne{constructor(n){super(),_e(this,n,Do,Mo,ie,{original:0,combined:1},No)}},Yt=yn;We();var Fn=Pe({original:"",combined:""});function $o(e){De(e,"svelte-v99t9y",".combiner-app.svelte-v99t9y{padding:1rem}")}function qt(e){let n,t;return{c(){n=R("span"),t=X(e[3])},m(r,i){Ce(r,n,i),T(n,t)},p(r,i){i&8&&oe(t,r[3])},d(r){r&&ge(n)}}}function Ro(e){let n,t,r,i,l,o,c,s,u,f,a,m,g=(e[4].save_button||"\u{1F4BE} Sauvegarder le combin\xE9")+"",v,w,p,A,d,L={app:e[0],settings:e[1],basePath:"",config:null,combinedFileName:""};i=new Rn({props:L}),e[12](i),u=new Yt({props:{original:e[5].original,combined:e[5].combined}});let E=e[3]&&qt(e);return{c(){n=R("div"),t=R("h1"),t.textContent="Markdown Combiner",r=z(),on(i.$$.fragment),l=z(),o=R("button"),o.textContent="Combine Active Note",c=z(),s=R("div"),on(u.$$.fragment),f=z(),a=R("div"),m=R("button"),v=X(g),w=z(),E&&E.c(),Ee(a,"margin-top","1rem"),Ee(a,"display","flex"),Ee(a,"align-items","center"),Ee(a,"gap","1rem"),re(n,"class","combiner-app svelte-v99t9y")},m(h,y){Ce(h,n,y),T(n,t),T(n,r),Re(i,n,null),T(n,l),T(n,o),T(n,c),T(n,s),Re(u,s,null),T(s,f),T(s,a),T(a,m),T(m,v),T(a,w),E&&E.m(a,null),p=!0,A||(d=[nn(o,"click",e[6]),nn(m,"click",e[7])],A=!0)},p(h,[y]){let _={};y&1&&(_.app=h[0]),y&2&&(_.settings=h[1]),i.$set(_);let b={};y&32&&(b.original=h[5].original),y&32&&(b.combined=h[5].combined),u.$set(b),(!p||y&16)&&g!==(g=(h[4].save_button||"\u{1F4BE} Sauvegarder le combin\xE9")+"")&&oe(v,g),h[3]?E?E.p(h,y):(E=qt(h),E.c(),E.m(a,null)):E&&(E.d(1),E=null)},i(h){p||($e(i.$$.fragment,h),$e(u.$$.fragment,h),p=!0)},o(h){rn(i.$$.fragment,h),rn(u.$$.fragment,h),p=!1},d(h){h&&ge(n),e[12](null),ke(i),ke(u),E&&E.d(),A=!1,te(d)}}}function Po(e,n,t){let{app:r}=n,{settings:i}=n,{originalContent:l=""}=n,{combinedContent:o=""}=n,{defaultFileName:c="note-combinee.md"}=n,{checkFileExists:s=async()=>!1}=n,u,f="",a=me(se),m=me(Fn);async function g(){if(u){let p=r.workspace.getActiveFile();if(p){let A=await r.vault.read(p);t(8,o=await u.processMarkdown(A))}}}async function v(){let p=await An(c,s);t(3,f=`${a.save_success||"Fichier sauvegard\xE9 sous :"} ${p}`)}function w(p){Me[p?"unshift":"push"](()=>{u=p,t(2,u)})}return e.$$set=p=>{"app"in p&&t(0,r=p.app),"settings"in p&&t(1,i=p.settings),"originalContent"in p&&t(9,l=p.originalContent),"combinedContent"in p&&t(8,o=p.combinedContent),"defaultFileName"in p&&t(10,c=p.defaultFileName),"checkFileExists"in p&&t(11,s=p.checkFileExists)},se.subscribe(p=>t(4,a=p)),Fn.subscribe(p=>t(5,m=p)),[r,i,u,f,a,m,g,v,o,l,c,s,w]}var Cn=class extends ne{constructor(n){super(),_e(this,n,Po,Ro,ie,{app:0,settings:1,originalContent:9,combinedContent:8,defaultFileName:10,checkFileExists:11},$o)}},En=Cn;var kn={useHiddenEmbeds:!0};We();var Ge=class extends J.Plugin{settings=kn;view;async onload(){await this.loadSettings(),this.addSettingTab(new Sn(this.app,this)),this.addRibbonIcon("dice","Combine Notes",()=>{this.activateView()}),this.addCommand({id:"open-combiner-view",name:"Open Combiner",callback:()=>{this.activateView()}}),this.addCommand({id:"combine-active-note-to-file",name:"Combiner la note active (fichier)",callback:async()=>{let n=this.app.workspace.getActiveFile();if(!n){new J.Notice("Aucun fichier actif.");return}let t=await wn(this.app,n,this.settings),r=n.parent,i=n.basename+"-combined.md";await this.app.vault.create(r?r.path+"/"+i:i,t),new J.Notice("Fichier combin\xE9 cr\xE9\xE9 : "+i)}}),this.addCommand({id:"combine-active-note-direct",name:"Combiner la note active (direct)",icon:"combiner",callback:async()=>{let n=this.app.workspace.getActiveFile();if(!n){this.app.workspace.trigger("notice","Aucune note active");return}let{combineMarkdownNote:t}=await Promise.resolve().then(()=>(We(),Ut)),r=await t(this.app,n,this.settings),i=n.parent,l=n.basename+"-combined.md";await this.app.vault.create(i?i.path+"/"+l:l,r),this.app.workspace.trigger("notice","Fichier combin\xE9 cr\xE9\xE9 : "+l)}}),this.addCommand({id:"open-combiner-dom",name:"Ouvrir le combiner (s\xE9lection manuelle)",callback:()=>{let n=document.getElementById("combiner-debug-root");n?n.innerHTML="":(n=document.createElement("div"),n.id="combiner-debug-root",n.style.position="fixed",n.style.top="60px",n.style.right="20px",n.style.zIndex="9999",n.style.background="var(--background-primary)",n.style.border="1px solid var(--background-modifier-border)",n.style.borderRadius="8px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",n.style.padding="1rem",n.style.maxWidth="400px",document.body.appendChild(n)),new En({target:n,props:{app:this.app}})}})}async onunload(){this.view}activateView(){let n=this.app.workspace.getRightLeaf(!1);n&&n.view.containerEl.children[1]&&(this.view=new En({target:n.view.containerEl.children[1],props:{app:this.app,settings:this.settings}}),this.app.workspace.revealLeaf(n))}async loadSettings(){this.settings=Object.assign({},kn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}},Sn=class extends J.PluginSettingTab{plugin;constructor(n,t){super(n,t),this.plugin=t}display(){let{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"Settings for Combiner Plugin."}),new J.Setting(n).setName("Use Hidden Embeds").setDesc("If enabled, internal links to notes not already embedded will be added as hidden comment blocks.").addToggle(t=>t.setValue(this.plugin.settings.useHiddenEmbeds).onChange(async r=>{this.plugin.settings.useHiddenEmbeds=r,await this.plugin.saveSettings()}))}};
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/

/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Fe=Object.defineProperty;var ft=Object.getOwnPropertyDescriptor;var dt=Object.getOwnPropertyNames;var mt=Object.prototype.hasOwnProperty;var je=(t,e)=>()=>(t&&(e=t(t=0)),e);var Be=(t,e)=>{for(var n in e)Fe(t,n,{get:e[n],enumerable:!0})},ht=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of dt(e))!mt.call(t,s)&&s!==n&&Fe(t,s,{get:()=>e[s],enumerable:!(i=ft(e,s))||i.enumerable});return t};var pt=t=>ht(Fe({},"__esModule",{value:!0}),t);function Y(){}function Me(t){return t()}function Re(){return Object.create(null)}function V(t){t.forEach(Me)}function _e(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function We(t){return Object.keys(t).length===0}function _t(){He=!0}function gt(){He=!1}function r(t,e){t.appendChild(e)}function ce(t,e,n){let i=bt(t);if(!i.getElementById(e)){let s=b("style");s.id=e,s.textContent=n,vt(i,s)}}function bt(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function vt(t,e){return r(t.head||t,e),e.sheet}function G(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode&&t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function q(t){return document.createTextNode(t)}function N(){return q(" ")}function j(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ue(t){return function(e){return e.preventDefault(),t.call(this,e)}}function P(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wt(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function me(t,e){t.value=e??""}function R(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function de(t){De=t}function Ge(t,e){let n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}function kt(){Ee||(Ee=!0,yt.then(Xe))}function Se(t){le.push(t)}function Xe(){if(oe!==0)return;let t=De;do{try{for(;oe<re.length;){let e=re[oe];oe++,de(e),Ft(e.$$)}}catch(e){throw re.length=0,oe=0,e}for(de(null),re.length=0,oe=0;ge.length;)ge.pop()();for(let e=0;e<le.length;e+=1){let n=le[e];xe.has(n)||(xe.add(n),n())}le.length=0}while(re.length);for(;qe.length;)qe.pop()();Ee=!1,xe.clear(),de(t)}function Ft(t){if(t.fragment!==null){t.update(),V(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function xt(t){let e=[],n=[];le.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),le=e}function Ke(){se={r:0,c:[],p:se}}function Ye(){se.r||V(se.c),se=se.p}function ee(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function ae(t,e,n,i){if(t&&t.o){if(pe.has(t))return;pe.add(t),se.c.push(()=>{pe.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ve(t){t&&t.c()}function he(t,e,n,i){let{fragment:s,after_update:c}=t.$$;s&&s.m(e,n),i||Se(()=>{let o=t.$$.on_mount.map(Me).filter(_e);t.$$.on_destroy?t.$$.on_destroy.push(...o):V(o),t.$$.on_mount=[]}),c.forEach(Se)}function ue(t,e){let n=t.$$;n.fragment!==null&&(xt(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Et(t,e){t.$$.dirty[0]===-1&&(re.push(t),kt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function te(t,e,n,i,s,c,o,a=[-1]){let m=De;de(t);let d=t.$$={fragment:null,ctx:[],props:c,update:Y,not_equal:s,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(m?m.$$.context:[])),callbacks:Re(),dirty:a,skip_bound:!1,root:e.target||m.$$.root};o&&o(d.root);let g=!1;if(d.ctx=n?n(t,e.props||{},(v,A,...y)=>{let S=y.length?y[0]:A;return d.ctx&&s(d.ctx[v],d.ctx[v]=S)&&(!d.skip_bound&&d.bound[v]&&d.bound[v](S),g&&Et(t,v)),A}):[],d.update(),g=!0,V(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){_t();let v=wt(e.target);d.fragment&&d.fragment.l(v),v.forEach(z)}else d.fragment&&d.fragment.c();e.intro&&ee(t.$$.fragment),he(t,e.target,e.anchor,e.customElement),gt(),Xe()}de(m)}var ze,Ce,He,De,re,ge,le,qe,yt,Ee,xe,oe,pe,se,Ct,Xt,St,Q,fe=je(()=>{ze=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,Ce=class t{constructor(e){this.options=e,this._listeners="WeakMap"in ze?new WeakMap:void 0}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(n=>{var i;for(let s of n)t.entries.set(s.target,s),(i=this._listeners.get(s.target))===null||i===void 0||i(s)})}};Ce.entries="WeakMap"in ze?new WeakMap:void 0;He=!1;re=[],ge=[],le=[],qe=[],yt=Promise.resolve(),Ee=!1;xe=new Set,oe=0;pe=new Set;Ct=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Xt=new Set([...Ct]);typeof HTMLElement=="function"&&(St=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Me).filter(_e);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){V(this.$$.on_disconnect)}$destroy(){ue(this,1),this.$destroy=Y}$on(t,e){if(!_e(e))return Y;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!We(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});Q=class{$destroy(){ue(this,1),this.$destroy=Y}$on(e,n){if(!_e(n))return Y;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{let s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!We(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}});var Ve={};Be(Ve,{default:()=>Ae});function Mt(t){let e=[],n=0;return{text:t.replace(/\$\$([\s\S]*?)\$\$/g,(s,c)=>{let o=`__MATH_BLOCK_${n}__`;return e[n]=s,n++,o}),mathBlocks:e}}function Dt(t,e){let n=t;return e.forEach((i,s)=>{n=n.replace(`__MATH_BLOCK_${s}__`,i)}),n}function Tt(t,e,n){let{app:i}=e,{basePath:s=""}=e,{settings:c={}}=e,{config:o=null}=e,{combinedFileName:a=""}=e,m=new Set,d="",g=new Set,v={},A=new Set;function y(E,w){let k=[],l=[],F=w.split(`
`);for(let _ of F){let D=_.match(/^(#+)\s*(.*)$/);if(D){let T=D[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();k.push(T)}let u=_.match(/\^([\w-]+)$/);u&&l.push(u[1])}v[E.toLowerCase()]={file:E,sections:k,blocks:l}}async function S(E){let w=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=E,l;for(;(l=w.exec(E))!==null;){let F=l[0],_=l[1].trim(),D=l[2],u=l[3],T=l[4],f=l[5];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(_)){let C=`%% EMBED IMAGE: ${_} %%
`;k=k.replace(F,C+F);continue}if(!m.has(_)){m.add(_),g.add(_.toLowerCase());try{let C=i.metadataCache.getFirstLinkpathDest(_,"");if(C){let h=await i.vault.read(C);(!h||h.trim()==="")&&(h=`<!-- Contenu vide ou non trouv\xE9 pour '${_}' -->`);let p=h;y(_,p),p=await $(p,C.parent?.path||"");let x=`^${_.replace(/_/g,"-")}`,I=`%% EMBED START: [${_}] %% ${x}
`,X=`
%% EMBED END: ${_} %%`;k=k.replace(F,`
${I}${p}${X}`)}else k=k.replace(F,`![[${_}]]`)}catch{k=k.replace(F,`![[${_}]]`)}finally{m.delete(_)}}}return k}async function O(E){let w=/\[\[(?!\#)([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=E.split(`
`),l=!1,F=-1,_=[];for(let u=0;u<k.length;u++)/^(```|~~~)/.test(k[u].trim())&&(l?(l=!1,_.push({start:F,end:u})):(l=!0,F=u));let D=[];for(let u=0;u<k.length;u++){let T=k[u],f,C=!1;for(let h of _)if(u>=h.start&&u<=h.end){C=!0;break}if(C){D.push(T);continue}for(;(f=w.exec(T))!==null;){let h=f[0],p=f[1].trim(),x=f[2],I=f[3],X=f[4],U=f[5],ie=f[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(p))continue;let ye=v[p.toLowerCase()];if(ye){if(!x&&!X){let K=`^${p.replace(/_/g,"-")}`,J=ie||p;T=T.replace(h,`[[#${K}|${J}]]`);continue}if(x&&I){let K=I.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(ye.sections.includes(K)){let J=ie||I;T=T.replace(h,`[[#${K}|${J}]]`);continue}}if(X&&U){let K="^"+U.replace(/_/g,"-");if(ye.blocks.includes(U.replace(/_/g,"-"))){let J=ie||U;T=T.replace(h,`[[#${K}|${J}]]`);continue}}}if(c.useHiddenEmbeds&&!g.has(p.toLowerCase())&&!A.has(p.toLowerCase()))try{let K=i.metadataCache.getFirstLinkpathDest(p,"");if(K){let J=await i.vault.read(K);(!J||J.trim()==="")&&(J=`<!-- Contenu vide ou non trouv\xE9 pour '${p}' -->`);let ut=`%%EMBED HIDDEN START: [[${p}]] 
${J}
EMBED HIDDEN END %%`;D.push(ut),A.add(p.toLowerCase())}}catch{}let ke=i.metadataCache.getFirstLinkpathDest(p,"");if(ke&&!ke.path.startsWith("http")&&!ke.path.startsWith("/")){let K=ie||p;T=T.replace(h,`[[${p}|${K}]]`)}else{let K=ie||p;T=T.replace(h,`[[${p}|${K}]]`)}}w.lastIndex=0,D.push(T)}return D.join(`
`)}async function L(E){let w=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,k=E,l;for(;(l=w.exec(E))!==null;){let F=l[0],_=l[1].trim(),D=l[2],u=l[3],T=l[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(_)&&(_=_.replace(/\.md$/i,""));try{let C=i.metadataCache.getFirstLinkpathDest(_,"");if(C){let p=`![[${C.path.replace(/\\/g,"/")}`;D&&u&&(p+=`#${u}`),T&&(p+=`|${T}`),p+="]]",k=k.replace(F,p)}else k=k.replace(F,`![[${_}]]`)}catch{k=k.replace(F,`![[${_}]]`)}}return k}async function $(E,w){let{text:k,mathBlocks:l}=Mt(E),F=k;return F=await S(F),F=await O(F),F=await L(F),F=F,Dt(F,l)}function M(E){return E.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(w,k,l,F)=>g.has(k.toLowerCase())?F?`[[#^${l}|${F}]]`:`[[#^${l}]]`:w)}async function B(E){d="Traitement des liens...",m.clear(),g.clear(),A.clear(),v={};try{let w=await $(E,s);return w=M(w),d="Traitement termin\xE9",w}catch(w){throw d="Erreur lors du traitement",w}}function W(){m.clear(),d="",g.clear(),A.clear(),v={}}return t.$$set=E=>{"app"in E&&n(0,i=E.app),"basePath"in E&&n(1,s=E.basePath),"settings"in E&&n(2,c=E.settings),"config"in E&&n(3,o=E.config),"combinedFileName"in E&&n(4,a=E.combinedFileName)},[i,s,c,o,a,B,W]}var Te,Ae,$e=je(()=>{fe();Te=class extends Q{constructor(e){super(),te(this,e,Tt,null,Z,{app:0,basePath:1,settings:2,config:3,combinedFileName:4,processMarkdown:5,resetState:6})}get processMarkdown(){return this.$$.ctx[5]}get resetState(){return this.$$.ctx[6]}},Ae=Te});var Ut={};Be(Ut,{default:()=>we});module.exports=pt(Ut);var ne=require("obsidian");fe();fe();$e();fe();function At(t){ce(t,"svelte-1mnh07d",".split-view.svelte-1mnh07d{display:flex;width:100%;height:100%}.pane.svelte-1mnh07d{flex:1;padding:1rem;overflow:auto;border-right:1px solid #ddd}.pane.svelte-1mnh07d:last-child{border-right:none}.pane-title.svelte-1mnh07d{font-weight:bold;margin-bottom:0.5rem}")}function $t(t){let e,n,i,s=(t[2]["splitview.original"]||"Original")+"",c,o,a,m,d,g,v,A=(t[2]["splitview.combined"]||"Combin\xE9")+"",y,S,O,L;return{c(){e=b("div"),n=b("div"),i=b("div"),c=q(s),o=N(),a=b("pre"),m=q(t[0]),d=N(),g=b("div"),v=b("div"),y=q(A),S=N(),O=b("pre"),L=q(t[1]),P(i,"class","pane-title svelte-1mnh07d"),P(n,"class","pane svelte-1mnh07d"),P(v,"class","pane-title svelte-1mnh07d"),P(g,"class","pane svelte-1mnh07d"),P(e,"class","split-view svelte-1mnh07d")},m($,M){G($,e,M),r(e,n),r(n,i),r(i,c),r(n,o),r(n,a),r(a,m),r(e,d),r(e,g),r(g,v),r(v,y),r(g,S),r(g,O),r(O,L)},p($,[M]){M&4&&s!==(s=($[2]["splitview.original"]||"Original")+"")&&H(c,s),M&1&&H(m,$[0]),M&4&&A!==(A=($[2]["splitview.combined"]||"Combin\xE9")+"")&&H(y,A),M&2&&H(L,$[1])},i:Y,o:Y,d($){$&&z(e)}}}function Nt(t,e,n){let{original:i=""}=e,{combined:s=""}=e,{uiTexts:c={}}=e;return t.$$set=o=>{"original"in o&&n(0,i=o.original),"combined"in o&&n(1,s=o.combined),"uiTexts"in o&&n(2,c=o.uiTexts)},[i,s,c]}var Ne=class extends Q{constructor(e){super(),te(this,e,Nt,$t,Z,{original:0,combined:1,uiTexts:2},At)}},Je=Ne;fe();function Lt(t){ce(t,"svelte-19bpims",".manual-ui.svelte-19bpims.svelte-19bpims{border:1px solid #ccc;border-radius:8px;padding:1rem;margin-bottom:1rem;background:var(--background-secondary);max-width:600px;width:100%}.file-list.svelte-19bpims.svelte-19bpims{display:flex;flex-direction:column;gap:0.5rem;margin-bottom:1rem}.file-item.svelte-19bpims.svelte-19bpims{display:flex;align-items:center;background:var(--background-primary);border:1px solid #ddd;border-radius:4px;padding:0.5rem;cursor:grab;user-select:none}.file-item.dragging.svelte-19bpims.svelte-19bpims{opacity:0.5}.file-item.svelte-19bpims .remove.svelte-19bpims{margin-left:auto;color:#c00;cursor:pointer}.drag-area.svelte-19bpims.svelte-19bpims{border:2px dashed #888;border-radius:6px;padding:1rem;text-align:center;margin-bottom:1rem;background:#f8f8f8}.name-field.svelte-19bpims.svelte-19bpims{margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}.preview-modal.svelte-19bpims.svelte-19bpims{position:fixed;top:10%;left:50%;transform:translateX(-50%);background:#222;color:#fff;border-radius:8px;padding:2rem;z-index:10000;max-width:80vw;max-height:80vh;overflow:auto;box-shadow:0 4px 24px rgba(0,0,0,0.3)}@media(max-width: 700px){.manual-ui.svelte-19bpims.svelte-19bpims{max-width:98vw;padding:0.5rem}.preview-modal.svelte-19bpims.svelte-19bpims{max-width:98vw;padding:1rem}}.search-field.svelte-19bpims.svelte-19bpims{margin-bottom:1rem}.search-results.svelte-19bpims.svelte-19bpims{background:#fff;border:1px solid #ccc;border-radius:4px;max-height:120px;overflow-y:auto}.search-results.svelte-19bpims div.svelte-19bpims{padding:0.3rem 0.7rem;cursor:pointer}.search-results.svelte-19bpims div.svelte-19bpims:hover{background:#eee}")}function Qe(t,e,n){let i=t.slice();return i[29]=e[n],i[31]=n,i}function Ze(t,e,n){let i=t.slice();return i[32]=e[n],i[31]=n,i}function et(t,e,n){let i=t.slice();return i[34]=e[n],i}function tt(t){let e,n=t[4],i=[];for(let s=0;s<n.length;s+=1)i[s]=nt(et(t,n,s));return{c(){e=b("div");for(let s=0;s<i.length;s+=1)i[s].c();P(e,"class","search-results svelte-19bpims")},m(s,c){G(s,e,c);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(s,c){if(c[0]&131088){n=s[4];let o;for(o=0;o<n.length;o+=1){let a=et(s,n,o);i[o]?i[o].p(a,c):(i[o]=nt(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(s){s&&z(e),be(i,s)}}}function nt(t){let e,n=t[34].name+"",i,s,c;function o(){return t[21](t[34])}return{c(){e=b("div"),i=q(n),P(e,"class","svelte-19bpims")},m(a,m){G(a,e,m),r(e,i),s||(c=j(e,"click",o),s=!0)},p(a,m){t=a,m[0]&16&&n!==(n=t[34].name+"")&&H(i,n)},d(a){a&&z(e),s=!1,c()}}}function Pt(t){let e,n,i;function s(){return t[23](t[31])}return{c(){e=b("button"),e.textContent="\u2191"},m(c,o){G(c,e,o),n||(i=j(e,"click",s),n=!0)},p(c,o){t=c},d(c){c&&z(e),n=!1,i()}}}function It(t){let e,n,i;function s(){return t[24](t[31])}return{c(){e=b("button"),e.textContent="\u2193"},m(c,o){G(c,e,o),n||(i=j(e,"click",s),n=!0)},p(c,o){t=c},d(c){c&&z(e),n=!1,i()}}}function it(t){let e,n,i=t[32].name+"",s,c,o,a,m,d,g,v;function A(){return t[22](t[31])}let y=t[31]>0&&Pt(t),S=t[31]<t[6].length-1&&It(t);function O(){return t[25](t[31])}function L(){return t[26](t[31])}return{c(){e=b("div"),n=b("span"),s=q(i),c=N(),o=b("span"),o.textContent="\u2716",a=N(),y&&y.c(),m=N(),S&&S.c(),P(o,"class","remove svelte-19bpims"),P(e,"class",d="file-item "+(t[5]===t[31]?"dragging":"")+" svelte-19bpims"),P(e,"draggable","true")},m($,M){G($,e,M),r(e,n),r(n,s),r(e,c),r(e,o),r(e,a),y&&y.m(e,null),r(e,m),S&&S.m(e,null),g||(v=[j(o,"click",A),j(e,"dragstart",O),j(e,"dragend",t[12]),j(e,"drop",L),j(e,"dragover",Ue(t[19]))],g=!0)},p($,M){t=$,t[31]>0&&y.p(t,M),t[31]<t[6].length-1&&S.p(t,M),M[0]&32&&d!==(d="file-item "+(t[5]===t[31]?"dragging":"")+" svelte-19bpims")&&P(e,"class",d)},d($){$&&z(e),y&&y.d(),S&&S.d(),g=!1,V(v)}}}function st(t){let e,n,i=t[29]+"",s,c,o,a,m,d,g;function v(){return t[27](t[31])}return{c(){e=b("div"),n=b("span"),s=q(i),c=q(" (externe)"),o=N(),a=b("span"),a.textContent="\u2716",m=N(),P(a,"class","remove svelte-19bpims"),P(e,"class","file-item svelte-19bpims")},m(A,y){G(A,e,y),r(e,n),r(n,s),r(n,c),r(e,o),r(e,a),r(e,m),d||(g=j(a,"click",v),d=!0)},p(A,y){t=A},d(A){A&&z(e),d=!1,g()}}}function ot(t){let e,n,i,s,c,o,a;return{c(){e=b("div"),n=b("button"),n.textContent="\u2716",i=N(),s=b("pre"),c=q(t[1]),R(n,"position","absolute"),R(n,"top","1rem"),R(n,"right","1rem"),P(e,"class","preview-modal svelte-19bpims")},m(m,d){G(m,e,d),r(e,n),r(e,i),r(e,s),r(s,c),o||(a=j(n,"click",t[15]),o=!0)},p(m,d){d[0]&2&&H(c,m[1])},d(m){m&&z(e),o=!1,a()}}}function jt(t){let e,n,i,s,c,o,a,m,d,g,v,A,y,S,O,L,$,M,B,W,E,w=t[4].length>0&&tt(t),k=t[6],l=[];for(let u=0;u<k.length;u+=1)l[u]=it(Ze(t,k,u));let F=t[7],_=[];for(let u=0;u<F.length;u+=1)_[u]=st(Qe(t,F,u));let D=t[2]&&ot(t);return{c(){e=b("div"),n=b("h2"),n.textContent="Combinaison manuelle",i=N(),s=b("div"),s.textContent="Glisser-d\xE9poser des fichiers markdown ici (depuis Obsidian ou l'ext\xE9rieur)",c=N(),o=b("div"),a=b("input"),m=N(),w&&w.c(),d=N(),g=b("div");for(let u=0;u<l.length;u+=1)l[u].c();v=N();for(let u=0;u<_.length;u+=1)_[u].c();A=N(),y=b("div"),S=b("label"),S.textContent="Nom du fichier combin\xE9 :",O=N(),L=b("input"),$=N(),M=b("button"),M.textContent="Aper\xE7u",B=N(),D&&D.c(),P(s,"class","drag-area svelte-19bpims"),P(a,"type","text"),P(a,"placeholder","Rechercher un fichier dans le vault..."),P(o,"class","search-field svelte-19bpims"),P(g,"class","file-list svelte-19bpims"),P(L,"type","text"),R(L,"flex","1"),P(y,"class","name-field svelte-19bpims"),P(e,"class","manual-ui svelte-19bpims")},m(u,T){G(u,e,T),r(e,n),r(e,i),r(e,s),r(e,c),r(e,o),r(o,a),me(a,t[3]),r(o,m),w&&w.m(o,null),r(e,d),r(e,g);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(g,null);r(g,v);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(g,null);r(e,A),r(e,y),r(y,S),r(y,O),r(y,L),me(L,t[0]),r(e,$),r(e,M),r(e,B),D&&D.m(e,null),W||(E=[j(s,"drop",t[8]),j(s,"dragover",Bt),j(a,"input",t[20]),j(a,"input",t[16]),j(L,"input",t[28]),j(M,"click",t[14])],W=!0)},p(u,T){if(T[0]&8&&a.value!==u[3]&&me(a,u[3]),u[4].length>0?w?w.p(u,T):(w=tt(u),w.c(),w.m(o,null)):w&&(w.d(1),w=null),T[0]&15968){k=u[6];let f;for(f=0;f<k.length;f+=1){let C=Ze(u,k,f);l[f]?l[f].p(C,T):(l[f]=it(C),l[f].c(),l[f].m(g,v))}for(;f<l.length;f+=1)l[f].d(1);l.length=k.length}if(T[0]&128){F=u[7];let f;for(f=0;f<F.length;f+=1){let C=Qe(u,F,f);_[f]?_[f].p(C,T):(_[f]=st(C),_[f].c(),_[f].m(g,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=F.length}T[0]&1&&L.value!==u[0]&&me(L,u[0]),u[2]?D?D.p(u,T):(D=ot(u),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},i:Y,o:Y,d(u){u&&z(e),w&&w.d(),be(l,u),be(_,u),D&&D.d(),W=!1,V(E)}}}function Bt(t){t.preventDefault()}function Rt(t,e,n){let{app:i}=e,s=[],c=[],o="notes-combinees.md",a="",m=!1,d="",g=[],v=null;function A(h){h.preventDefault();let p=h.dataTransfer?.items;if(p)for(let x=0;x<p.length;x++){let I=p[x];if(I.kind==="file"){let X=I.getAsFile();X&&X.name.endsWith(".md")&&c.push(X.name)}else I.kind==="string"&&I.getAsString(async X=>{let U=i.vault.getAbstractFileByPath(X);U&&"extension"in U&&U.extension==="md"&&(s.find(ie=>ie.path===U.path)||s.push(U))})}}function y(h,p){if(h===p)return;let x=s.splice(h,1)[0];s.splice(p,0,x)}function S(h){s.splice(h,1)}function O(h){n(5,v=h)}function L(){n(5,v=null)}function $(h){v!==null&&v!==h&&(y(v,h),n(5,v=null))}async function M(){n(1,a="");for(let h of s){let p=await i.vault.read(h);n(1,a+=`
---
# ${h.name}
`+p)}n(2,m=!0)}function B(){n(2,m=!1)}function W(){if(!d.trim()){n(4,g=[]);return}let h=i.vault.getMarkdownFiles();n(4,g=h.filter(p=>p.name.toLowerCase().includes(d.trim().toLowerCase())&&!s.find(x=>x.path===p.path)))}function E(h){s.push(h),n(3,d=""),n(4,g=[])}function w(h){Ge.call(this,t,h)}function k(){d=this.value,n(3,d)}let l=h=>E(h),F=h=>S(h),_=h=>y(h,h-1),D=h=>y(h,h+1),u=h=>O(h),T=h=>$(h),f=h=>c.splice(h,1);function C(){o=this.value,n(0,o)}return t.$$set=h=>{"app"in h&&n(18,i=h.app)},[o,a,m,d,g,v,s,c,A,y,S,O,L,$,M,B,W,E,i,w,k,l,F,_,D,u,T,f,C]}var Oe=class extends Q{constructor(e){super(),te(this,e,Rt,jt,Z,{app:18},Lt,[-1,-1])}},rt=Oe;function qt(t){ce(t,"svelte-17qd2dm",".combiner-app.svelte-17qd2dm{padding:1rem}.settings-panel.svelte-17qd2dm{background:var(--background-secondary)}")}function lt(t){let e,n,i=(t[7]["settings.title"]||"Param\xE8tres")+"",s,c,o,a,m,d,g=(t[7]["settings.hidden_embeds"]||"Utiliser les embeds cach\xE9s")+"",v,A,y,S=(t[7]["settings.hidden_embeds_desc"]||"Inclure le contenu des liens dans des blocs cach\xE9s %%...%%")+"",O,L,$;return{c(){e=b("div"),n=b("h3"),s=q(i),c=N(),o=b("div"),a=b("label"),m=b("input"),d=N(),v=q(g),A=N(),y=b("div"),O=q(S),P(m,"type","checkbox"),R(y,"font-size","0.8em"),R(y,"color","#666"),R(y,"margin-top","0.25rem"),R(o,"margin-bottom","0.5rem"),P(e,"class","settings-panel svelte-17qd2dm"),R(e,"border","1px solid #ccc"),R(e,"padding","1rem"),R(e,"margin-bottom","1rem"),R(e,"border-radius","4px")},m(M,B){G(M,e,B),r(e,n),r(n,s),r(e,c),r(e,o),r(o,a),r(a,m),m.checked=t[8].useHiddenEmbeds,r(a,d),r(a,v),r(o,A),r(o,y),r(y,O),L||($=j(m,"change",t[18]),L=!0)},p(M,B){B&128&&i!==(i=(M[7]["settings.title"]||"Param\xE8tres")+"")&&H(s,i),B&256&&(m.checked=M[8].useHiddenEmbeds),B&128&&g!==(g=(M[7]["settings.hidden_embeds"]||"Utiliser les embeds cach\xE9s")+"")&&H(v,g),B&128&&S!==(S=(M[7]["settings.hidden_embeds_desc"]||"Inclure le contenu des liens dans des blocs cach\xE9s %%...%%")+"")&&H(O,S)},d(M){M&&z(e),L=!1,$()}}}function ct(t){let e,n;return e=new rt({props:{app:t[2]}}),{c(){ve(e.$$.fragment)},m(i,s){he(e,i,s),n=!0},p(i,s){let c={};s&4&&(c.app=i[2]),e.$set(c)},i(i){n||(ee(e.$$.fragment,i),n=!0)},o(i){ae(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function at(t){let e,n;return{c(){e=b("span"),n=q(t[4])},m(i,s){G(i,e,s),r(e,n)},p(i,s){s&16&&H(n,i[4])},d(i){i&&z(e)}}}function Wt(t){let e,n,i,s,c,o=(t[5]?t[7]["manual_ui.close"]||"Fermer la combinaison manuelle":t[7]["manual_ui.title"]||"Combinaison manuelle avanc\xE9e")+"",a,m,d,g=t[6]?"Fermer les param\xE8tres":"\u2699\uFE0F Param\xE8tres",v,A,y,S,O,L,$,M,B,W,E,w,k,l=(t[7].save_button||"\u{1F4BE} Sauvegarder le combin\xE9")+"",F,_,D,u,T,f=t[6]&&lt(t),C=t[5]&&ct(t),h={app:t[2],settings:t[8],basePath:"",config:null,combinedFileName:""};O=new Ae({props:h}),t[19](O),W=new Je({props:{original:t[0],combined:t[1],uiTexts:t[7]}});let p=t[4]&&at(t);return{c(){e=b("div"),n=b("h1"),n.textContent="Markdown Combiner",i=N(),s=b("div"),c=b("button"),a=q(o),m=N(),d=b("button"),v=q(g),A=N(),f&&f.c(),y=N(),C&&C.c(),S=N(),ve(O.$$.fragment),L=N(),$=b("button"),$.textContent="Combine Active Note",M=N(),B=b("div"),ve(W.$$.fragment),E=N(),w=b("div"),k=b("button"),F=q(l),_=N(),p&&p.c(),R(s,"margin-bottom","1rem"),R(s,"display","flex"),R(s,"gap","0.5rem"),R(w,"margin-top","1rem"),R(w,"display","flex"),R(w,"align-items","center"),R(w,"gap","1rem"),P(e,"class","combiner-app svelte-17qd2dm")},m(x,I){G(x,e,I),r(e,n),r(e,i),r(e,s),r(s,c),r(c,a),r(s,m),r(s,d),r(d,v),r(e,A),f&&f.m(e,null),r(e,y),C&&C.m(e,null),r(e,S),he(O,e,null),r(e,L),r(e,$),r(e,M),r(e,B),he(W,B,null),r(B,E),r(B,w),r(w,k),r(k,F),r(w,_),p&&p.m(w,null),D=!0,u||(T=[j(c,"click",t[16]),j(d,"click",t[17]),j($,"click",t[9]),j(k,"click",t[10])],u=!0)},p(x,[I]){(!D||I&160)&&o!==(o=(x[5]?x[7]["manual_ui.close"]||"Fermer la combinaison manuelle":x[7]["manual_ui.title"]||"Combinaison manuelle avanc\xE9e")+"")&&H(a,o),(!D||I&64)&&g!==(g=x[6]?"Fermer les param\xE8tres":"\u2699\uFE0F Param\xE8tres")&&H(v,g),x[6]?f?f.p(x,I):(f=lt(x),f.c(),f.m(e,y)):f&&(f.d(1),f=null),x[5]?C?(C.p(x,I),I&32&&ee(C,1)):(C=ct(x),C.c(),ee(C,1),C.m(e,S)):C&&(Ke(),ae(C,1,1,()=>{C=null}),Ye());let X={};I&4&&(X.app=x[2]),I&256&&(X.settings=x[8]),O.$set(X);let U={};I&1&&(U.original=x[0]),I&2&&(U.combined=x[1]),I&128&&(U.uiTexts=x[7]),W.$set(U),(!D||I&128)&&l!==(l=(x[7].save_button||"\u{1F4BE} Sauvegarder le combin\xE9")+"")&&H(F,l),x[4]?p?p.p(x,I):(p=at(x),p.c(),p.m(w,null)):p&&(p.d(1),p=null)},i(x){D||(ee(C),ee(O.$$.fragment,x),ee(W.$$.fragment,x),D=!0)},o(x){ae(C),ae(O.$$.fragment,x),ae(W.$$.fragment,x),D=!1},d(x){x&&z(e),f&&f.d(),C&&C.d(),t[19](null),ue(O),ue(W),p&&p.d(),u=!1,V(T)}}}async function zt(t,e){let n=t,i=1;for(;await e(n);){let s=t.replace(/\.[^/.]+$/,""),c=t.match(/\.[^/.]+$/)?.[0]||"";n=`${s}_${i}${c}`,i++}return n}function Ht(t,e,n){let{app:i}=e,{plugin:s}=e,{isDebug:c=!1}=e,{settings:o={}}=e,{originalContent:a=""}=e,{combinedContent:m=""}=e,{defaultFileName:d="note-combinee.md"}=e,{checkFileExists:g=async()=>!1}=e,v,A="",y=!1,S=!1,O={},L={useHiddenEmbeds:!0};async function $(){try{n(7,O={"splitview.original":"Original","splitview.combined":"Combin\xE9",save_button:"\u{1F4BE} Sauvegarder le combin\xE9",save_success:"Fichier sauvegard\xE9 sous :","settings.title":"Param\xE8tres","settings.hidden_embeds":"Utiliser les embeds cach\xE9s","settings.hidden_embeds_desc":"Inclure le contenu des liens dans des blocs cach\xE9s %%...%%","manual_ui.title":"Combinaison manuelle avanc\xE9e","manual_ui.close":"Fermer la combinaison manuelle"})}catch(l){console.error("Erreur de chargement des textes UI:",l),n(7,O={"splitview.original":"Original","splitview.combined":"Combin\xE9",save_button:"\u{1F4BE} Sauvegarder le combin\xE9",save_success:"Fichier sauvegard\xE9 sous :"})}}async function M(){if(console.log("handleCombine called"),v){console.log("markdownProcessor found");let l=i.workspace.getActiveFile();if(l){console.log("Active file:",l.name);let F=await i.vault.read(l);console.log("Content length:",F.length),n(0,a=F);try{n(1,m=await v.processMarkdown(F)),console.log("Combined content length:",m.length)}catch(_){console.error("Error processing markdown:",_),n(1,m="Erreur lors du traitement: "+_.message)}}else console.log("No active file"),n(1,m="Aucun fichier actif trouv\xE9")}else console.log("markdownProcessor not found"),n(1,m="Processeur Markdown non initialis\xE9")}async function B(){let l=await zt(d,g);n(4,A=`${O.save_success||"Fichier sauvegard\xE9 sous :"} ${l}`)}let W=()=>n(5,y=!y),E=()=>n(6,S=!S);function w(){L.useHiddenEmbeds=this.checked,n(8,L)}function k(l){ge[l?"unshift":"push"](()=>{v=l,n(3,v)})}return t.$$set=l=>{"app"in l&&n(2,i=l.app),"plugin"in l&&n(11,s=l.plugin),"isDebug"in l&&n(12,c=l.isDebug),"settings"in l&&n(13,o=l.settings),"originalContent"in l&&n(0,a=l.originalContent),"combinedContent"in l&&n(1,m=l.combinedContent),"defaultFileName"in l&&n(14,d=l.defaultFileName),"checkFileExists"in l&&n(15,g=l.checkFileExists)},[a,m,i,v,A,y,S,O,L,M,B,s,c,o,d,g,W,E,w,k]}var Le=class extends Q{constructor(e){super(),te(this,e,Ht,Wt,Z,{app:2,plugin:11,isDebug:12,settings:13,originalContent:0,combinedContent:1,defaultFileName:14,checkFileExists:15},qt)}},Pe=Le;var we=class extends ne.Plugin{async onload(){console.log("Loading Combiner Plugin"),this.addCommand({id:"combiner-notes",name:"Combiner les notes",callback:()=>{this.openCombinerModal()}}),this.addCommand({id:"combiner-debug",name:"Debug Combiner",callback:()=>{this.debugCombiner()}}),this.addCommand({id:"combiner-active-note",name:"Combiner la note active",callback:()=>{this.combineActiveNote()}}),this.addRibbonIcon("link","Combiner les notes",e=>{this.openCombinerModal()})}onunload(){console.log("Unloading Combiner Plugin")}openCombinerModal(){new Ie(this.app,this).open()}debugCombiner(){let e=document.createElement("div");e.id="combiner-debug-container",e.style.cssText=`
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 10000;
			background: white;
			border: 2px solid #ccc;
			border-radius: 8px;
			padding: 20px;
			max-width: 80vw;
			max-height: 80vh;
			overflow: auto;
		`,document.body.appendChild(e),new Pe({target:e,props:{app:this.app,plugin:this,isDebug:!0}})}async combineActiveNote(){let e=this.app.workspace.getActiveFile();if(!e){new ne.Notice("Aucun fichier actif");return}try{let n=document.createElement("div");document.body.appendChild(n);let i=new(await Promise.resolve().then(()=>($e(),Ve))).default({target:n,props:{app:this.app,settings:{},basePath:"",config:null,combinedFileName:""}}),s=await this.app.vault.read(e),c=await i.processMarkdown(s),a=e.basename+"-combined.md",m=1;for(;await this.app.vault.adapter.exists(a);)a=`${e.basename}-combined-${m}.md`,m++;await this.app.vault.create(a,c),i.$destroy(),document.body.removeChild(n),new ne.Notice(`Fichier combin\xE9 cr\xE9\xE9 : ${a}`);let d=this.app.vault.getAbstractFileByPath(a);d&&this.app.workspace.getLeaf().openFile(d)}catch(n){console.error("Erreur lors de la combinaison:",n),new ne.Notice("Erreur lors de la combinaison: "+n.message)}}},Ie=class extends ne.Modal{constructor(e,n){super(e),this.plugin=n,this.component=null}open(){super.open(),this.containerEl.addClass("combiner-modal"),this.component=new Pe({target:this.contentEl,props:{app:this.app,plugin:this.plugin,isDebug:!1}})}onClose(){this.component&&this.component.$destroy()}};

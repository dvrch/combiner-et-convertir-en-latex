/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var cn=Object.defineProperty;var Ii=Object.getOwnPropertyDescriptor;var $i=Object.getOwnPropertyNames;var Mi=Object.prototype.hasOwnProperty;var Ni=(e,n)=>()=>(e&&(n=e(e=0)),n);var Bn=(e,n)=>{for(var t in n)cn(e,t,{get:n[t],enumerable:!0})},Di=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of $i(n))!Mi.call(e,r)&&r!==t&&cn(e,r,{get:()=>n[r],enumerable:!(i=Ii(n,r))||i.enumerable});return e};var Ri=e=>Di(cn({},"__esModule",{value:!0}),e);var nt={};Bn(nt,{combineMarkdownNote:()=>mn,getUniqueFileName:()=>pe});async function mn(e,n,t){let i=new Set,r=new Set,l=new Set,o={};function c(C,S){let h=[],N=[],T=S.split(`
`);for(let g of T){let L=g.match(/^(#+)\s*(.*)$/);if(L){let d=L[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();h.push(d)}let _=g.match(/\^([\w-]+)$/);_&&N.push(_[1])}o[C.toLowerCase()]={file:C,sections:h,blocks:N}}async function s(C){let S=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,h=C,N;for(;(N=S.exec(C))!==null;){let T=N[0],g=N[1].trim();if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(g)){let L=`%% EMBED IMAGE: ${g} %%
`;h=h.replace(T,L+T);continue}if(!i.has(g)){i.add(g),r.add(g.toLowerCase());try{let L=e.metadataCache.getFirstLinkpathDest(g,"");if(L){let _=await e.vault.read(L);(!_||_.trim()==="")&&(_=`<!-- Contenu vide ou non trouv\xE9 pour '${g}' -->`),c(g,_);let d=await p(_,L.parent?.path||""),x=`^${g.replace(/_/g,"-")}`,F=`%% EMBED START: [[${g}]] %% ${x}
`,D=`
%% EMBED END: [[${g}]] %%`;h=h.replace(T,F+d+D)}else h=h.replace(T,`![[${g}]]`)}catch{h=h.replace(T,`![[${g}]]`)}finally{i.delete(g)}}}return h}async function a(C){let S=/\[\[([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,h=C.split(`
`),N=!1,T=-1,g=[];for(let _=0;_<h.length;_++)/^(```|~~~)/.test(h[_].trim())&&(N?(N=!1,g.push({start:T,end:_})):(N=!0,T=_));let L=[];for(let _=0;_<h.length;_++){let d=h[_],x,F=!1;for(let D of g)if(_>=D.start&&_<=D.end){F=!0;break}if(F){L.push(d);continue}for(;(x=S.exec(d))!==null;){let D=x[0],w=x[1].trim(),O=x[2],B=x[3],q=x[4],$=x[5],A=x[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(w))continue;let R=o[w.toLowerCase()];if(R){if(!O&&!q){let j=`^${w.replace(/_/g,"-")}`,k=A||w;d=d.replace(D,`[[#${j}|${k}]]`);continue}if(O&&B){let j=B.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(R.sections.includes(j)){let k=A||B;d=d.replace(D,`[[#${j}|${k}]]`);continue}}if(q&&$){let j="^"+$.replace(/_/g,"-");if(R.blocks.includes($.replace(/_/g,"-"))){let k=A||$;d=d.replace(D,`[[#${j}|${k}]]`);continue}}}if(t.useHiddenEmbeds&&!r.has(w.toLowerCase())&&!l.has(w.toLowerCase()))try{let j=e.metadataCache.getFirstLinkpathDest(w,"");if(j){let k=await e.vault.read(j);(!k||k.trim()==="")&&(k=`<!-- Contenu vide ou non trouv\xE9 pour '${w}' -->`);let K=`%%EMBED HIDDEN START: [[${w}]] 
${k}
EMBED HIDDEN END %%`;L.push(K),l.add(w.toLowerCase())}}catch{}let E=e.metadataCache.getFirstLinkpathDest(w,"");if(E&&!E.path.startsWith("http")&&!E.path.startsWith("/")){let j=A||w;d=d.replace(D,`[[${w}|${j}]]`)}else{let j=A||w;d=d.replace(D,`[[${w}|${j}]]`)}}S.lastIndex=0,L.push(d)}return L.join(`
`)}async function m(C){let S=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,h=C,N;for(;(N=S.exec(C))!==null;){let T=N[0],g=N[1].trim(),L=N[2],_=N[3],d=N[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(g)&&(g=g.replace(/\.md$/i,""));try{let F=e.metadataCache.getFirstLinkpathDest(g,"");if(F){let w=`![[${F.path.replace(/\\/g,"/")}`;L&&_&&(w+=`#${_}`),d&&(w+=`|${d}`),w+="]]",h=h.replace(T,w)}else h=h.replace(T,`![[${g}]]`)}catch{}}return h}function u(C){return C}async function p(C,S){let h=C;return h=await s(h),h=await a(h),h=await m(h),h=h,h}function f(C){return C.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(S,h,N,T)=>r.has(h.toLowerCase())?T?`[[#^${N}|${T}]]`:`[[#^${N}]]`:S)}let y=await e.vault.read(n),v=await p(y,n.parent?.path||"");return v=f(v),v}async function pe(e,n){let t=e.lastIndexOf("."),i=t!==-1?e.slice(0,t):e,r=t!==-1?e.slice(t):"",l=e,o=1;for(;await n(l);)l=`${i} (${o})${r}`,o++;return l}var sc,je=Ni(()=>{"use strict";sc=require("obsidian")});var Yl={};Bn(Yl,{default:()=>rn});module.exports=Ri(Yl);var ge=require("obsidian");function ue(){}function pn(e){return e()}function Hn(){return Object.create(null)}function te(e){e.forEach(pn)}function Ge(e){return typeof e=="function"}function oe(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function qn(e){return Object.keys(e).length===0}var Yn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,an=class e{constructor(n){this.options=n,this._listeners="WeakMap"in Yn?new WeakMap:void 0}observe(n,t){return this._listeners.set(n,t),this._getObserver().observe(n,this.options),()=>{this._listeners.delete(n),this._observer.unobserve(n)}}_getObserver(){var n;return(n=this._observer)!==null&&n!==void 0?n:this._observer=new ResizeObserver(t=>{var i;for(let r of t)e.entries.set(r.target,r),(i=this._listeners.get(r.target))===null||i===void 0||i(r)})}};an.entries="WeakMap"in Yn?new WeakMap:void 0;var Un=!1;function ji(){Un=!0}function Pi(){Un=!1}function b(e,n){e.appendChild(n)}function Ae(e,n,t){let i=Bi(e);if(!i.getElementById(n)){let r=M("style");r.id=n,r.textContent=t,Hi(i,r)}}function Bi(e){if(!e)return document;let n=e.getRootNode?e.getRootNode():e.ownerDocument;return n&&n.host?n:e.ownerDocument}function Hi(e,n){return b(e.head||e,n),n.sheet}function J(e,n,t){e.insertBefore(n,t||null)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function Ke(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function M(e){return document.createElement(e)}function Q(e){return document.createTextNode(e)}function P(){return Q(" ")}function Wn(){return Q("")}function Y(e,n,t,i){return e.addEventListener(n,t,i),()=>e.removeEventListener(n,t,i)}function Gn(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function H(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function qi(e){return Array.from(e.childNodes)}function fe(e,n){n=""+n,e.data!==n&&(e.data=n)}function Ee(e,n){e.value=n??""}function De(e,n,t,i){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,i?"important":"")}function Kn(e,n,t){e.classList[t?"add":"remove"](n)}function Yi(e,n,{bubbles:t=!1,cancelable:i=!1}={}){let r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t,i,n),r}var Ne;function Me(e){Ne=e}function Ui(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function Re(){let e=Ui();return(n,t,{cancelable:i=!1}={})=>{let r=e.$$.callbacks[n];if(r){let l=Yi(n,t,{cancelable:i});return r.slice().forEach(o=>{o.call(e,l)}),!l.defaultPrevented}return!0}}function zn(e,n){let t=e.$$.callbacks[n.type];t&&t.slice().forEach(i=>i.call(this,n))}var Ce=[];var be=[],Fe=[],un=[],Wi=Promise.resolve(),fn=!1;function Gi(){fn||(fn=!0,Wi.then(Qn))}function dn(e){Fe.push(e)}function Xn(e){un.push(e)}var sn=new Set,ke=0;function Qn(){if(ke!==0)return;let e=Ne;do{try{for(;ke<Ce.length;){let n=Ce[ke];ke++,Me(n),Ki(n.$$)}}catch(n){throw Ce.length=0,ke=0,n}for(Me(null),Ce.length=0,ke=0;be.length;)be.pop()();for(let n=0;n<Fe.length;n+=1){let t=Fe[n];sn.has(t)||(sn.add(t),t())}Fe.length=0}while(Ce.length);for(;un.length;)un.pop()();fn=!1,sn.clear(),Me(e)}function Ki(e){if(e.fragment!==null){e.update(),te(e.before_update);let n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(dn)}}function zi(e){let n=[],t=[];Fe.forEach(i=>e.indexOf(i)===-1?n.push(i):t.push(i)),t.forEach(i=>i()),Fe=n}var We=new Set,_e;function ze(){_e={r:0,c:[],p:_e}}function Xe(){_e.r||te(_e.c),_e=_e.p}function ee(e,n){e&&e.i&&(We.delete(e),e.i(n))}function le(e,n,t,i){if(e&&e.o){if(We.has(e))return;We.add(e),_e.c.push(()=>{We.delete(e),i&&(t&&e.d(1),i())}),e.o(n)}else i&&i()}function Vn(e,n){e.d(1),n.delete(e.key)}function Zn(e,n,t,i,r,l,o,c,s,a,m,u){let p=e.length,f=l.length,y=p,v={};for(;y--;)v[e[y].key]=y;let C=[],S=new Map,h=new Map,N=[];for(y=f;y--;){let _=u(r,l,y),d=t(_),x=o.get(d);x?i&&N.push(()=>x.p(_,n)):(x=a(d,_),x.c()),S.set(d,C[y]=x),d in v&&h.set(d,Math.abs(y-v[d]))}let T=new Set,g=new Set;function L(_){ee(_,1),_.m(c,m),o.set(_.key,_),m=_.first,f--}for(;p&&f;){let _=C[f-1],d=e[p-1],x=_.key,F=d.key;_===d?(m=_.first,p--,f--):S.has(F)?!o.has(x)||T.has(x)?L(_):g.has(F)?p--:h.get(x)>h.get(F)?(g.add(x),L(_)):(T.add(F),p--):(s(d,o),p--)}for(;p--;){let _=e[p];S.has(_.key)||s(_,o)}for(;f;)L(C[f-1]);return te(N),C}var Xi=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Wl=new Set([...Xi]);function Jn(e,n,t){let i=e.$$.props[n];i!==void 0&&(e.$$.bound[i]=t,t(e.$$.ctx[i]))}function Se(e){e&&e.c()}function ve(e,n,t,i){let{fragment:r,after_update:l}=e.$$;r&&r.m(n,t),i||dn(()=>{let o=e.$$.on_mount.map(pn).filter(Ge);e.$$.on_destroy?e.$$.on_destroy.push(...o):te(o),e.$$.on_mount=[]}),l.forEach(dn)}function de(e,n){let t=e.$$;t.fragment!==null&&(zi(t.after_update),te(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Qi(e,n){e.$$.dirty[0]===-1&&(Ce.push(e),Gi(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function ce(e,n,t,i,r,l,o,c=[-1]){let s=Ne;Me(e);let a=e.$$={fragment:null,ctx:[],props:l,update:ue,not_equal:r,bound:Hn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(s?s.$$.context:[])),callbacks:Hn(),dirty:c,skip_bound:!1,root:n.target||s.$$.root};o&&o(a.root);let m=!1;if(a.ctx=t?t(e,n.props||{},(u,p,...f)=>{let y=f.length?f[0]:p;return a.ctx&&r(a.ctx[u],a.ctx[u]=y)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](y),m&&Qi(e,u)),p}):[],a.update(),m=!0,te(a.before_update),a.fragment=i?i(a.ctx):!1,n.target){if(n.hydrate){ji();let u=qi(n.target);a.fragment&&a.fragment.l(u),u.forEach(X)}else a.fragment&&a.fragment.c();n.intro&&ee(e.$$.fragment),ve(e,n.target,n.anchor,n.customElement),Pi(),Qn()}Me(s)}var Vi;typeof HTMLElement=="function"&&(Vi=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(pn).filter(Ge);for(let n in this.$$.slotted)this.appendChild(this.$$.slotted[n])}attributeChangedCallback(e,n,t){this[e]=t}disconnectedCallback(){te(this.$$.on_disconnect)}$destroy(){de(this,1),this.$destroy=ue}$on(e,n){if(!Ge(n))return ue;let t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{let i=t.indexOf(n);i!==-1&&t.splice(i,1)}}$set(e){this.$$set&&!qn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var ie=class{$destroy(){de(this,1),this.$destroy=ue}$on(n,t){if(!Ge(t))return ue;let i=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return i.push(t),()=>{let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(n){this.$$set&&!qn(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}};var Rc=require("obsidian");var oc=require("obsidian");function Zi(e){let n=[],t=0;return{text:e.replace(/\$\$([\s\S]*?)\$\$/g,(r,l)=>{let o=`__MATH_BLOCK_${t}__`;return n[t]=r,t++,o}),mathBlocks:n}}function Ji(e,n){let t=e;return n.forEach((i,r)=>{t=t.replace(`__MATH_BLOCK_${r}__`,i)}),t}function er(e,n,t){let{app:i}=n,{basePath:r}=n,{settings:l}=n,{config:o=null}=n,{combinedFileName:c=""}=n,s=new Set,a="",m=new Set,u={},p=new Set;function f(g,L){let _=[],d=[],x=L.split(`
`);for(let F of x){let D=F.match(/^(#+)\s*(.*)$/);if(D){let O=D[2].trim().replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();_.push(O)}let w=F.match(/\^([\w-]+)$/);w&&d.push(w[1])}u[g.toLowerCase()]={file:g,sections:_,blocks:d}}async function y(g){let L=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=g,d;for(;(d=L.exec(g))!==null;){let x=d[0],F=d[1].trim(),D=d[2],w=d[3],O=d[4],B=d[5];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(F)){let q=`%% EMBED IMAGE: ${F} %%
`;_=_.replace(x,q+x);continue}if(!s.has(F)){s.add(F),m.add(F.toLowerCase());try{let q=i.metadataCache.getFirstLinkpathDest(F,"");if(q){let $=await i.vault.read(q);(!$||$.trim()==="")&&($=`<!-- Contenu vide ou non trouv\xE9 pour '${F}' -->`);let A=$;f(F,A),A=await S(A,q.parent?.path||"");let R=`^${F.replace(/_/g,"-")}`,E=`%% EMBED START: [[${F}]] %% ${R}
`,j=`
%% EMBED END: [[${F}]] %%`;_=_.replace(x,E+A+j)}else _=_.replace(x,`![[${F}]]`)}catch{_=_.replace(x,`![[${F}]]`)}finally{s.delete(F)}}}return _}async function v(g){let L=/\[\[(?!\#)([^\]#|^/]+)(?:(#)([^\]|]+))?(?:(\^)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=g.split(`
`),d=!1,x=-1,F=[];for(let w=0;w<_.length;w++)/^(```|~~~)/.test(_[w].trim())&&(d?(d=!1,F.push({start:x,end:w})):(d=!0,x=w));let D=[];for(let w=0;w<_.length;w++){let O=_[w],B,q=!1;for(let $ of F)if(w>=$.start&&w<=$.end){q=!0;break}if(q){D.push(O);continue}for(;(B=L.exec(O))!==null;){let $=B[0],A=B[1].trim(),R=B[2],E=B[3],j=B[4],k=B[5],K=B[6];if(/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(A))continue;let on=u[A.toLowerCase()];if(on){if(!R&&!j){let Z=`^${A.replace(/_/g,"-")}`,re=K||A;O=O.replace($,`[[#${Z}|${re}]]`);continue}if(R&&E){let Z=E.replace(/_/g,"-").replace(/\s+/g,"-").toLowerCase();if(on.sections.includes(Z)){let re=K||E;O=O.replace($,`[[#${Z}|${re}]]`);continue}}if(j&&k){let Z="^"+k.replace(/_/g,"-");if(on.blocks.includes(k.replace(/_/g,"-"))){let re=K||k;O=O.replace($,`[[#${Z}|${re}]]`);continue}}}if(l.useHiddenEmbeds&&!m.has(A.toLowerCase())&&!p.has(A.toLowerCase()))try{let Z=i.metadataCache.getFirstLinkpathDest(A,"");if(Z){let re=await i.vault.read(Z);(!re||re.trim()==="")&&(re=`<!-- Contenu vide ou non trouv\xE9 pour '${A}' -->`);let Oi=`%%EMBED HIDDEN START: [[${A}]] 
${re}
EMBED HIDDEN END %%`;D.push(Oi),p.add(A.toLowerCase())}}catch{}let ln=i.metadataCache.getFirstLinkpathDest(A,"");if(ln&&!ln.path.startsWith("http")&&!ln.path.startsWith("/")){let Z=K||A;O=O.replace($,`[[${A}|${Z}]]`)}else{let Z=K||A;O=O.replace($,`[[${A}|${Z}]]`)}}L.lastIndex=0,D.push(O)}return D.join(`
`)}async function C(g){let L=/!\[\[([^\]#|^]+)(?:(#)([^\]|]+))?(?:\|([^\]]+))?\]\]/g,_=g,d;for(;(d=L.exec(g))!==null;){let x=d[0],F=d[1].trim(),D=d[2],w=d[3],O=d[4];/\.(png|jpg|jpeg|gif|svg|bmp|webp)$/i.test(F)&&(F=F.replace(/\.md$/i,""));try{let q=i.metadataCache.getFirstLinkpathDest(F,"");if(q){let A=`![[${q.path.replace(/\\/g,"/")}`;D&&w&&(A+=`#${w}`),O&&(A+=`|${O}`),A+="]]",_=_.replace(x,A)}else _=_.replace(x,`![[${F}]]`)}catch{_=_.replace(x,`![[${F}]]`)}}return _}async function S(g,L){let{text:_,mathBlocks:d}=Zi(g),x=_;return x=await y(x),x=await v(x),x=await C(x),x=x,Ji(x,d)}function h(g){return g.replace(/\[\[([^\]#|^/]+)#\^([\w-]+)(?:\|([^\]]+))?\]\]/g,(L,_,d,x)=>m.has(_.toLowerCase())?x?`[[#^${d}|${x}]]`:`[[#^${d}]]`:L)}async function N(g){a="Traitement des liens...",s.clear(),m.clear(),p.clear(),u={};try{let L=await S(g,r);return L=h(L),a="Traitement termin\xE9",L}catch(L){throw a="Erreur lors du traitement",L}}function T(){s.clear(),a="",m.clear(),p.clear(),u={}}return e.$$set=g=>{"app"in g&&t(0,i=g.app),"basePath"in g&&t(1,r=g.basePath),"settings"in g&&t(2,l=g.settings),"config"in g&&t(3,o=g.config),"combinedFileName"in g&&t(4,c=g.combinedFileName)},[i,r,l,o,c,N,T]}var hn=class extends ie{constructor(n){super(),ce(this,n,er,null,oe,{app:0,basePath:1,settings:2,config:3,combinedFileName:4,processMarkdown:5,resetState:6})}get processMarkdown(){return this.$$.ctx[5]}get resetState(){return this.$$.ctx[6]}},et=hn;je();var Pe={original:"",combined:""};function gn(){return{...Pe}}function tt(e){Pe={...Pe,original:e}}function it(e){Pe={...Pe,combined:e}}function vt(e){return typeof e>"u"||e===null}function nr(e){return typeof e=="object"&&e!==null}function tr(e){return Array.isArray(e)?e:vt(e)?[]:[e]}function ir(e,n){var t,i,r,l;if(n)for(l=Object.keys(n),t=0,i=l.length;t<i;t+=1)r=l[t],e[r]=n[r];return e}function rr(e,n){var t="",i;for(i=0;i<n;i+=1)t+=e;return t}function or(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var lr=vt,cr=nr,sr=tr,ar=rr,ur=or,fr=ir,W={isNothing:lr,isObject:cr,toArray:sr,repeat:ar,isNegativeZero:ur,extend:fr};function xt(e,n){var t="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(t+=`

`+e.mark.snippet),i+" "+t):i}function He(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=xt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}He.prototype=Object.create(Error.prototype);He.prototype.constructor=He;He.prototype.toString=function(n){return this.name+": "+xt(this,n)};var V=He;function _n(e,n,t,i,r){var l="",o="",c=Math.floor(r/2)-1;return i-n>c&&(l=" ... ",n=i-c+l.length),t-i>c&&(o=" ...",t=i+c-o.length),{str:l+e.slice(n,t).replace(/\t/g,"\u2192")+o,pos:i-n+l.length}}function bn(e,n){return W.repeat(" ",n-e.length)+e}function dr(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],r=[],l,o=-1;l=t.exec(e.buffer);)r.push(l.index),i.push(l.index+l[0].length),e.position<=l.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var c="",s,a,m=Math.min(e.line+n.linesAfter,r.length).toString().length,u=n.maxLength-(n.indent+m+3);for(s=1;s<=n.linesBefore&&!(o-s<0);s++)a=_n(e.buffer,i[o-s],r[o-s],e.position-(i[o]-i[o-s]),u),c=W.repeat(" ",n.indent)+bn((e.line-s+1).toString(),m)+" | "+a.str+`
`+c;for(a=_n(e.buffer,i[o],r[o],e.position,u),c+=W.repeat(" ",n.indent)+bn((e.line+1).toString(),m)+" | "+a.str+`
`,c+=W.repeat("-",n.indent+m+3+a.pos)+`^
`,s=1;s<=n.linesAfter&&!(o+s>=r.length);s++)a=_n(e.buffer,i[o+s],r[o+s],e.position-(i[o]-i[o+s]),u),c+=W.repeat(" ",n.indent)+bn((e.line+s+1).toString(),m)+" | "+a.str+`
`;return c.replace(/\n$/,"")}var pr=dr,hr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mr=["scalar","sequence","mapping"];function gr(e){var n={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(i){n[String(i)]=t})}),n}function _r(e,n){if(n=n||{},Object.keys(n).forEach(function(t){if(hr.indexOf(t)===-1)throw new V('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(t){return t},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=gr(n.styleAliases||null),mr.indexOf(this.kind)===-1)throw new V('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var G=_r;function rt(e,n){var t=[];return e[n].forEach(function(i){var r=t.length;t.forEach(function(l,o){l.tag===i.tag&&l.kind===i.kind&&l.multi===i.multi&&(r=o)}),t[r]=i}),t}function br(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,t;function i(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(n=0,t=arguments.length;n<t;n+=1)arguments[n].forEach(i);return e}function xn(e){return this.extend(e)}xn.prototype.extend=function(n){var t=[],i=[];if(n instanceof G)i.push(n);else if(Array.isArray(n))i=i.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(t=t.concat(n.implicit)),n.explicit&&(i=i.concat(n.explicit));else throw new V("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(l){if(!(l instanceof G))throw new V("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new V("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new V("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(l){if(!(l instanceof G))throw new V("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(xn.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=rt(r,"implicit"),r.compiledExplicit=rt(r,"explicit"),r.compiledTypeMap=br(r.compiledImplicit,r.compiledExplicit),r};var yt=xn,wt=new G("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),kt=new G("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Ct=new G("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Ft=new yt({explicit:[wt,kt,Ct]});function vr(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function xr(){return null}function yr(e){return e===null}var At=new G("tag:yaml.org,2002:null",{kind:"scalar",resolve:vr,construct:xr,predicate:yr,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function wr(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function kr(e){return e==="true"||e==="True"||e==="TRUE"}function Cr(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Et=new G("tag:yaml.org,2002:bool",{kind:"scalar",resolve:wr,construct:kr,predicate:Cr,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Fr(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Ar(e){return 48<=e&&e<=55}function Er(e){return 48<=e&&e<=57}function Sr(e){if(e===null)return!1;var n=e.length,t=0,i=!1,r;if(!n)return!1;if(r=e[t],(r==="-"||r==="+")&&(r=e[++t]),r==="0"){if(t+1===n)return!0;if(r=e[++t],r==="b"){for(t++;t<n;t++)if(r=e[t],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(t++;t<n;t++)if(r=e[t],r!=="_"){if(!Fr(e.charCodeAt(t)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(t++;t<n;t++)if(r=e[t],r!=="_"){if(!Ar(e.charCodeAt(t)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;t<n;t++)if(r=e[t],r!=="_"){if(!Er(e.charCodeAt(t)))return!1;i=!0}return!(!i||r==="_")}function Tr(e){var n=e,t=1,i;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),i=n[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),n=n.slice(1),i=n[0]),n==="0")return 0;if(i==="0"){if(n[1]==="b")return t*parseInt(n.slice(2),2);if(n[1]==="x")return t*parseInt(n.slice(2),16);if(n[1]==="o")return t*parseInt(n.slice(2),8)}return t*parseInt(n,10)}function Lr(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!W.isNegativeZero(e)}var St=new G("tag:yaml.org,2002:int",{kind:"scalar",resolve:Sr,construct:Tr,predicate:Lr,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Or=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Ir(e){return!(e===null||!Or.test(e)||e[e.length-1]==="_")}function $r(e){var n,t;return n=e.replace(/_/g,"").toLowerCase(),t=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:t*parseFloat(n,10)}var Mr=/^[-+]?[0-9]+e/;function Nr(e,n){var t;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(W.isNegativeZero(e))return"-0.0";return t=e.toString(10),Mr.test(t)?t.replace("e",".e"):t}function Dr(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||W.isNegativeZero(e))}var Tt=new G("tag:yaml.org,2002:float",{kind:"scalar",resolve:Ir,construct:$r,predicate:Dr,represent:Nr,defaultStyle:"lowercase"}),Lt=Ft.extend({implicit:[At,Et,St,Tt]}),Ot=Lt,It=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),$t=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Rr(e){return e===null?!1:It.exec(e)!==null||$t.exec(e)!==null}function jr(e){var n,t,i,r,l,o,c,s=0,a=null,m,u,p;if(n=It.exec(e),n===null&&(n=$t.exec(e)),n===null)throw new Error("Date resolve error");if(t=+n[1],i=+n[2]-1,r=+n[3],!n[4])return new Date(Date.UTC(t,i,r));if(l=+n[4],o=+n[5],c=+n[6],n[7]){for(s=n[7].slice(0,3);s.length<3;)s+="0";s=+s}return n[9]&&(m=+n[10],u=+(n[11]||0),a=(m*60+u)*6e4,n[9]==="-"&&(a=-a)),p=new Date(Date.UTC(t,i,r,l,o,c,s)),a&&p.setTime(p.getTime()-a),p}function Pr(e){return e.toISOString()}var Mt=new G("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Rr,construct:jr,instanceOf:Date,represent:Pr});function Br(e){return e==="<<"||e===null}var Nt=new G("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Br}),Fn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Hr(e){if(e===null)return!1;var n,t,i=0,r=e.length,l=Fn;for(t=0;t<r;t++)if(n=l.indexOf(e.charAt(t)),!(n>64)){if(n<0)return!1;i+=6}return i%8===0}function qr(e){var n,t,i=e.replace(/[\r\n=]/g,""),r=i.length,l=Fn,o=0,c=[];for(n=0;n<r;n++)n%4===0&&n&&(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)),o=o<<6|l.indexOf(i.charAt(n));return t=r%4*6,t===0?(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)):t===18?(c.push(o>>10&255),c.push(o>>2&255)):t===12&&c.push(o>>4&255),new Uint8Array(c)}function Yr(e){var n="",t=0,i,r,l=e.length,o=Fn;for(i=0;i<l;i++)i%3===0&&i&&(n+=o[t>>18&63],n+=o[t>>12&63],n+=o[t>>6&63],n+=o[t&63]),t=(t<<8)+e[i];return r=l%3,r===0?(n+=o[t>>18&63],n+=o[t>>12&63],n+=o[t>>6&63],n+=o[t&63]):r===2?(n+=o[t>>10&63],n+=o[t>>4&63],n+=o[t<<2&63],n+=o[64]):r===1&&(n+=o[t>>2&63],n+=o[t<<4&63],n+=o[64],n+=o[64]),n}function Ur(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var Dt=new G("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Hr,construct:qr,predicate:Ur,represent:Yr}),Wr=Object.prototype.hasOwnProperty,Gr=Object.prototype.toString;function Kr(e){if(e===null)return!0;var n=[],t,i,r,l,o,c=e;for(t=0,i=c.length;t<i;t+=1){if(r=c[t],o=!1,Gr.call(r)!=="[object Object]")return!1;for(l in r)if(Wr.call(r,l))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(l)===-1)n.push(l);else return!1}return!0}function zr(e){return e!==null?e:[]}var Rt=new G("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Kr,construct:zr}),Xr=Object.prototype.toString;function Qr(e){if(e===null)return!0;var n,t,i,r,l,o=e;for(l=new Array(o.length),n=0,t=o.length;n<t;n+=1){if(i=o[n],Xr.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;l[n]=[r[0],i[r[0]]]}return!0}function Vr(e){if(e===null)return[];var n,t,i,r,l,o=e;for(l=new Array(o.length),n=0,t=o.length;n<t;n+=1)i=o[n],r=Object.keys(i),l[n]=[r[0],i[r[0]]];return l}var jt=new G("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Qr,construct:Vr}),Zr=Object.prototype.hasOwnProperty;function Jr(e){if(e===null)return!0;var n,t=e;for(n in t)if(Zr.call(t,n)&&t[n]!==null)return!1;return!0}function eo(e){return e!==null?e:{}}var Pt=new G("tag:yaml.org,2002:set",{kind:"mapping",resolve:Jr,construct:eo}),An=Ot.extend({implicit:[Mt,Nt],explicit:[Dt,Rt,jt,Pt]}),me=Object.prototype.hasOwnProperty,Qe=1,Bt=2,Ht=3,Ve=4,vn=1,no=2,ot=3,to=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,io=/[\x85\u2028\u2029]/,ro=/[,\[\]\{\}]/,qt=/^(?:!|!!|![a-z\-]+!)$/i,Yt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lt(e){return Object.prototype.toString.call(e)}function se(e){return e===10||e===13}function ye(e){return e===9||e===32}function ne(e){return e===9||e===32||e===10||e===13}function Le(e){return e===44||e===91||e===93||e===123||e===125}function oo(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function lo(e){return e===120?2:e===117?4:e===85?8:0}function co(e){return 48<=e&&e<=57?e-48:-1}function ct(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function so(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ut=new Array(256),Wt=new Array(256);for(xe=0;xe<256;xe++)Ut[xe]=ct(xe)?1:0,Wt[xe]=ct(xe);var xe;function ao(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||An,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gt(e,n){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=pr(t),new V(n,t)}function I(e,n){throw Gt(e,n)}function Ze(e,n){e.onWarning&&e.onWarning.call(null,Gt(e,n))}var st={YAML:function(n,t,i){var r,l,o;n.version!==null&&I(n,"duplication of %YAML directive"),i.length!==1&&I(n,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&I(n,"ill-formed argument of the YAML directive"),l=parseInt(r[1],10),o=parseInt(r[2],10),l!==1&&I(n,"unacceptable YAML version of the document"),n.version=i[0],n.checkLineBreaks=o<2,o!==1&&o!==2&&Ze(n,"unsupported YAML version of the document")},TAG:function(n,t,i){var r,l;i.length!==2&&I(n,"TAG directive accepts exactly two arguments"),r=i[0],l=i[1],qt.test(r)||I(n,"ill-formed tag handle (first argument) of the TAG directive"),me.call(n.tagMap,r)&&I(n,'there is a previously declared suffix for "'+r+'" tag handle'),Yt.test(l)||I(n,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{I(n,"tag prefix is malformed: "+l)}n.tagMap[r]=l}};function he(e,n,t,i){var r,l,o,c;if(n<t){if(c=e.input.slice(n,t),i)for(r=0,l=c.length;r<l;r+=1)o=c.charCodeAt(r),o===9||32<=o&&o<=1114111||I(e,"expected valid JSON character");else to.test(c)&&I(e,"the stream contains non-printable characters");e.result+=c}}function at(e,n,t,i){var r,l,o,c;for(W.isObject(t)||I(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(t),o=0,c=r.length;o<c;o+=1)l=r[o],me.call(n,l)||(n[l]=t[l],i[l]=!0)}function Oe(e,n,t,i,r,l,o,c,s){var a,m;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),a=0,m=r.length;a<m;a+=1)Array.isArray(r[a])&&I(e,"nested arrays are not supported inside keys"),typeof r=="object"&&lt(r[a])==="[object Object]"&&(r[a]="[object Object]");if(typeof r=="object"&&lt(r)==="[object Object]"&&(r="[object Object]"),r=String(r),n===null&&(n={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(a=0,m=l.length;a<m;a+=1)at(e,n,l[a],t);else at(e,n,l,t);else!e.json&&!me.call(t,r)&&me.call(n,r)&&(e.line=o||e.line,e.lineStart=c||e.lineStart,e.position=s||e.position,I(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(n,r,{configurable:!0,enumerable:!0,writable:!0,value:l}):n[r]=l,delete t[r];return n}function En(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):I(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function U(e,n,t){for(var i=0,r=e.input.charCodeAt(e.position);r!==0;){for(;ye(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(n&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(se(r))for(En(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return t!==-1&&i!==0&&e.lineIndent<t&&Ze(e,"deficient indentation"),i}function nn(e){var n=e.position,t;return t=e.input.charCodeAt(n),!!((t===45||t===46)&&t===e.input.charCodeAt(n+1)&&t===e.input.charCodeAt(n+2)&&(n+=3,t=e.input.charCodeAt(n),t===0||ne(t)))}function Sn(e,n){n===1?e.result+=" ":n>1&&(e.result+=W.repeat(`
`,n-1))}function uo(e,n,t){var i,r,l,o,c,s,a,m,u=e.kind,p=e.result,f;if(f=e.input.charCodeAt(e.position),ne(f)||Le(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(r=e.input.charCodeAt(e.position+1),ne(r)||t&&Le(r)))return!1;for(e.kind="scalar",e.result="",l=o=e.position,c=!1;f!==0;){if(f===58){if(r=e.input.charCodeAt(e.position+1),ne(r)||t&&Le(r))break}else if(f===35){if(i=e.input.charCodeAt(e.position-1),ne(i))break}else{if(e.position===e.lineStart&&nn(e)||t&&Le(f))break;if(se(f))if(s=e.line,a=e.lineStart,m=e.lineIndent,U(e,!1,-1),e.lineIndent>=n){c=!0,f=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=s,e.lineStart=a,e.lineIndent=m;break}}c&&(he(e,l,o,!1),Sn(e,e.line-s),l=o=e.position,c=!1),ye(f)||(o=e.position+1),f=e.input.charCodeAt(++e.position)}return he(e,l,o,!1),e.result?!0:(e.kind=u,e.result=p,!1)}function fo(e,n){var t,i,r;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(he(e,i,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)i=e.position,e.position++,r=e.position;else return!0;else se(t)?(he(e,i,r,!0),Sn(e,U(e,!1,n)),i=r=e.position):e.position===e.lineStart&&nn(e)?I(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);I(e,"unexpected end of the stream within a single quoted scalar")}function po(e,n){var t,i,r,l,o,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=i=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return he(e,t,e.position,!0),e.position++,!0;if(c===92){if(he(e,t,e.position,!0),c=e.input.charCodeAt(++e.position),se(c))U(e,!1,n);else if(c<256&&Ut[c])e.result+=Wt[c],e.position++;else if((o=lo(c))>0){for(r=o,l=0;r>0;r--)c=e.input.charCodeAt(++e.position),(o=oo(c))>=0?l=(l<<4)+o:I(e,"expected hexadecimal character");e.result+=so(l),e.position++}else I(e,"unknown escape sequence");t=i=e.position}else se(c)?(he(e,t,i,!0),Sn(e,U(e,!1,n)),t=i=e.position):e.position===e.lineStart&&nn(e)?I(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}I(e,"unexpected end of the stream within a double quoted scalar")}function ho(e,n){var t=!0,i,r,l,o=e.tag,c,s=e.anchor,a,m,u,p,f,y=Object.create(null),v,C,S,h;if(h=e.input.charCodeAt(e.position),h===91)m=93,f=!1,c=[];else if(h===123)m=125,f=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),h=e.input.charCodeAt(++e.position);h!==0;){if(U(e,!0,n),h=e.input.charCodeAt(e.position),h===m)return e.position++,e.tag=o,e.anchor=s,e.kind=f?"mapping":"sequence",e.result=c,!0;t?h===44&&I(e,"expected the node content, but found ','"):I(e,"missed comma between flow collection entries"),C=v=S=null,u=p=!1,h===63&&(a=e.input.charCodeAt(e.position+1),ne(a)&&(u=p=!0,e.position++,U(e,!0,n))),i=e.line,r=e.lineStart,l=e.position,Ie(e,n,Qe,!1,!0),C=e.tag,v=e.result,U(e,!0,n),h=e.input.charCodeAt(e.position),(p||e.line===i)&&h===58&&(u=!0,h=e.input.charCodeAt(++e.position),U(e,!0,n),Ie(e,n,Qe,!1,!0),S=e.result),f?Oe(e,c,y,C,v,S,i,r,l):u?c.push(Oe(e,null,y,C,v,S,i,r,l)):c.push(v),U(e,!0,n),h=e.input.charCodeAt(e.position),h===44?(t=!0,h=e.input.charCodeAt(++e.position)):t=!1}I(e,"unexpected end of the stream within a flow collection")}function mo(e,n){var t,i,r=vn,l=!1,o=!1,c=n,s=0,a=!1,m,u;if(u=e.input.charCodeAt(e.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)vn===r?r=u===43?ot:no:I(e,"repeat of a chomping mode identifier");else if((m=co(u))>=0)m===0?I(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?I(e,"repeat of an indentation width identifier"):(c=n+m-1,o=!0);else break;if(ye(u)){do u=e.input.charCodeAt(++e.position);while(ye(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!se(u)&&u!==0)}for(;u!==0;){for(En(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<c)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>c&&(c=e.lineIndent),se(u)){s++;continue}if(e.lineIndent<c){r===ot?e.result+=W.repeat(`
`,l?1+s:s):r===vn&&l&&(e.result+=`
`);break}for(i?ye(u)?(a=!0,e.result+=W.repeat(`
`,l?1+s:s)):a?(a=!1,e.result+=W.repeat(`
`,s+1)):s===0?l&&(e.result+=" "):e.result+=W.repeat(`
`,s):e.result+=W.repeat(`
`,l?1+s:s),l=!0,o=!0,s=0,t=e.position;!se(u)&&u!==0;)u=e.input.charCodeAt(++e.position);he(e,t,e.position,!1)}return!0}function ut(e,n){var t,i=e.tag,r=e.anchor,l=[],o,c=!1,s;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),s=e.input.charCodeAt(e.position);s!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,I(e,"tab characters must not be used in indentation")),!(s!==45||(o=e.input.charCodeAt(e.position+1),!ne(o))));){if(c=!0,e.position++,U(e,!0,-1)&&e.lineIndent<=n){l.push(null),s=e.input.charCodeAt(e.position);continue}if(t=e.line,Ie(e,n,Ht,!1,!0),l.push(e.result),U(e,!0,-1),s=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>n)&&s!==0)I(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return c?(e.tag=i,e.anchor=r,e.kind="sequence",e.result=l,!0):!1}function go(e,n,t){var i,r,l,o,c,s,a=e.tag,m=e.anchor,u={},p=Object.create(null),f=null,y=null,v=null,C=!1,S=!1,h;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),h=e.input.charCodeAt(e.position);h!==0;){if(!C&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,I(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),l=e.line,(h===63||h===58)&&ne(i))h===63?(C&&(Oe(e,u,p,f,y,null,o,c,s),f=y=v=null),S=!0,C=!0,r=!0):C?(C=!1,r=!0):I(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,h=i;else{if(o=e.line,c=e.lineStart,s=e.position,!Ie(e,t,Bt,!1,!0))break;if(e.line===l){for(h=e.input.charCodeAt(e.position);ye(h);)h=e.input.charCodeAt(++e.position);if(h===58)h=e.input.charCodeAt(++e.position),ne(h)||I(e,"a whitespace character is expected after the key-value separator within a block mapping"),C&&(Oe(e,u,p,f,y,null,o,c,s),f=y=v=null),S=!0,C=!1,r=!1,f=e.tag,y=e.result;else if(S)I(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=a,e.anchor=m,!0}else if(S)I(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=a,e.anchor=m,!0}if((e.line===l||e.lineIndent>n)&&(C&&(o=e.line,c=e.lineStart,s=e.position),Ie(e,n,Ve,!0,r)&&(C?y=e.result:v=e.result),C||(Oe(e,u,p,f,y,v,o,c,s),f=y=v=null),U(e,!0,-1),h=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>n)&&h!==0)I(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return C&&Oe(e,u,p,f,y,null,o,c,s),S&&(e.tag=a,e.anchor=m,e.kind="mapping",e.result=u),S}function _o(e){var n,t=!1,i=!1,r,l,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&I(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(t=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",n=e.position,t){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(l=e.input.slice(n,e.position),o=e.input.charCodeAt(++e.position)):I(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ne(o);)o===33&&(i?I(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(n-1,e.position+1),qt.test(r)||I(e,"named tag handle cannot contain such characters"),i=!0,n=e.position+1)),o=e.input.charCodeAt(++e.position);l=e.input.slice(n,e.position),ro.test(l)&&I(e,"tag suffix cannot contain flow indicator characters")}l&&!Yt.test(l)&&I(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{I(e,"tag name is malformed: "+l)}return t?e.tag=l:me.call(e.tagMap,r)?e.tag=e.tagMap[r]+l:r==="!"?e.tag="!"+l:r==="!!"?e.tag="tag:yaml.org,2002:"+l:I(e,'undeclared tag handle "'+r+'"'),!0}function bo(e){var n,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&I(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),n=e.position;t!==0&&!ne(t)&&!Le(t);)t=e.input.charCodeAt(++e.position);return e.position===n&&I(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function vo(e){var n,t,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!ne(i)&&!Le(i);)i=e.input.charCodeAt(++e.position);return e.position===n&&I(e,"name of an alias node must contain at least one character"),t=e.input.slice(n,e.position),me.call(e.anchorMap,t)||I(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],U(e,!0,-1),!0}function Ie(e,n,t,i,r){var l,o,c,s=1,a=!1,m=!1,u,p,f,y,v,C;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=o=c=Ve===t||Ht===t,i&&U(e,!0,-1)&&(a=!0,e.lineIndent>n?s=1:e.lineIndent===n?s=0:e.lineIndent<n&&(s=-1)),s===1)for(;_o(e)||bo(e);)U(e,!0,-1)?(a=!0,c=l,e.lineIndent>n?s=1:e.lineIndent===n?s=0:e.lineIndent<n&&(s=-1)):c=!1;if(c&&(c=a||r),(s===1||Ve===t)&&(Qe===t||Bt===t?v=n:v=n+1,C=e.position-e.lineStart,s===1?c&&(ut(e,C)||go(e,C,v))||ho(e,v)?m=!0:(o&&mo(e,v)||fo(e,v)||po(e,v)?m=!0:vo(e)?(m=!0,(e.tag!==null||e.anchor!==null)&&I(e,"alias node should not have any properties")):uo(e,v,Qe===t)&&(m=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):s===0&&(m=c&&ut(e,C))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&I(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,p=e.implicitTypes.length;u<p;u+=1)if(y=e.implicitTypes[u],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(me.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,f=e.typeMap.multi[e.kind||"fallback"],u=0,p=f.length;u<p;u+=1)if(e.tag.slice(0,f[u].tag.length)===f[u].tag){y=f[u];break}y||I(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&I(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):I(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||m}function xo(e){var n=e.position,t,i,r,l=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(U(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(l=!0,o=e.input.charCodeAt(++e.position),t=e.position;o!==0&&!ne(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(t,e.position),r=[],i.length<1&&I(e,"directive name must not be less than one character in length");o!==0;){for(;ye(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!se(o));break}if(se(o))break;for(t=e.position;o!==0&&!ne(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}o!==0&&En(e),me.call(st,i)?st[i](e,i,r):Ze(e,'unknown document directive "'+i+'"')}if(U(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,U(e,!0,-1)):l&&I(e,"directives end mark is expected"),Ie(e,e.lineIndent-1,Ve,!1,!0),U(e,!0,-1),e.checkLineBreaks&&io.test(e.input.slice(n,e.position))&&Ze(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&nn(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,U(e,!0,-1));return}if(e.position<e.length-1)I(e,"end of the stream or a document separator is expected");else return}function Kt(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new ao(e,n),i=e.indexOf("\0");for(i!==-1&&(t.position=i,I(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)xo(t);return t.documents}function yo(e,n,t){n!==null&&typeof n=="object"&&typeof t>"u"&&(t=n,n=null);var i=Kt(e,t);if(typeof n!="function")return i;for(var r=0,l=i.length;r<l;r+=1)n(i[r])}function wo(e,n){var t=Kt(e,n);if(t.length!==0){if(t.length===1)return t[0];throw new V("expected a single document in the stream, but found more")}}var ko=yo,Co=wo,zt={loadAll:ko,load:Co},Xt=Object.prototype.toString,Qt=Object.prototype.hasOwnProperty,Tn=65279,Fo=9,qe=10,Ao=13,Eo=32,So=33,To=34,yn=35,Lo=37,Oo=38,Io=39,$o=42,Vt=44,Mo=45,Je=58,No=61,Do=62,Ro=63,jo=64,Zt=91,Jt=93,Po=96,ei=123,Bo=124,ni=125,z={};z[0]="\\0";z[7]="\\a";z[8]="\\b";z[9]="\\t";z[10]="\\n";z[11]="\\v";z[12]="\\f";z[13]="\\r";z[27]="\\e";z[34]='\\"';z[92]="\\\\";z[133]="\\N";z[160]="\\_";z[8232]="\\L";z[8233]="\\P";var Ho=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],qo=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Yo(e,n){var t,i,r,l,o,c,s;if(n===null)return{};for(t={},i=Object.keys(n),r=0,l=i.length;r<l;r+=1)o=i[r],c=String(n[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),s=e.compiledTypeMap.fallback[o],s&&Qt.call(s.styleAliases,c)&&(c=s.styleAliases[c]),t[o]=c;return t}function Uo(e){var n,t,i;if(n=e.toString(16).toUpperCase(),e<=255)t="x",i=2;else if(e<=65535)t="u",i=4;else if(e<=4294967295)t="U",i=8;else throw new V("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+W.repeat("0",i-n.length)+n}var Wo=1,Ye=2;function Go(e){this.schema=e.schema||An,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=W.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Yo(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Ye:Wo,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ft(e,n){for(var t=W.repeat(" ",n),i=0,r=-1,l="",o,c=e.length;i<c;)r=e.indexOf(`
`,i),r===-1?(o=e.slice(i),i=c):(o=e.slice(i,r+1),i=r+1),o.length&&o!==`
`&&(l+=t),l+=o;return l}function wn(e,n){return`
`+W.repeat(" ",e.indent*n)}function Ko(e,n){var t,i,r;for(t=0,i=e.implicitTypes.length;t<i;t+=1)if(r=e.implicitTypes[t],r.resolve(n))return!0;return!1}function en(e){return e===Eo||e===Fo}function Ue(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Tn||65536<=e&&e<=1114111}function dt(e){return Ue(e)&&e!==Tn&&e!==Ao&&e!==qe}function pt(e,n,t){var i=dt(e),r=i&&!en(e);return(t?i:i&&e!==Vt&&e!==Zt&&e!==Jt&&e!==ei&&e!==ni)&&e!==yn&&!(n===Je&&!r)||dt(n)&&!en(n)&&e===yn||n===Je&&r}function zo(e){return Ue(e)&&e!==Tn&&!en(e)&&e!==Mo&&e!==Ro&&e!==Je&&e!==Vt&&e!==Zt&&e!==Jt&&e!==ei&&e!==ni&&e!==yn&&e!==Oo&&e!==$o&&e!==So&&e!==Bo&&e!==No&&e!==Do&&e!==Io&&e!==To&&e!==Lo&&e!==jo&&e!==Po}function Xo(e){return!en(e)&&e!==Je}function Be(e,n){var t=e.charCodeAt(n),i;return t>=55296&&t<=56319&&n+1<e.length&&(i=e.charCodeAt(n+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}function ti(e){var n=/^\n* /;return n.test(e)}var ii=1,kn=2,ri=3,oi=4,Te=5;function Qo(e,n,t,i,r,l,o,c){var s,a=0,m=null,u=!1,p=!1,f=i!==-1,y=-1,v=zo(Be(e,0))&&Xo(Be(e,e.length-1));if(n||o)for(s=0;s<e.length;a>=65536?s+=2:s++){if(a=Be(e,s),!Ue(a))return Te;v=v&&pt(a,m,c),m=a}else{for(s=0;s<e.length;a>=65536?s+=2:s++){if(a=Be(e,s),a===qe)u=!0,f&&(p=p||s-y-1>i&&e[y+1]!==" ",y=s);else if(!Ue(a))return Te;v=v&&pt(a,m,c),m=a}p=p||f&&s-y-1>i&&e[y+1]!==" "}return!u&&!p?v&&!o&&!r(e)?ii:l===Ye?Te:kn:t>9&&ti(e)?Te:o?l===Ye?Te:kn:p?oi:ri}function Vo(e,n,t,i,r){e.dump=function(){if(n.length===0)return e.quotingType===Ye?'""':"''";if(!e.noCompatMode&&(Ho.indexOf(n)!==-1||qo.test(n)))return e.quotingType===Ye?'"'+n+'"':"'"+n+"'";var l=e.indent*Math.max(1,t),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),c=i||e.flowLevel>-1&&t>=e.flowLevel;function s(a){return Ko(e,a)}switch(Qo(n,c,e.indent,o,s,e.quotingType,e.forceQuotes&&!i,r)){case ii:return n;case kn:return"'"+n.replace(/'/g,"''")+"'";case ri:return"|"+ht(n,e.indent)+mt(ft(n,l));case oi:return">"+ht(n,e.indent)+mt(ft(Zo(n,o),l));case Te:return'"'+Jo(n)+'"';default:throw new V("impossible error: invalid scalar style")}}()}function ht(e,n){var t=ti(e)?String(n):"",i=e[e.length-1]===`
`,r=i&&(e[e.length-2]===`
`||e===`
`),l=r?"+":i?"":"-";return t+l+`
`}function mt(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Zo(e,n){for(var t=/(\n+)([^\n]*)/g,i=function(){var a=e.indexOf(`
`);return a=a!==-1?a:e.length,t.lastIndex=a,gt(e.slice(0,a),n)}(),r=e[0]===`
`||e[0]===" ",l,o;o=t.exec(e);){var c=o[1],s=o[2];l=s[0]===" ",i+=c+(!r&&!l&&s!==""?`
`:"")+gt(s,n),r=l}return i}function gt(e,n){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,i,r=0,l,o=0,c=0,s="";i=t.exec(e);)c=i.index,c-r>n&&(l=o>r?o:c,s+=`
`+e.slice(r,l),r=l+1),o=c;return s+=`
`,e.length-r>n&&o>r?s+=e.slice(r,o)+`
`+e.slice(o+1):s+=e.slice(r),s.slice(1)}function Jo(e){for(var n="",t=0,i,r=0;r<e.length;t>=65536?r+=2:r++)t=Be(e,r),i=z[t],!i&&Ue(t)?(n+=e[r],t>=65536&&(n+=e[r+1])):n+=i||Uo(t);return n}function el(e,n,t){var i="",r=e.tag,l,o,c;for(l=0,o=t.length;l<o;l+=1)c=t[l],e.replacer&&(c=e.replacer.call(t,String(l),c)),(ae(e,n,c,!1,!1)||typeof c>"u"&&ae(e,n,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=r,e.dump="["+i+"]"}function _t(e,n,t,i){var r="",l=e.tag,o,c,s;for(o=0,c=t.length;o<c;o+=1)s=t[o],e.replacer&&(s=e.replacer.call(t,String(o),s)),(ae(e,n+1,s,!0,!0,!1,!0)||typeof s>"u"&&ae(e,n+1,null,!0,!0,!1,!0))&&((!i||r!=="")&&(r+=wn(e,n)),e.dump&&qe===e.dump.charCodeAt(0)?r+="-":r+="- ",r+=e.dump);e.tag=l,e.dump=r||"[]"}function nl(e,n,t){var i="",r=e.tag,l=Object.keys(t),o,c,s,a,m;for(o=0,c=l.length;o<c;o+=1)m="",i!==""&&(m+=", "),e.condenseFlow&&(m+='"'),s=l[o],a=t[s],e.replacer&&(a=e.replacer.call(t,s,a)),ae(e,n,s,!1,!1)&&(e.dump.length>1024&&(m+="? "),m+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ae(e,n,a,!1,!1)&&(m+=e.dump,i+=m));e.tag=r,e.dump="{"+i+"}"}function tl(e,n,t,i){var r="",l=e.tag,o=Object.keys(t),c,s,a,m,u,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new V("sortKeys must be a boolean or a function");for(c=0,s=o.length;c<s;c+=1)p="",(!i||r!=="")&&(p+=wn(e,n)),a=o[c],m=t[a],e.replacer&&(m=e.replacer.call(t,a,m)),ae(e,n+1,a,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&qe===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=wn(e,n)),ae(e,n+1,m,!0,u)&&(e.dump&&qe===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,r+=p));e.tag=l,e.dump=r||"{}"}function bt(e,n,t){var i,r,l,o,c,s;for(r=t?e.explicitTypes:e.implicitTypes,l=0,o=r.length;l<o;l+=1)if(c=r[l],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof n=="object"&&n instanceof c.instanceOf)&&(!c.predicate||c.predicate(n))){if(t?c.multi&&c.representName?e.tag=c.representName(n):e.tag=c.tag:e.tag="?",c.represent){if(s=e.styleMap[c.tag]||c.defaultStyle,Xt.call(c.represent)==="[object Function]")i=c.represent(n,s);else if(Qt.call(c.represent,s))i=c.represent[s](n,s);else throw new V("!<"+c.tag+'> tag resolver accepts not "'+s+'" style');e.dump=i}return!0}return!1}function ae(e,n,t,i,r,l,o){e.tag=null,e.dump=t,bt(e,t,!1)||bt(e,t,!0);var c=Xt.call(e.dump),s=i,a;i&&(i=e.flowLevel<0||e.flowLevel>n);var m=c==="[object Object]"||c==="[object Array]",u,p;if(m&&(u=e.duplicates.indexOf(t),p=u!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&n>0)&&(r=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(m&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),c==="[object Object]")i&&Object.keys(e.dump).length!==0?(tl(e,n,e.dump,r),p&&(e.dump="&ref_"+u+e.dump)):(nl(e,n,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(c==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&n>0?_t(e,n-1,e.dump,r):_t(e,n,e.dump,r),p&&(e.dump="&ref_"+u+e.dump)):(el(e,n,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&Vo(e,e.dump,n,l,s);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new V("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(a=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?a="!"+a:a.slice(0,18)==="tag:yaml.org,2002:"?a="!!"+a.slice(18):a="!<"+a+">",e.dump=a+" "+e.dump)}return!0}function il(e,n){var t=[],i=[],r,l;for(Cn(e,t,i),r=0,l=i.length;r<l;r+=1)n.duplicates.push(t[i[r]]);n.usedDuplicates=new Array(l)}function Cn(e,n,t){var i,r,l;if(e!==null&&typeof e=="object")if(r=n.indexOf(e),r!==-1)t.indexOf(r)===-1&&t.push(r);else if(n.push(e),Array.isArray(e))for(r=0,l=e.length;r<l;r+=1)Cn(e[r],n,t);else for(i=Object.keys(e),r=0,l=i.length;r<l;r+=1)Cn(e[i[r]],n,t)}function rl(e,n){n=n||{};var t=new Go(n);t.noRefs||il(e,t);var i=e;return t.replacer&&(i=t.replacer.call({"":i},"",i)),ae(t,0,i,!0,!0)?t.dump+`
`:""}var ol=rl,ll={dump:ol};function Ln(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var cl=G,sl=yt,al=Ft,ul=Lt,fl=Ot,dl=An,pl=zt.load,hl=zt.loadAll,ml=ll.dump,gl=V,_l={binary:Dt,float:Tt,map:Ct,null:At,pairs:jt,set:Pt,timestamp:Mt,bool:Et,int:St,merge:Nt,omap:Rt,seq:kt,str:wt},bl=Ln("safeLoad","load"),vl=Ln("safeLoadAll","loadAll"),xl=Ln("safeDump","dump"),yl={Type:cl,Schema:sl,FAILSAFE_SCHEMA:al,JSON_SCHEMA:ul,CORE_SCHEMA:fl,DEFAULT_SCHEMA:dl,load:pl,loadAll:hl,dump:ml,YAMLException:gl,types:_l,safeLoad:bl,safeLoadAll:vl,safeDump:xl},On=yl;var In={},$n=[];function Mn(){return{...In}}function li(){return[...$n]}async function ci(e="locales/fr.yaml"){try{let t=await(await fetch(e)).text();In={...On.load(t)}}catch{In={error:"Erreur de chargement des textes UI."}}}async function si(e="locales/commands.yaml"){try{let t=await(await fetch(e)).text();$n=On.load(t)||[]}catch{$n=[]}}var wi=require("obsidian");je();var gc=require("obsidian");function wl(e){Ae(e,"svelte-1myuafn",".modal-background.svelte-1myuafn.svelte-1myuafn{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.6);display:flex;justify-content:center;align-items:center;z-index:9999}.modal-content.svelte-1myuafn.svelte-1myuafn{background-color:var(--background-primary);padding:20px;border-radius:8px;box-shadow:0 4px 12px rgba(0, 0, 0, 0.2);max-width:800px;width:90%;max-height:80%;display:flex;flex-direction:column}.search-bar.svelte-1myuafn.svelte-1myuafn{margin-bottom:15px}.search-bar.svelte-1myuafn input.svelte-1myuafn{width:100%;padding:8px;border:1px solid var(--background-modifier-border);border-radius:4px;background-color:var(--background-secondary);color:var(--text-normal)}.file-list-modal.svelte-1myuafn.svelte-1myuafn{flex-grow:1;overflow-y:auto;border:1px solid var(--background-modifier-border);border-radius:4px;padding:10px;margin-bottom:15px}.file-item-modal.svelte-1myuafn.svelte-1myuafn{padding:8px;cursor:pointer;border-bottom:1px solid var(--background-modifier-border)}.file-item-modal.svelte-1myuafn.svelte-1myuafn:last-child{border-bottom:none}.file-item-modal.svelte-1myuafn.svelte-1myuafn:hover{background-color:var(--background-modifier-hover)}.file-item-modal.selected.svelte-1myuafn.svelte-1myuafn{background-color:var(--interactive-accent);color:var(--text-on-accent)}.modal-actions.svelte-1myuafn.svelte-1myuafn{display:flex;justify-content:flex-end;gap:10px}.modal-actions.svelte-1myuafn button.svelte-1myuafn{padding:8px 15px;border-radius:4px;cursor:pointer;background-color:var(--interactive-accent);color:var(--text-on-accent);border:none}.modal-actions.svelte-1myuafn button.svelte-1myuafn:last-child{background-color:var(--background-modifier-border);color:var(--text-normal)}")}function ai(e,n,t){let i=e.slice();return i[15]=n[t],i}function ui(e){let n,t,i,r,l,o,c,s,a=[],m=new Map,u,p,f,y,v,C,S,h=e[2](),N=T=>T[15].path;for(let T=0;T<h.length;T+=1){let g=ai(e,h,T),L=N(g);m.set(L,a[T]=fi(L,g))}return{c(){n=M("div"),t=M("div"),i=M("h2"),i.textContent="S\xE9lectionner des fichiers Markdown",r=P(),l=M("div"),o=M("input"),c=P(),s=M("div");for(let T=0;T<a.length;T+=1)a[T].c();u=P(),p=M("div"),f=M("button"),f.textContent="Confirmer la s\xE9lection",y=P(),v=M("button"),v.textContent="Annuler",H(o,"type","text"),H(o,"placeholder","Rechercher des fichiers..."),H(o,"class","svelte-1myuafn"),H(l,"class","search-bar svelte-1myuafn"),H(s,"class","file-list-modal svelte-1myuafn"),H(f,"class","svelte-1myuafn"),H(v,"class","svelte-1myuafn"),H(p,"class","modal-actions svelte-1myuafn"),H(t,"class","modal-content svelte-1myuafn"),H(n,"class","modal-background svelte-1myuafn")},m(T,g){J(T,n,g),b(n,t),b(t,i),b(t,r),b(t,l),b(l,o),Ee(o,e[1]),b(t,c),b(t,s);for(let L=0;L<a.length;L+=1)a[L]&&a[L].m(s,null);b(t,u),b(t,p),b(p,f),b(p,y),b(p,v),C||(S=[Y(o,"input",e[9]),Y(f,"click",e[5]),Y(v,"click",e[6]),Y(t,"click",Gn(e[8])),Y(n,"click",e[6])],C=!0)},p(T,g){g&2&&o.value!==T[1]&&Ee(o,T[1]),g&28&&(h=T[2](),a=Zn(a,g,N,1,T,h,m,s,Vn,fi,null,ai))},d(T){T&&X(n);for(let g=0;g<a.length;g+=1)a[g].d();C=!1,te(S)}}}function fi(e,n){let t,i=n[15].path+"",r,l,o,c;function s(){return n[10](n[15])}return{key:e,first:null,c(){t=M("div"),r=Q(i),l=P(),H(t,"class","file-item-modal svelte-1myuafn"),Kn(t,"selected",n[4](n[15])),this.first=t},m(a,m){J(a,t,m),b(t,r),b(t,l),o||(c=Y(t,"click",s),o=!0)},p(a,m){n=a},d(a){a&&X(t),o=!1,c()}}}function kl(e){let n,t=e[0]&&ui(e);return{c(){t&&t.c(),n=Wn()},m(i,r){t&&t.m(i,r),J(i,n,r)},p(i,[r]){i[0]?t?t.p(i,r):(t=ui(i),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},i:ue,o:ue,d(i){t&&t.d(i),i&&X(n)}}}function Cl(e,n,t){let{app:i}=n,{isOpen:r}=n,l=Re(),o=[],c=[],s="";async function a(){o=i.vault.getMarkdownFiles(),console.log("All Markdown files:",o)}function m(){return o.filter(h=>h.path.toLowerCase().includes(s.toLowerCase()))}function u(h){c.findIndex(T=>T.path===h.path)===-1?c=[...c,h]:c=c.filter(T=>T.path!==h.path)}function p(h){return c.some(N=>N.path===h.path)}function f(){l("filesSelected",c),t(0,r=!1)}function y(){t(0,r=!1)}function v(h){zn.call(this,e,h)}function C(){s=this.value,t(1,s)}let S=h=>u(h);return e.$$set=h=>{"app"in h&&t(7,i=h.app),"isOpen"in h&&t(0,r=h.isOpen)},[r,s,m,u,p,f,y,i,v,C,S]}var Nn=class extends ie{constructor(n){super(),ce(this,n,Cl,kl,oe,{app:7,isOpen:0},wl)}},pi=Nn;function Fl(e){Ae(e,"svelte-sbv1j",".manual-ui.svelte-sbv1j.svelte-sbv1j{border:1px solid #ccc;border-radius:8px;padding:1rem;margin-bottom:1rem;background:var(--background-secondary);max-width:600px;width:100%}.file-list.svelte-sbv1j.svelte-sbv1j{display:flex;flex-direction:column;gap:0.5rem;margin-bottom:1rem}.file-item.svelte-sbv1j.svelte-sbv1j{display:flex;align-items:center;background:var(--background-primary);border:1px solid #ddd;border-radius:4px;padding:0.5rem;cursor:grab}.file-item.svelte-sbv1j .remove.svelte-sbv1j{margin-left:auto;color:#c00;cursor:pointer}.drag-area.svelte-sbv1j.svelte-sbv1j{border:2px dashed #888;border-radius:6px;padding:1rem;text-align:center;margin-bottom:1rem;background:#f8f8f8}.name-field.svelte-sbv1j.svelte-sbv1j{margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem}@media(max-width: 700px){.manual-ui.svelte-sbv1j.svelte-sbv1j{max-width:98vw;padding:0.5rem}}")}function hi(e,n,t){let i=e.slice();return i[21]=n[t],i}function mi(e,n,t){let i=e.slice();return i[24]=n[t],i[26]=t,i}function gi(e,n,t){let i=e.slice();return i[27]=n[t],i[26]=t,i}function _i(e){let n,t,i;function r(o){e[14](o)}let l={app:e[0]};return e[3]!==void 0&&(l.isOpen=e[3]),n=new pi({props:l}),be.push(()=>Jn(n,"isOpen",r)),n.$on("filesSelected",e[11]),{c(){Se(n.$$.fragment)},m(o,c){ve(n,o,c),i=!0},p(o,c){let s={};c&1&&(s.app=o[0]),!t&&c&8&&(t=!0,s.isOpen=o[3],Xn(()=>t=!1)),n.$set(s)},i(o){i||(ee(n.$$.fragment,o),i=!0)},o(o){le(n.$$.fragment,o),i=!1},d(o){de(n,o)}}}function Al(e){let n,t,i;function r(){return e[16](e[26])}return{c(){n=M("button"),n.textContent="\u2191"},m(l,o){J(l,n,o),t||(i=Y(n,"click",r),t=!0)},p(l,o){e=l},d(l){l&&X(n),t=!1,i()}}}function bi(e){let n,t,i;function r(){return e[17](e[26])}return{c(){n=M("button"),n.textContent="\u2193"},m(l,o){J(l,n,o),t||(i=Y(n,"click",r),t=!0)},p(l,o){e=l},d(l){l&&X(n),t=!1,i()}}}function vi(e){let n,t,i=e[27].name+"",r,l,o,c,s,a,m;function u(){return e[15](e[26])}let p=e[26]>0&&Al(e),f=e[26]<e[1].length-1&&bi(e);return{c(){n=M("div"),t=M("span"),r=Q(i),l=P(),o=M("span"),o.textContent="\u2716",c=P(),p&&p.c(),s=P(),f&&f.c(),H(o,"class","remove svelte-sbv1j"),H(n,"class","file-item svelte-sbv1j"),H(n,"draggable","true")},m(y,v){J(y,n,v),b(n,t),b(t,r),b(n,l),b(n,o),b(n,c),p&&p.m(n,null),b(n,s),f&&f.m(n,null),a||(m=Y(o,"click",u),a=!0)},p(y,v){e=y,v&2&&i!==(i=e[27].name+"")&&fe(r,i),e[26]>0&&p.p(e,v),e[26]<e[1].length-1?f?f.p(e,v):(f=bi(e),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},d(y){y&&X(n),p&&p.d(),f&&f.d(),a=!1,m()}}}function xi(e){let n,t,i=e[24]+"",r,l,o,c,s,a,m;function u(){return e[18](e[26])}return{c(){n=M("div"),t=M("span"),r=Q(i),l=Q(" (externe)"),o=P(),c=M("span"),c.textContent="\u2716",s=P(),H(c,"class","remove svelte-sbv1j"),H(n,"class","file-item svelte-sbv1j")},m(p,f){J(p,n,f),b(n,t),b(t,r),b(t,l),b(n,o),b(n,c),b(n,s),a||(m=Y(c,"click",u),a=!0)},p(p,f){e=p},d(p){p&&X(n),a=!1,m()}}}function yi(e){let n,t,i=e[21].name+"",r,l,o=e[21].description+"",c;return{c(){n=M("li"),t=M("b"),r=Q(i),l=Q(" \u2014 "),c=Q(o)},m(s,a){J(s,n,a),b(n,t),b(t,r),b(n,l),b(n,c)},p(s,a){a&16&&i!==(i=s[21].name+"")&&fe(r,i),a&16&&o!==(o=s[21].description+"")&&fe(c,o)},d(s){s&&X(n)}}}function El(e){let n,t,i,r,l,o,c,s,a,m,u,p,f,y,v,C,S,h,N,T,g,L,_,d,x,F,D,w=e[3]&&_i(e),O=e[1],B=[];for(let E=0;E<O.length;E+=1)B[E]=vi(gi(e,O,E));let q=e[6],$=[];for(let E=0;E<q.length;E+=1)$[E]=xi(mi(e,q,E));let A=e[4],R=[];for(let E=0;E<A.length;E+=1)R[E]=yi(hi(e,A,E));return{c(){n=M("div"),t=M("h2"),t.textContent="Combinaison manuelle",i=P(),r=M("div"),r.textContent="Glisser-d\xE9poser des fichiers markdown ici (depuis Obsidian ou l'ext\xE9rieur)",l=P(),o=M("button"),o.textContent="S\xE9lectionner des fichiers du coffre",c=P(),w&&w.c(),s=P(),a=M("div");for(let E=0;E<B.length;E+=1)B[E].c();m=P();for(let E=0;E<$.length;E+=1)$[E].c();u=P(),p=M("div"),f=M("label"),f.textContent="Nom du fichier combin\xE9 :",y=P(),v=M("input"),C=P(),S=M("button"),S.textContent="Combiner et cr\xE9er le fichier",h=P(),N=M("button"),N.textContent="Fermer",T=P(),g=M("div"),L=M("h3"),L.textContent="Commandes disponibles",_=P(),d=M("ul");for(let E=0;E<R.length;E+=1)R[E].c();H(r,"class","drag-area svelte-sbv1j"),H(a,"class","file-list svelte-sbv1j"),H(v,"type","text"),De(v,"flex","1"),H(p,"class","name-field svelte-sbv1j"),De(g,"margin-top","2rem"),H(n,"class","manual-ui svelte-sbv1j")},m(E,j){J(E,n,j),b(n,t),b(n,i),b(n,r),b(n,l),b(n,o),b(n,c),w&&w.m(n,null),b(n,s),b(n,a);for(let k=0;k<B.length;k+=1)B[k]&&B[k].m(a,null);b(a,m);for(let k=0;k<$.length;k+=1)$[k]&&$[k].m(a,null);b(n,u),b(n,p),b(p,f),b(p,y),b(p,v),Ee(v,e[2]),b(n,C),b(n,S),b(n,h),b(n,N),b(n,T),b(n,g),b(g,L),b(g,_),b(g,d);for(let k=0;k<R.length;k+=1)R[k]&&R[k].m(d,null);x=!0,F||(D=[Y(r,"drop",e[7]),Y(r,"dragover",Sl),Y(o,"click",e[10]),Y(v,"input",e[19]),Y(S,"click",e[12]),Y(N,"click",e[20])],F=!0)},p(E,[j]){if(E[3]?w?(w.p(E,j),j&8&&ee(w,1)):(w=_i(E),w.c(),ee(w,1),w.m(n,s)):w&&(ze(),le(w,1,1,()=>{w=null}),Xe()),j&770){O=E[1];let k;for(k=0;k<O.length;k+=1){let K=gi(E,O,k);B[k]?B[k].p(K,j):(B[k]=vi(K),B[k].c(),B[k].m(a,m))}for(;k<B.length;k+=1)B[k].d(1);B.length=O.length}if(j&64){q=E[6];let k;for(k=0;k<q.length;k+=1){let K=mi(E,q,k);$[k]?$[k].p(K,j):($[k]=xi(K),$[k].c(),$[k].m(a,null))}for(;k<$.length;k+=1)$[k].d(1);$.length=q.length}if(j&4&&v.value!==E[2]&&Ee(v,E[2]),j&16){A=E[4];let k;for(k=0;k<A.length;k+=1){let K=hi(E,A,k);R[k]?R[k].p(K,j):(R[k]=yi(K),R[k].c(),R[k].m(d,null))}for(;k<R.length;k+=1)R[k].d(1);R.length=A.length}},i(E){x||(ee(w),x=!0)},o(E){le(w),x=!1},d(E){E&&X(n),w&&w.d(),Ke(B,E),Ke($,E),Ke(R,E),F=!1,te(D)}}}function Sl(e){e.preventDefault()}function Tl(e,n,t){let i=Re(),{app:r}=n,{markdownProcessor:l}=n,o=[],c=[],s="notes-combinees.md",a=!1,m=[];function u(d){d.preventDefault();let x=d.dataTransfer?.items;if(x)for(let F=0;F<x.length;F++){let D=x[F];if(D.kind==="file"){let w=D.getAsFile();w&&w.name.endsWith(".md")&&c.push(w.name)}else D.kind==="string"&&D.getAsString(async w=>{let O=r.vault.getAbstractFileByPath(w);O&&"extension"in O&&O.extension==="md"&&o.push(O)})}}function p(d,x){let F=o.splice(d,1)[0];o.splice(x,0,F)}function f(d){o.splice(d,1)}async function y(){t(3,a=!0)}function v(d){let x=d.detail;t(1,o=[...o,...x])}async function C(){if(!l){console.error("MarkdownProcessor is not available.");return}let d="";for(let F of o){let D=await r.vault.read(F);d+=D+`
`}let x=await l.processMarkdown(d);try{let D=await pe(s,async w=>await r.vault.adapter.exists(w));await r.vault.create(D,x),new wi.Notice(`File ${D} created successfully.`),console.log(`File ${D} created successfully.`)}catch(F){console.error(`Error creating file ${s}:`,F)}}function S(d){a=d,t(3,a)}let h=d=>f(d),N=d=>p(d,d-1),T=d=>p(d,d+1),g=d=>c.splice(d,1);function L(){s=this.value,t(2,s)}let _=()=>i("close");return e.$$set=d=>{"app"in d&&t(0,r=d.app),"markdownProcessor"in d&&t(13,l=d.markdownProcessor)},[r,o,s,a,m,i,c,u,p,f,y,v,C,l,S,h,N,T,g,L,_]}var Dn=class extends ie{constructor(n){super(),ce(this,n,Tl,El,oe,{app:0,markdownProcessor:13},Fl)}},ki=Dn;var $c=require("obsidian");function Ll(e){return e.replace(/^#{6}\s+(.+)$/gm,"\\paragraph{$1}").replace(/^#{5}\s+(.+)$/gm,"\\subsubsection{$1}").replace(/^#{4}\s+(.+)$/gm,"\\subsection{$1}").replace(/^#{3}\s+(.+)$/gm,"\\subsection{$1}").replace(/^#{2}\s+(.+)$/gm,"\\section{$1}").replace(/^#{1}\s+(.+)$/gm,"\\section{$1}")}function Ol(e){return e.replace(/\*\*([^*]+)\*\*/g,"\\textbf{$1}").replace(/\*([^*]+)\*/g,"\\textit{$1}").replace(/~~([^~]+)~~/g,"\\sout{$1}").replace(/`([^`]+)`/g,"\\texttt{$1}")}function Il(e){return e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,"\\href{$2}{$1}"),e=e.replace(/\[\[([^\]|]+)\]\]/g,"$1"),e=e.replace(/\[\[([^\]|]+)\|([^\]]+)\]\]/g,"$2"),e}function $l(e){let n=!1,t="";return e.split(`
`).map(i=>i.match(/^\s*[-*+]\s/)?!n||t!=="itemize"?(n=!0,t="itemize",`\\begin{itemize}
\\item `+i.replace(/^\s*[-*+]\s/,"")):"\\item "+i.replace(/^\s*[-*+]\s/,""):i.match(/^\s*\d+\.\s/)?!n||t!=="enumerate"?(n=!0,t="enumerate",`\\begin{enumerate}
\\item `+i.replace(/^\s*\d+\.\s/,"")):"\\item "+i.replace(/^\s*\d+\.\s/,""):n&&i.trim()===""?(n=!1,`\\end{${t}}
`):i).join(`
`)}function Ml(e){let n=!1,t="";return e.split(`
`).map(i=>{let r=i.match(/^```(\w*)$/);return r?n?(n=!1,"\\end{lstlisting}"):(n=!0,t=r[1]||"text","\\begin{lstlisting}[language="+t+"]"):n?i.replace(/%/g,"\\%").replace(/_/g,"\\_"):i}).join(`
`)}function Nl(e){let n=!1,t=0;return e.split(`
`).map(i=>i.trim().startsWith("|")&&i.trim().endsWith("|")?n?i.trim().match(/^[\|\-:\s]+$/)?"":i.trim().slice(1,-1).split("|").map(r=>r.trim()).join(" & ")+" \\\\n\\hline":(n=!0,t=(i.match(/\|/g)||[]).length-1,"\\begin{tabular}{"+"|c".repeat(t)+`|}
\\hline
`+i.trim().slice(1,-1).split("|").map(r=>r.trim()).join(" & ")+" \\\\n\\hline"):n&&i.trim()===""?(n=!1,`\\end{tabular}
`):i).join(`
`)}function Dl(e){return e=e.replace(/\$([^$]+)\$/g,"\\($1\\)"),e=e.replace(/\$\$([\s\S]+?)\$\$/g,`\\[
$1
\\]`),e}function Rl(){return`
\\end{document}`}function jl(e,n,t){let{app:i}=n,{settings:r}=n,{markdownContent:l=""}=n,o="",c="",s={documentClass:"article",packages:["amsmath","amssymb","graphicx","hyperref","geometry","babel","listings"],geometry:{margin:"2.5cm"}};function a(u=""){return`\\documentclass{${s.documentClass}}

${s.packages.map(p=>`\\usepackage{${p}}`).join(`
`)}

\\geometry{${Object.entries(s.geometry).map(([p,f])=>`${p}=${f}`).join(",")}}

\\begin{document}

${u?`\\title{${u}}
\\maketitle

`:""}`}async function m(u,p=""){try{o="Conversion en cours...";let f=u;return f=Dl(f),f=Ml(f),f=Nl(f),f=Ll(f),f=$l(f),f=Il(f),f=Ol(f),c=a(p)+f+Rl(),o="Conversion termin\xE9e",c}catch(f){throw o="Erreur lors de la conversion",f}}return e.$$set=u=>{"app"in u&&t(0,i=u.app),"settings"in u&&t(1,r=u.settings),"markdownContent"in u&&t(2,l=u.markdownContent)},[i,r,l,m]}var Rn=class extends ie{constructor(n){super(),ce(this,n,jl,null,oe,{app:0,settings:1,markdownContent:2,convertToLatex:3})}get convertToLatex(){return this.$$.ctx[3]}},Ci=Rn;function Pl(e){Ae(e,"svelte-1q993eg",".combiner-app.svelte-1q993eg.svelte-1q993eg{padding:1rem}.combiner-container.svelte-1q993eg.svelte-1q993eg{padding:20px}.button-container.svelte-1q993eg.svelte-1q993eg{margin:20px 0}.status.svelte-1q993eg.svelte-1q993eg{margin:10px 0;font-style:italic}.preview.svelte-1q993eg.svelte-1q993eg{margin-top:20px;padding:10px;border:1px solid var(--background-modifier-border);border-radius:4px}.preview.svelte-1q993eg pre.svelte-1q993eg{max-height:300px;overflow:auto;white-space:pre-wrap}")}function Fi(e){let n,t;return n=new ki({props:{app:e[0],markdownProcessor:e[2]}}),n.$on("close",e[13]),{c(){Se(n.$$.fragment)},m(i,r){ve(n,i,r),t=!0},p(i,r){let l={};r&1&&(l.app=i[0]),r&4&&(l.markdownProcessor=i[2]),n.$set(l)},i(i){t||(ee(n.$$.fragment,i),t=!0)},o(i){le(n.$$.fragment,i),t=!1},d(i){de(n,i)}}}function Ai(e){let n,t,i,r,l;return{c(){n=M("div"),t=M("h4"),t.textContent="Aper\xE7u LaTeX",i=P(),r=M("pre"),l=Q(e[7]),H(r,"class","svelte-1q993eg"),H(n,"class","preview svelte-1q993eg")},m(o,c){J(o,n,c),b(n,t),b(n,i),b(n,r),b(r,l)},p(o,c){c&128&&fe(l,o[7])},d(o){o&&X(n)}}}function Bl(e){let n,t,i,r,l=e[4]?"Fermer la combinaison manuelle":"Combinaison manuelle avanc\xE9e",o,c,s,a,m,u,p,f,y,v,C,S,h,N,T,g,L,_,d,x,F,D,w,O=e[4]&&Fi(e),B={app:e[0],settings:e[1],basePath:"",config:null,combinedFileName:""};a=new et({props:B}),e[14](a);let q={app:e[0],settings:e[1]};u=new Ci({props:q}),e[15](u);let $=e[6]&&e[7]&&Ai(e);return{c(){n=M("div"),t=M("h1"),t.textContent="Markdown Combiner",i=P(),r=M("button"),o=Q(l),c=P(),O&&O.c(),s=P(),Se(a.$$.fragment),m=P(),Se(u.$$.fragment),p=P(),f=M("button"),f.textContent="Combine Active Note",y=P(),v=M("button"),v.textContent="Fermer l'interface",C=P(),S=M("div"),h=M("h3"),h.textContent="Combiner et Convertir en LaTeX",N=P(),T=M("div"),g=M("button"),g.textContent="Combiner et Convertir",L=P(),_=M("div"),d=Q(e[5]),x=P(),$&&$.c(),De(r,"margin-bottom","1rem"),H(T,"class","button-container svelte-1q993eg"),H(_,"class","status svelte-1q993eg"),H(S,"class","combiner-container svelte-1q993eg"),H(n,"class","combiner-app svelte-1q993eg")},m(A,R){J(A,n,R),b(n,t),b(n,i),b(n,r),b(r,o),b(n,c),O&&O.m(n,null),b(n,s),ve(a,n,null),b(n,m),ve(u,n,null),b(n,p),b(n,f),b(n,y),b(n,v),b(n,C),b(n,S),b(S,h),b(S,N),b(S,T),b(T,g),b(S,L),b(S,_),b(_,d),b(S,x),$&&$.m(S,null),F=!0,D||(w=[Y(r,"click",e[12]),Y(f,"click",e[8]),Y(v,"click",Hl),Y(g,"click",e[9])],D=!0)},p(A,[R]){(!F||R&16)&&l!==(l=A[4]?"Fermer la combinaison manuelle":"Combinaison manuelle avanc\xE9e")&&fe(o,l),A[4]?O?(O.p(A,R),R&16&&ee(O,1)):(O=Fi(A),O.c(),ee(O,1),O.m(n,s)):O&&(ze(),le(O,1,1,()=>{O=null}),Xe());let E={};R&1&&(E.app=A[0]),R&2&&(E.settings=A[1]),a.$set(E);let j={};R&1&&(j.app=A[0]),R&2&&(j.settings=A[1]),u.$set(j),(!F||R&32)&&fe(d,A[5]),A[6]&&A[7]?$?$.p(A,R):($=Ai(A),$.c(),$.m(S,null)):$&&($.d(1),$=null)},i(A){F||(ee(O),ee(a.$$.fragment,A),ee(u.$$.fragment,A),F=!0)},o(A){le(O),le(a.$$.fragment,A),le(u.$$.fragment,A),F=!1},d(A){A&&X(n),O&&O.d(),e[14](null),de(a),e[15](null),de(u),$&&$.d(),D=!1,te(w)}}}function Hl(){let e=document.getElementById("combiner-debug-root");e&&e.remove()}function ql(e,n,t){let{app:i}=n,{settings:r}=n,{defaultFileName:l="note-combinee.md"}=n,{checkFileExists:o=async()=>!1}=n,c,s,a="",m=Mn(),u=gn(),p=!1,f="",y=!1,v="",C="";async function S(){if(c){let d=i.workspace.getActiveFile();if(d){let x=await i.vault.read(d);C=await c.processMarkdown(x),tt(x),it(C),u=gn()}}}async function h(){let d=await pe(l,o);a=`${m.save_success||"Fichier sauvegard\xE9 sous :"} ${d}`}async function N(){try{t(5,f="Combinaison des fichiers...");let d=i.workspace.getActiveFile();if(!d){t(5,f="Erreur: Aucun fichier actif");return}let x=await i.vault.read(d);C=await c.processMarkdown(x),t(5,f="Conversion en LaTeX..."),t(7,v=await s.convertToLatex(C,d.basename));let F=d.basename+".tex",D=d.parent?.path||"",O=await pe(F,async q=>{let $=D?`${D}/${q}`:q;return await i.vault.adapter.exists($)}),B=D?`${D}/${O}`:O;await i.vault.create(B,v),t(5,f="Conversion termin\xE9e !"),t(6,y=!0)}catch(d){t(5,f=`Erreur: ${d.message}`)}}let T=()=>t(4,p=!p),g=()=>t(4,p=!1);function L(d){be[d?"unshift":"push"](()=>{c=d,t(2,c)})}function _(d){be[d?"unshift":"push"](()=>{s=d,t(3,s)})}return e.$$set=d=>{"app"in d&&t(0,i=d.app),"settings"in d&&t(1,r=d.settings),"defaultFileName"in d&&t(10,l=d.defaultFileName),"checkFileExists"in d&&t(11,o=d.checkFileExists)},[i,r,c,s,p,f,y,v,S,N,l,o,T,g,L,_]}var jn=class extends ie{constructor(n){super(),ce(this,n,ql,Bl,oe,{app:0,settings:1,defaultFileName:10,checkFileExists:11},Pl)}},tn=jn;var $e={useHiddenEmbeds:!0};function we(){return{...$e}}function Ei(e,n){$e={...$e,[e]:n}}async function Si(e){let n=await e.loadData();n&&($e={...$e,...n})}async function Ti(e){await e.saveData($e)}je();async function Li(e,n,t){let i=n.parent,r=n.basename+"-combined.md",o=await pe(r,async m=>{let u=i?i.path+"/"+m:m;return!!e.vault.getAbstractFileByPath(u)}),c=i?i.path+"/"+o:o,s=await e.vault.create(c,t);await e.workspace.getLeaf("split","vertical").openFile(s),e.workspace.trigger("notice","Fichier combin\xE9 cr\xE9\xE9 et ouvert : "+o)}var rn=class extends ge.Plugin{view;async onload(){await this.loadSettings(),this.addSettingTab(new Pn(this.app,this)),this.addRibbonIcon("dice","Combine Notes",()=>{this.openFloatingCombiner()}),this.addCommand({id:"open-combiner-view",name:"Open Combiner",callback:()=>{this.openFloatingCombiner()}}),this.addCommand({id:"combine-active-note-to-file",name:"Combiner la note active (fichier)",callback:async()=>{let n=this.app.workspace.getActiveFile();if(!n){new ge.Notice("Aucun fichier actif.");return}let t=we(),i=await mn(this.app,n,t);await Li(this.app,n,i)}}),this.addCommand({id:"combine-active-note-direct",name:"Combiner la note active (direct)",icon:"combiner",callback:async()=>{let n=this.app.workspace.getActiveFile();if(!n){this.app.workspace.trigger("notice","Aucune note active");return}let{combineMarkdownNote:t}=await Promise.resolve().then(()=>(je(),nt)),i=we(),r=await t(this.app,n,i);await Li(this.app,n,r)}}),this.addCommand({id:"open-combiner-dom",name:"Ouvrir le combiner (s\xE9lection manuelle)",callback:()=>{let n=document.getElementById("combiner-debug-root");n?n.innerHTML="":(n=document.createElement("div"),n.id="combiner-debug-root",n.style.position="fixed",n.style.top="60px",n.style.right="20px",n.style.zIndex="9999",n.style.background="var(--background-primary)",n.style.border="1px solid var(--background-modifier-border)",n.style.borderRadius="8px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",n.style.padding="1rem",n.style.maxWidth="400px",document.body.appendChild(n));let t=we();new tn({target:n,props:{app:this.app,settings:t}})}})}async onunload(){this.view;let n=document.getElementById("combiner-debug-root");n&&n.remove()}openFloatingCombiner(){let n=document.getElementById("combiner-debug-root");if(n)n.innerHTML="";else{let y=function(h){m=h.clientX-p,u=h.clientY-f,h.target===n&&(c=!0)},v=function(h){m=s,u=a,c=!1},C=function(h){c&&n&&(h.preventDefault(),s=h.clientX-m,a=h.clientY-u,p=s,f=a,S(s,a,n))},S=function(h,N,T){T.style.transform="translate3d("+h+"px, "+N+"px, 0)"};var i=y,r=v,l=C,o=S;n=document.createElement("div"),n.id="combiner-debug-root",n.style.position="fixed",n.style.top="60px",n.style.right="20px",n.style.zIndex="9999",n.style.background="var(--background-primary)",n.style.border="1px solid var(--background-modifier-border)",n.style.borderRadius="8px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",n.style.padding="1rem",n.style.maxWidth="400px",document.body.appendChild(n);let c=!1,s,a,m,u,p=0,f=0;n.addEventListener("mousedown",y),n.addEventListener("mouseup",v),n.addEventListener("mousemove",C)}let t=we();new tn({target:n,props:{app:this.app,settings:t}})}activateView(){let n=this.app.workspace.getRightLeaf(!1);if(n&&n.view.containerEl.children[1]){let t=we();this.view=new tn({target:n.view.containerEl.children[1],props:{app:this.app,settings:t}}),this.app.workspace.revealLeaf(n)}}async loadSettings(){await Si(this)}async saveSettings(){await Ti(this)}},Pn=class extends ge.PluginSettingTab{plugin;constructor(n,t){super(n,t),this.plugin=t}display(){let{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"Settings for Combiner Plugin."});let t=we();new ge.Setting(n).setName("Use Hidden Embeds").setDesc("If enabled, internal links to notes not already embedded will be added as hidden comment blocks.").addToggle(i=>i.setValue(t.useHiddenEmbeds).onChange(async r=>{Ei("useHiddenEmbeds",r),await this.plugin.saveSettings()}))}};
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
